<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIGSTY</title><link>https://pigsty.cc/module/pigsty/</link><description>Recent content on PIGSTY</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://pigsty.cc/module/pigsty/index.xml" rel="self" type="application/rss+xml"/><item><title>Pigsty</title><link>https://pigsty.cc/blog/pigsty/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/blog/pigsty/</guid><description/></item><item><title>亮点特性</title><link>https://pigsty.cc/docs/about/feature/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/feature/</guid><description>&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;&lt;strong&gt;P&lt;/strong&gt;ostgreSQL &lt;strong&gt;I&lt;/strong&gt;n &lt;strong&gt;G&lt;/strong&gt;reat &lt;strong&gt;STY&lt;/strong&gt;le&amp;rdquo;: &lt;strong&gt;P&lt;/strong&gt;ostgres, &lt;strong&gt;I&lt;/strong&gt;nfras, &lt;strong&gt;G&lt;/strong&gt;raphics, &lt;strong&gt;S&lt;/strong&gt;ervice, &lt;strong&gt;T&lt;/strong&gt;oolbox, it&amp;rsquo;s all &lt;strong&gt;Y&lt;/strong&gt;ours.&lt;/p&gt;
&lt;p&gt;—— &lt;strong&gt;开箱即用、本地优先的 PostgreSQL 发行版，开源 RDS 替代&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id="价值主张"&gt;价值主张&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/ecosystem.png"&gt;&lt;strong&gt;可扩展性&lt;/strong&gt;&lt;/a&gt;： 强力 &lt;a href="https://pigsty.cc/docs/ref/extension"&gt;&lt;strong&gt;扩展&lt;/strong&gt;&lt;/a&gt; 开箱即用：深度整合 &lt;strong&gt;PostGIS&lt;/strong&gt;, &lt;strong&gt;TimescaleDB&lt;/strong&gt;, &lt;strong&gt;Citus&lt;/strong&gt;, &lt;strong&gt;PGVector&lt;/strong&gt; 等 &lt;a href="https://pgext.cloud/zh/list"&gt;&lt;strong&gt;444&lt;/strong&gt;&lt;/a&gt; 插件与 Oracle / SQL Server 的 &lt;a href="https://pigsty.cc/docs/pgsql/kernel"&gt;&lt;strong&gt;兼容内核&lt;/strong&gt;&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/arch.png"&gt;&lt;strong&gt;可靠性&lt;/strong&gt;&lt;/a&gt;：快速创建 &lt;a href="https://pigsty.cc/docs/concept/ha/"&gt;&lt;strong&gt;高可用&lt;/strong&gt;&lt;/a&gt;、故障自愈的 &lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;&lt;/a&gt; 集群，自动预置的 &lt;a href="https://pigsty.cc/docs/concept/pitr/"&gt;&lt;strong&gt;时间点恢复&lt;/strong&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/concept/sec/ac/"&gt;&lt;strong&gt;访问控制&lt;/strong&gt;&lt;/a&gt;、自签名 &lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;CA&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="https://pigsty.cc/docs/setup/security/"&gt;&lt;strong&gt;SSL&lt;/strong&gt;&lt;/a&gt;，确保数据坚如磐石。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/dashboard.jpg"&gt;&lt;strong&gt;可观测性&lt;/strong&gt;&lt;/a&gt;： 基于 &lt;a href="https://pigsty.cc/docs/infra#victoria-%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E5%A5%97%E4%BB%B6"&gt;&lt;strong&gt;Prometheus&lt;/strong&gt;&lt;/a&gt; &amp;amp; &lt;a href="https://pigsty.cc/docs/infra#grafana"&gt;&lt;strong&gt;Grafana&lt;/strong&gt;&lt;/a&gt; 现代可观测性技术栈，提供惊艳的监控最佳实践。模块化设计，可独立使用：&lt;a href="https://github.com/pgsty/pigsty/wiki/Gallery"&gt;&lt;strong&gt;画廊&lt;/strong&gt;&lt;/a&gt; &amp;amp; &lt;a href="https://demo.pigsty.cc"&gt;&lt;strong&gt;Demo&lt;/strong&gt;&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/ha.png"&gt;&lt;strong&gt;可用性&lt;/strong&gt;&lt;/a&gt;：交付稳定可靠，自动路由，事务池化、读写分离的高性能数据库 &lt;a href="https://pigsty.cc/docs/pgsql/service/#%E9%BB%98%E8%AE%A4%E6%9C%8D%E5%8A%A1"&gt;&lt;strong&gt;服务&lt;/strong&gt;&lt;/a&gt;，通过 HAProxy，Pgbouncer，VIP 提供灵活的 &lt;a href="https://pigsty.cc/docs/pgsql/service/#%E6%8E%A5%E5%85%A5%E6%9C%8D%E5%8A%A1"&gt;&lt;strong&gt;接入&lt;/strong&gt;&lt;/a&gt; 模式。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/iac.jpg"&gt;&lt;strong&gt;可维护性&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;简单易用&lt;/strong&gt;&lt;/a&gt;，&lt;a href="https://pigsty.cc/docs/pgsql/config"&gt;&lt;strong&gt;基础设施即代码&lt;/strong&gt;&lt;/a&gt;，&lt;a href="https://pigsty.cc/docs/pgsql/admin/"&gt;&lt;strong&gt;管理SOP预案&lt;/strong&gt;&lt;/a&gt;，自动调参，本地软件仓库，&lt;a href="https://pigsty.cc/docs/deploy/vagrant"&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; &lt;a href="https://pigsty.cc/docs/deploy/sandbox"&gt;&lt;strong&gt;沙箱&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="https://pigsty.cc/docs/deploy/terraform"&gt;&lt;strong&gt;Terraform&lt;/strong&gt;&lt;/a&gt; 模板，不停机 &lt;a href="https://pigsty.cc/docs/pgsql/migration"&gt;&lt;strong&gt;迁移&lt;/strong&gt;&lt;/a&gt; 方案。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/img/pigsty/sandbox.png"&gt;&lt;strong&gt;可组合性&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/concept/arch#%E6%A8%A1%E5%9D%97"&gt;&lt;strong&gt;模块化&lt;/strong&gt;&lt;/a&gt; 架构设计，可复用的 &lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;Infra&lt;/strong&gt;&lt;/a&gt;，多样的可选 &lt;a href="https://pigsty.cc/docs/ref/module/"&gt;&lt;strong&gt;模块&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/redis"&gt;&lt;strong&gt;Redis&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;MinIO&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://pigsty.cc/docs/ferret"&gt;&lt;strong&gt;FerretDB&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://github.com/pgsty/pigsty/tree/master/app/duckdb"&gt;&lt;strong&gt;DuckDB&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://pigsty.cc/docs/app/"&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;/a&gt;, &lt;a href="https://github.com/pgsty/pigsty/tree/master/app/supabase"&gt;&lt;strong&gt;Supabase&lt;/strong&gt;&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://pigsty.cc/img/pigsty/banner.png" alt=""&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="总览"&gt;总览&lt;/h2&gt;
&lt;p&gt;Pigsty 是一个更好的本地开源 RDS for PostgreSQL 替代：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#%E5%BC%80%E7%AE%B1%E5%8D%B3%E7%94%A8%E7%9A%84rds"&gt;开箱即用的RDS&lt;/a&gt;：从内核到RDS发行版，在 EL/Debian/Ubuntu 下提供 13-18 版本的生产级 PG 数据库服务。&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6"&gt;丰富的扩展插件&lt;/a&gt;：提供无可比拟的 444 扩展，提供开箱即用的分布式的时序地理空间图文向量多模态数据库能力。&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E7%81%B5%E6%B4%BB%E7%9A%84%E6%A8%A1%E5%9D%97%E6%9E%B6%E6%9E%84"&gt;灵活的模块架构&lt;/a&gt;：灵活组合，自由扩展：Redis/Etcd/MinIO/Mongo；可独立使用，监控现有RDS/主机/数据库。&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E6%83%8A%E8%89%B3%E7%9A%84%E8%A7%82%E6%B5%8B%E8%83%BD%E5%8A%9B"&gt;惊艳的观测能力&lt;/a&gt;：基于现代可观测性技术栈 Prometheus/Grafana，提供令人惊艳，无可比拟的数据库观测能力。&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E4%B9%85%E7%BB%8F%E8%80%83%E9%AA%8C%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7"&gt;验证过的可靠性&lt;/a&gt;：故障自愈的高可用架构：硬件故障自动切换，流量无缝衔接。并提供自动配置的 PITR 兜底删库！&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E7%AE%80%E5%8D%95%E6%98%93%E7%94%A8%E5%8F%AF%E7%BB%B4%E6%8A%A4"&gt;简单易用可维护&lt;/a&gt;：声明式API，GitOps就位，傻瓜式操作，Database/Infra-as-Code 以及管理SOP封装管理复杂度！&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E6%89%8E%E5%AE%9E%E7%9A%84%E5%AE%89%E5%85%A8%E5%AE%9E%E8%B7%B5"&gt;扎实的安全实践&lt;/a&gt;：加密备份一应俱全，自带基础ACL最佳实践。只要硬件与密钥安全，您无需操心数据库的安全性！&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E5%B9%BF%E6%B3%9B%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"&gt;广泛的应用场景&lt;/a&gt;：低代码数据应用开发，或使用预置的 Docker Compose 模板，一键拉起使用PostgreSQL的海量软件！&lt;/li&gt;
&lt;li&gt;&lt;a href="#%E5%BC%80%E6%BA%90%E7%9A%84%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6"&gt;开源的自由软件&lt;/a&gt;：以云数据库1/10不到的成本拥有与更好的数据库服务！帮您真正“拥有”自己的数据，实现自主可控！&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PostgreSQL 整合了生态中的工具与最佳实践：&lt;/p&gt;</description></item><item><title>Pigsty 中文文档 v4.1</title><link>https://pigsty.cc/docs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/</guid><description>&lt;p&gt;&amp;ldquo;&lt;strong&gt;P&lt;/strong&gt;ostgreSQL &lt;strong&gt;I&lt;/strong&gt;n &lt;strong&gt;G&lt;/strong&gt;reat &lt;strong&gt;STY&lt;/strong&gt;le&amp;rdquo;: &lt;strong&gt;P&lt;/strong&gt;ostgres, &lt;strong&gt;I&lt;/strong&gt;nfras, &lt;strong&gt;G&lt;/strong&gt;raphics, &lt;strong&gt;S&lt;/strong&gt;ervice, &lt;strong&gt;T&lt;/strong&gt;oolbox, it&amp;rsquo;s all &lt;strong&gt;Y&lt;/strong&gt;ours.&lt;/p&gt;
&lt;p&gt;—— &lt;strong&gt;开箱即用、本地优先的 PostgreSQL 发行版，开源 RDS 替代&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://github.com/pgsty/pigsty"&gt;仓库&lt;/a&gt; | &lt;a href="https://demo.pigsty.cc"&gt;演示&lt;/a&gt; | &lt;a href="https://pigsty.cc/blog"&gt;博客&lt;/a&gt; | &lt;a href="https://github.com/pgsty/pigsty/discussions"&gt;论坛&lt;/a&gt; | &lt;a href="https://mp.weixin.qq.com/s/-E_-HZ7LvOze5lmzy3QbQA"&gt;微信&lt;/a&gt; | &lt;a href="https://pigsty.io/docs/"&gt;EN Docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/setup/install"&gt;快速上手&lt;/a&gt; 最新版本的 Pigsty：&lt;code&gt;curl -fsSL https://repo.pigsty.cc/get | bash -s v4.1.0&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/about/"&gt;&lt;strong&gt;关于&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/about/feature"&gt;功能特性&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/history"&gt;历史沿革&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/event"&gt;活动新闻&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/community"&gt;加入社区&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/privacy"&gt;隐私政策&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/license"&gt;开源协议&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/sponsor"&gt;赞助我们&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/service"&gt;服务订阅&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/concept/"&gt;&lt;strong&gt;概念&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/concept/arch"&gt;系统架构&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/model"&gt;集群模型&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/monitor"&gt;监控系统&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/iac"&gt;IaC&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/ha"&gt;HA&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/pitr"&gt;PITR&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/pgsql/misc/svc"&gt;服务接入&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/concept/sec"&gt;安全加固&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/setup/"&gt;&lt;strong&gt;上手&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/setup/install"&gt;单机安装&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/setup/offline"&gt;离线安装&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;资源准备&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/setup/config"&gt;声明配置&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;执行剧本&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/setup/security"&gt;安全考量&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/pgsql/faq"&gt;常见问题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/deploy/"&gt;&lt;strong&gt;部署&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/deploy/planning"&gt;架构规划&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;资源准备&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/install"&gt;生产部署&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/sandbox"&gt;沙箱环境&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/vagrant"&gt;Vagrant&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/deploy/terraform"&gt;Terraform&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/ref/"&gt;&lt;strong&gt;参考&lt;/strong&gt;&lt;/a&gt;：&lt;a href="https://pigsty.cc/docs/ref/linux"&gt;操作系统&lt;/a&gt; | &lt;a href="https://pgext.cloud/zh/list"&gt;扩展列表&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/ref/fhs"&gt;文件结构&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/compare"&gt;同类产品&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/about/compare/cost"&gt;成本参考&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/app/"&gt;应用模板&lt;/a&gt; | &lt;a href="https://pigsty.cc/docs/conf/"&gt;配置模板&lt;/a&gt;&lt;/p&gt;</description></item><item><title>历史沿革</title><link>https://pigsty.cc/docs/about/history/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/history/</guid><description>&lt;hr&gt;
&lt;h2 id="历史起源"&gt;历史起源&lt;/h2&gt;
&lt;p&gt;Pigsty 项目始于 2018 ～ 2019 年，起源于 &lt;a href="https://tantanapp.com/en"&gt;&lt;strong&gt;探探&lt;/strong&gt;&lt;/a&gt;。
探探是一个互联网交友 App —— 中国的 Tinder，现已被陌陌收购。
探探这家公司是一个北欧风格的创业公司，有着一个瑞典工程师初创团队。&lt;/p&gt;
&lt;p&gt;探探在技术上极有品味，使用 PostgreSQL 与 Go 作为核心技术栈。
探探整个系统架构参照 Instagram ，一切围绕 PostgreSQL 数据库设计。
直到几百万日活，几百万 TPS，几百 TB 数据的量级下，数据组件 &lt;a href="https://pigsty.cc/blog/pg/just-use-pg"&gt;&lt;strong&gt;只用了 PostgreSQL&lt;/strong&gt;&lt;/a&gt;。
几乎所有的业务逻辑都使用 PG 存储过程实现 —— 甚至包括 100ms 的推荐算法！称得上当时中国最复杂的 PostgreSQL 规模场景用例。&lt;/p&gt;
&lt;p&gt;探探这种深度使用 PostgreSQL 特性的非典型研发模式，对工程师与DBA的水平提出了极高的要求。
而 Pigsty ，就是我们用这种真实世界的大规模，高标准数据库集群场景打磨出的开源项目 ——
沉淀着我们作为顶尖 PostgreSQL 专家的经验与最佳实践。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="发展过程"&gt;发展过程&lt;/h2&gt;
&lt;p&gt;在最开始，Pigsty 并没有现在这样的愿景、目标与版图。而是为了提供一个供我们自己使用的 PostgreSQL 监控系统。
我们调研了市面上所有的方案，开源的、商业的、云的，datadog, pgwatch，…… ，没有一个能满足我们对于可观测性的需求。
因此我决定自己动手，基于 Grafana 与 Prometheus 自己动手打造一个，这就是 Pigsty 的前身与雏形。
Pigsty 作为监控系统的效果相当惊艳，帮助我们解决了无数管理问题。&lt;/p&gt;
&lt;p&gt;随后，研发人员希望在本地的开发机上也有这样的监控系统，于是我们使用 Ansible 编写了置备剧本，将这套系统从一次性建设任务转变为了可重复使用，可复制的软件。
新版本允许用户使用 Vagrant 和 Terraform，用 Infra as Code 的方式快速拉起本地 DevBox 开发机，或生产环境服务器，并自动完成 PostgreSQL 与监控系统的部署。&lt;/p&gt;</description></item><item><title>活动新闻</title><link>https://pigsty.cc/docs/about/event/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/event/</guid><description>&lt;hr&gt;
&lt;h2 id="最近新闻"&gt;最近新闻&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2026-02-12&lt;/strong&gt;: &lt;strong&gt;Pigsty v4.1 正式发布！第一批支持 PostgreSQL 18.2 的发行版&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;发布博客：&lt;a href="https://pigsty.cc/blog/pigsty/v4.1"&gt;Pigsty v4.1 发布文章&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;发布说明：&lt;a href="https://pigsty.cc/docs/about/release#v410"&gt;v4.1.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pigsty 已支持 PostgreSQL 小版本发布：18.2&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2026-02-04&lt;/strong&gt;: Extension for Everyone 主题入选 PGCon.Dev 2026 演讲！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mp.weixin.qq.com/s/rThnqXp2JXVV9UQncNV3kg"&gt;&lt;strong&gt;中国厂商首次站上 PGConf.dev 主题演讲台&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2026-02-03&lt;/strong&gt;: &lt;strong&gt;Pigsty v4.0 正式发布！&lt;/strong&gt; 迈入 Agent 时代！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQL 官方网站新闻：《&lt;a href="https://www.postgresql.org/about/news/pigsty-v40-released-ready-for-the-agent-era-3228/"&gt;Pigsty v4.0 Released: Ready for the Agent Era&lt;/a&gt;》&lt;/li&gt;
&lt;li&gt;Victoria 可观测性革命，安全加固，JUICE/VIBE 新模块，容器支持，许可证变更为 Apache-2.0&lt;/li&gt;
&lt;li&gt;发布说明：&lt;a href="https://pigsty.cc/docs/about/release#v400"&gt;v4.0.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;发布博客：&lt;a href="https://vonng.com/pigsty/v4.0"&gt;Pigsty v4.0：进入 AI 时代&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2026-01-30&lt;/strong&gt;: &lt;strong&gt;PIG v1.0 正式发布！&lt;/strong&gt; 与 PGEXT.CLOUD 扩展目录同步上线&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQL 官方网站新闻：《&lt;a href="https://www.postgresql.org/about/news/pig-v10-released-with-pgextcloud-444-pg-extensions-on-14-linux-3214/"&gt;PIG v1.0 Released with PGEXT.CLOUD: 444 PG extensions on 14 Linux&lt;/a&gt;》&lt;/li&gt;
&lt;li&gt;PostgreSQL 扩展包管理器 pig v1.0 正式 GA，配合 PGEXT.CLOUD 开放扩展基础设施，提供 444 个扩展&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2025-12-02&lt;/strong&gt;: &lt;strong&gt;Pigsty v3.7.0 发布！&lt;/strong&gt; PG18 成为默认版本，437 扩展，EL10/Debian13 支持&lt;/p&gt;</description></item><item><title>关于</title><link>https://pigsty.cc/docs/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/</guid><description/></item><item><title>发展规划</title><link>https://pigsty.cc/docs/about/roadmap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/roadmap/</guid><description>&lt;hr&gt;
&lt;h2 id="版本发布策略"&gt;版本发布策略&lt;/h2&gt;
&lt;p&gt;Pigsty 使用语义化版本号，&lt;code&gt;&amp;lt;主版本&amp;gt;.&amp;lt;次版本&amp;gt;.&amp;lt;修订号&amp;gt;&lt;/code&gt;。Alpha / Beta / RC 版本会在版本号后添加后缀，如 &lt;code&gt;-a1&lt;/code&gt;，&lt;code&gt;-b1&lt;/code&gt;，&lt;code&gt;-c1&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;主版本更新意味着不兼容的基础性变化与重大新特性；次版本更新通常表示普通功能特性更新，较小的API变动；修订版本更新意味着 Bug 修复与软件包版本更新。&lt;/p&gt;
&lt;p&gt;Pigsty 计划每年发布一次主版本更新，次版本更新通常跟随 PostgreSQL 小版本更新节奏，在 PostgreSQL 新版本发布后最迟一个月内跟进。
Pigsty 通常每年计划 4 - 6 个小版本，完整发布历史请参考 &lt;a href="https://pigsty.cc/docs/about/release"&gt;&lt;strong&gt;发行注记&lt;/strong&gt;&lt;/a&gt; 。&lt;/p&gt;
&lt;div class="alert alert-primary" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;使用具体的版本号进行部署&lt;/div&gt;
&lt;p&gt;Pigsty 使用 &lt;strong&gt;main&lt;/strong&gt; 主干分支进行开发，请始终使用带有版本号的 &lt;a href="https://github.com/pgsty/pigsty/releases"&gt;&lt;strong&gt;Release&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;除非您清楚知道自己在做什么，否则请勿使用 GitHub 的 &lt;strong&gt;main&lt;/strong&gt; 分支，总是检出特定版本使用。&lt;/p&gt;
&lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="列入考虑的新特性"&gt;列入考虑的新特性&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; Agent Native CLI - PIG&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; DBA Agent - 基本集成&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; Grafana Dashboard 改进&lt;/li&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; Boar 管理平台&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这里是我们的 &lt;a href="https://github.com/pgsty/pigsty/issues"&gt;&lt;strong&gt;活跃议题&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="https://github.com/users/Vonng/projects/2/views/3"&gt;&lt;strong&gt;路线图&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="扩展插件与软件包"&gt;扩展插件与软件包&lt;/h2&gt;
&lt;p&gt;关于扩展支持的路线图，可以在这里找到：https://pgext.cloud/e/roadmap&lt;/p&gt;
&lt;h3 id="考虑纳入"&gt;考虑纳入&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PDU : &lt;a href="https://github.com/wublabdubdub/PDU-PostgreSQLDataUnloader"&gt;https://github.com/wublabdubdub/PDU-PostgreSQLDataUnloader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;walminer &lt;a href="https://gitee.com/movead/XLogMiner"&gt;https://gitee.com/movead/XLogMiner&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;is_jsonb_valid &lt;a href="https://github.com/furstenheim/is_jsonb_valid"&gt;https://github.com/furstenheim/is_jsonb_valid&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_kafka &lt;a href="https://github.com/xstevens/pg_kafka"&gt;https://github.com/xstevens/pg_kafka&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_jieba &lt;a href="https://github.com/jaiminpan/pg_jieba"&gt;https://github.com/jaiminpan/pg_jieba&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_paxos &lt;a href="https://github.com/microsoft/pg_paxos"&gt;https://github.com/microsoft/pg_paxos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;OneSparse &lt;a href="https://github.com/OneSparse/OneSparse"&gt;https://github.com/OneSparse/OneSparse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;PipelineDB &lt;a href="https://github.com/pipelinedb/pipelinedb"&gt;https://github.com/pipelinedb/pipelinedb&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;SQL Firewall &lt;a href="https://github.com/uptimejp/sql_firewall"&gt;https://github.com/uptimejp/sql_firewall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;zcurve &lt;a href="https://github.com/bmuratshin/zcurve"&gt;https://github.com/bmuratshin/zcurve&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;PG dot net &lt;a href="https://github.com/Brick-Abode/pldotnet/releases"&gt;https://github.com/Brick-Abode/pldotnet/releases&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_scws: &lt;a href="https://github.com/jaiminpan/pg_scws"&gt;https://github.com/jaiminpan/pg_scws&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;themsis: &lt;a href="https://github.com/cossacklabs/pg_themis"&gt;https://github.com/cossacklabs/pg_themis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pgspeck &lt;a href="https://github.com/johto/pgspeck"&gt;https://github.com/johto/pgspeck&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;lsm3 &lt;a href="https://github.com/postgrespro/lsm3"&gt;https://github.com/postgrespro/lsm3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;monq &lt;a href="https://github.com/postgrespro/monq"&gt;https://github.com/postgrespro/monq&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_badplan &lt;a href="https://github.com/trustly/pg_badplan"&gt;https://github.com/trustly/pg_badplan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_recall &lt;a href="https://github.com/mreithub/pg_recall"&gt;https://github.com/mreithub/pg_recall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pgfsm &lt;a href="https://github.com/michelp/pgfsm"&gt;https://github.com/michelp/pgfsm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_trgm pro &lt;a href="https://github.com/postgrespro/pg_trgm_pro"&gt;https://github.com/postgrespro/pg_trgm_pro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pgsql-fio: &lt;a href="https://github.com/csimsek/pgsql-fio"&gt;https://github.com/csimsek/pgsql-fio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="暂不考虑"&gt;暂不考虑&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/tembo-io/pg_tier"&gt;pg_tier&lt;/a&gt;: not ready due to incomplete dep parquet_s3_fdw&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/pgspider/parquet_s3_fdw"&gt;parquet_s3_fdw&lt;/a&gt;: not ready due to compiler version&lt;/li&gt;
&lt;li&gt;pg_top: not ready due to cmake error&lt;/li&gt;
&lt;li&gt;timestamp9: not ready due to compiler error&lt;/li&gt;
&lt;li&gt;pg_tier obsolete&lt;/li&gt;
&lt;li&gt;pg_timeseries, we already have timescaledb&lt;/li&gt;
&lt;li&gt;pg_quack, we already have a pg_lakehouse&lt;/li&gt;
&lt;li&gt;pg_telemetry, we already have better observability&lt;/li&gt;
&lt;li&gt;pgx_ulid, &lt;a href="https://github.com/pksunkara/pgx_ulid"&gt;https://github.com/pksunkara/pgx_ulid&lt;/a&gt;, already covered by pg_idkit (MIT, but RUST)&lt;/li&gt;
&lt;li&gt;embedding: obsolete&lt;/li&gt;
&lt;li&gt;FEAT zson &lt;a href="https://github.com/postgrespro/zson"&gt;https://github.com/postgrespro/zson&lt;/a&gt; MIT C (too old)&lt;/li&gt;
&lt;li&gt;GIS pghydro &lt;a href="https://github.com/pghydro/pghydro"&gt;https://github.com/pghydro/pghydro&lt;/a&gt; C GPL-2.0 6.6 (no makefile)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Zeleo/pg_natural_sort_order"&gt;https://github.com/Zeleo/pg_natural_sort_order&lt;/a&gt; (too old)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/postgrespro/pg_query_state"&gt;https://github.com/postgrespro/pg_query_state&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/no0p/pgsampler"&gt;https://github.com/no0p/pgsampler&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_lz4 &lt;a href="https://github.com/zilder/pg_lz4"&gt;https://github.com/zilder/pg_lz4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_amqp &lt;a href="https://github.com/omniti-labs/pg_amqp"&gt;https://github.com/omniti-labs/pg_amqp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;tinyint &lt;a href="https://github.com/umitanuki/tinyint-postgresql"&gt;https://github.com/umitanuki/tinyint-postgresql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_blkchain &lt;a href="https://github.com/blkchain/pg_blkchain"&gt;https://github.com/blkchain/pg_blkchain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;hashtypes &lt;a href="https://github.com/pandrewhk/hashtypes"&gt;https://github.com/pandrewhk/hashtypes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;foreign_table_exposer &lt;a href="https://github.com/komamitsu/foreign_table_exposer"&gt;https://github.com/komamitsu/foreign_table_exposer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ldap_fdw &lt;a href="https://github.com/guedes/ldap_fdw"&gt;https://github.com/guedes/ldap_fdw&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;pg_backtrace &lt;a href="https://github.com/postgrespro/pg_backtrace"&gt;https://github.com/postgrespro/pg_backtrace&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;connection_limits &lt;a href="https://github.com/tvondra/connection_limits"&gt;https://github.com/tvondra/connection_limits&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;fixeddecimal &lt;a href="https://github.com/2ndQuadrant/fixeddecimal"&gt;https://github.com/2ndQuadrant/fixeddecimal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>加入社区</title><link>https://pigsty.cc/docs/about/community/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/community/</guid><description>&lt;hr&gt;
&lt;h2 id="github"&gt;GitHub&lt;/h2&gt;
&lt;p&gt;我们的 GitHub 仓库地址是：&lt;a href="https://github.com/pgsty/pigsty"&gt;https://github.com/pgsty/pigsty&lt;/a&gt; ，欢迎点个 ⭐️ &lt;a href="https://github.com/pgsty/pigsty/stargazers"&gt;&lt;strong&gt;关注&lt;/strong&gt;&lt;/a&gt; 我们。&lt;/p&gt;
&lt;p&gt;我们欢迎任何人 &lt;a href="https://github.com/pgsty/pigsty/issues/new"&gt;提交新 Issue&lt;/a&gt; 或创建 &lt;a href="https://github.com/pgsty/pigsty/pulls"&gt;Pull Request&lt;/a&gt;，提出功能建议并参与 Pigsty 贡献。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://star-history.com/#pgsty/pigsty&amp;amp;Date"&gt;&lt;img src="https://api.star-history.com/svg?repos=pgsty/pigsty&amp;amp;type=Date" alt="Star History Chart"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;请注意，关于 Pigsty 文档的问题，请在 &lt;a href="https://github.com/Vonng/pigsty.cc"&gt;github.com/Vonng/pigsty.cc&lt;/a&gt; 仓库中提交 &lt;a href="https://github.com/Vonng/pigsty.cc/issues"&gt;Issue&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="微信群组"&gt;微信群组&lt;/h2&gt;
&lt;p&gt;中文区用户主要活跃于微信群组中，目前有七个活跃的群组，1群-4群已经满员，其他群需要添加小助手微信拉入。&lt;/p&gt;
&lt;p&gt;加入微信社群，请用搜索 “Pigsty小助手”，（微信号 &lt;code&gt;pigsty-cc&lt;/code&gt;） 备注或发送 “加群” ，小助手会将您拉入群组中。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://pigsty.cc/img/pigsty/pigsty-cc.jpg" alt=""&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="海外社群"&gt;海外社群&lt;/h2&gt;
&lt;p&gt;Telegram: &lt;a href="https://t.me/joinchat/gV9zfZraNPM3YjFh"&gt;https://t.me/joinchat/gV9zfZraNPM3YjFh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Discord: &lt;a href="https://discord.gg/j5pG8qfKxU"&gt;https://discord.gg/j5pG8qfKxU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;您也可以通过邮件联系我： &lt;a href="mailto:rh@vonng.com"&gt;rh@vonng.com&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="社区求助"&gt;社区求助&lt;/h2&gt;
&lt;p&gt;当您使用 Pigsty 遇到问题时，可以向社区求助，您提供的信息越丰富，就越有可能在社区得到帮助。&lt;/p&gt;
&lt;p&gt;请参考 &lt;a href="https://github.com/pgsty/pigsty/discussions/338"&gt;社区求助指南&lt;/a&gt; ，尽可能提供足够的信息，以便社区成员帮助您解决问题。以下是求助提问的参考模板：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;发生了什么事？&lt;/strong&gt; (&lt;strong&gt;必选项&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pigsty版本号与操作系统版本&lt;/strong&gt; (&lt;strong&gt;必选项&lt;/strong&gt;)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$ grep version pigsty.yml 

$ cat /etc/os-release

$ uname -a
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;一些云厂商对标准操作系统发行版进行了定制，您可以告诉我们使用的是哪一家云厂商的什么操作系统镜像。
如果您在安装操作系统后对环境进行了定制与修改，或者在您的局域网中有特定的安全规则与防火墙配置，也请在提问时告知我们。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pigsty配置文件&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请不要忘记抹掉任何敏感信息：密码，内部密钥，敏感配置等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cat ~/pigsty/pigsty.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;你期待发生什么？&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请描述正常情况下应该发生什么事情，实际发生的情况与期待的情况有何偏离？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;如何复现此问题？&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请尽可能详细地告诉我们复现此问题的方法与步骤。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;监控截图&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你在使用 Pigsty 提供的监控系统，可以提供 &lt;strong&gt;相关&lt;/strong&gt; 的截图。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;错误日志&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;请尽可能提供与错误有关的日志。&lt;strong&gt;请不要粘贴类似 “Failed to start xxx service” 之类没有信息量的内容&lt;/strong&gt;。&lt;/p&gt;</description></item><item><title>隐私政策</title><link>https://pigsty.cc/docs/about/privacy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/privacy/</guid><description>&lt;hr&gt;
&lt;h2 id="pigsty软件"&gt;Pigsty软件&lt;/h2&gt;
&lt;p&gt;当您安装 Pigsty 软件时，如果在网络隔离的环境中使用离线软件包安装，&lt;strong&gt;我们不会收到任何关于您的数据&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;如果您选择在线安装，那么在下载相关软件包时，我们的服务器或云供应商的服务器会自动在日志中记录来访机器的 IP 地址和/或主机名，和您下载的软件包名称。
除非法律要求，我们不会与其他组织共享这些信息。（实话说，吃饱了撑着才会去看这些东西）&lt;/p&gt;
&lt;p&gt;Pigsty 使用的主域名为：&lt;a href="https://pigsty.io"&gt;&lt;strong&gt;pigsty.io&lt;/strong&gt;&lt;/a&gt; ，中国大陆请使用中文备案镜像站点 &lt;a href="https://pigsty.cc"&gt;&lt;strong&gt;pigsty.cc&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="pigsty网站"&gt;Pigsty网站&lt;/h2&gt;
&lt;p&gt;当您访问我们的网站时，我们的服务器会自动在 Nginx 日志中记录您的 IP 地址和/或主机名。
仅当您决定通过完成调查或在我们的某个网站上注册为用户来向我们发送此类信息时，我们才会存储您的电子邮件地址、姓名和地点等信息&lt;/p&gt;
&lt;p&gt;我们收集这些信息是为了帮助我们改进网站内容、定制网页布局以及出于技术和支持目的联系人员。除非法律要求，我们不会与其他组织共享您的电子邮件地址。&lt;/p&gt;
&lt;p&gt;本网站使用 Google Analytics，这是 Google, Inc.（“Google”）提供的一项网络分析服务。谷歌分析使用“cookies”，即放置在您计算机上的文本文件，帮助网站分析用户如何使用该网站。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cookie 生成的有关您使用网站的信息（包括您的 IP 地址）将被传输至 Google 位于美国的服务器并由其存储。谷歌将使用这些信息来评估您对网站的使用情况，为网站运营商编制网站活动报告，并提供与网站活动和互联网使用相关的其他服务。
如果法律要求，或者第三方代表 Google 处理信息，Google 还可能会将此信息传输给第三方。 Google 不会将您的 IP 地址与 Google 持有的任何其他数据关联起来。
您可以通过在浏览器上选择适当的设置来拒绝使用 cookie，但请注意，如果您这样做，您可能无法使用本网站的全部功能。使用本网站即表示您同意 Google 以上述方式和目的处理有关您的数据。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果您对此政策有任何疑问或意见，或要求删除个人数据，您可以通过发送邮件至 &lt;a href="mailto:rh@vonng.com"&gt;rh@vonng.com&lt;/a&gt; 与我们联系&lt;/p&gt;</description></item><item><title>开源协议</title><link>https://pigsty.cc/docs/about/license/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/license/</guid><description>&lt;h2 id="协议摘要"&gt;协议摘要&lt;/h2&gt;
&lt;p&gt;Pigsty 项目主体使用 &lt;strong&gt;Apache-2.0&lt;/strong&gt; 开源许可证；Pigsty 文档网站使用 &lt;strong&gt;CC by 4.0&lt;/strong&gt; 许可证。
项目协议地址：&lt;a href="https://github.com/pgsty/pigsty/blob/main/LICENSE"&gt;https://github.com/pgsty/pigsty/blob/main/LICENSE&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="pigsty-项目主体"&gt;Pigsty 项目主体&lt;/h2&gt;
&lt;p&gt;Pigsty 软件主体采用 &lt;a href="#apache-20-%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%8E%9F%E6%96%87"&gt;&lt;strong&gt;Apache License 2.0&lt;/strong&gt;&lt;/a&gt; 许可证。
这是一种宽松的开源许可证，允许您自由地使用、修改和分发本软件，包括用于商业目的，而无需公开您的源代码或使用相同许可证。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;&lt;strong&gt;本协议授权您&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;本协议不提供&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;本协议的条件&lt;/strong&gt;&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-check text-primary"&gt;&lt;/i&gt; 商用&lt;/td&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-xmark text-danger"&gt;&lt;/i&gt; 商标使用权&lt;/td&gt;
 &lt;td&gt;&lt;i class="fa-solid fa-triangle-exclamation text-secondary"&gt;&lt;/i&gt; 包含本许可证与版权声明&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-check text-primary"&gt;&lt;/i&gt; 修改&lt;/td&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-xmark text-danger"&gt;&lt;/i&gt; 责任与担保&lt;/td&gt;
 &lt;td&gt;&lt;i class="fa-solid fa-triangle-exclamation text-secondary"&gt;&lt;/i&gt; 声明对原始代码的修改&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-check text-primary"&gt;&lt;/i&gt; 分发&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-check text-primary"&gt;&lt;/i&gt; 专利授权&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;i class="fas fa-circle-check text-primary"&gt;&lt;/i&gt; 私人使用&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="pigsty-文档网站"&gt;Pigsty 文档网站&lt;/h2&gt;
&lt;p&gt;Pigsty 的文档与网站（包括但不限于：&lt;a href="https://pigsty.cc"&gt;&lt;strong&gt;pigsty.cc&lt;/strong&gt;&lt;/a&gt;，&lt;a href="https://pigsty.io"&gt;&lt;strong&gt;pigsty.io&lt;/strong&gt;&lt;/a&gt;，&lt;a href="https://pgsty.com"&gt;&lt;strong&gt;pgsty.com&lt;/strong&gt;&lt;/a&gt; ）均使用 &lt;strong&gt;Creative Commons Attribution 4.0 International (CC BY 4.0)&lt;/strong&gt; 许可证。
&lt;strong&gt;CC BY 4.0&lt;/strong&gt; 是一种知识共享许可证，允许您自由地分享与演绎本站的内容，但是您必须给出 &lt;a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hans#ref-appropriate-credit"&gt;&lt;strong&gt;适当的署名&lt;/strong&gt;&lt;/a&gt;，提供指向许可证的链接，并 &lt;a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hans#ref-indicate-changes"&gt;&lt;strong&gt;指出是否有对原始内容进行了修改&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;</description></item><item><title>赞助我们</title><link>https://pigsty.cc/docs/about/sponsor/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/sponsor/</guid><description>&lt;hr&gt;
&lt;h2 id="赞助我们"&gt;赞助我们&lt;/h2&gt;
&lt;p&gt;Pigsty 是一个开源免费的自由软件，由 PostgreSQL 社区成员用热情浇灌而成，旨在整合 PostgreSQL 生态的力量，推广 PostgreSQL 的普及。
如果我们的工作帮到了您，请考虑赞助或者支持一下我们的项目：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直接打钱赞助我们，用最直接有力的鼓舞表达您的真挚支持！&lt;/li&gt;
&lt;li&gt;考虑采购我们的 &lt;a href="https://pigsty.cc/docs/about/service/"&gt;&lt;strong&gt;技术支持服务&lt;/strong&gt;&lt;/a&gt;，我们可以提供专业的 PostgreSQL 高可用集群部署与维护服务，让您的预算花得物有所值！&lt;/li&gt;
&lt;li&gt;通过文章，讲座，视频分享您使用 Pigsty 的案例与经验。&lt;/li&gt;
&lt;li&gt;允许我们在 “这些用户使用了Pigsty” 中提及您的组织。&lt;/li&gt;
&lt;li&gt;向有需求的朋友，同事与客户提名/推荐我们的项目与服务。&lt;/li&gt;
&lt;li&gt;关注我们的 &lt;a href="https://mp.weixin.qq.com/s/p4Ys10ZdEDAuqNAiRmcnIQ"&gt;&lt;strong&gt;微信公众号&lt;/strong&gt;&lt;/a&gt; 并转发相关技术文章至群组与朋友圈。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="天使投资人"&gt;天使投资人&lt;/h2&gt;
&lt;p&gt;Pigsty 是由 &lt;a href="https://www.miracleplus.com/en/"&gt;&lt;strong&gt;奇绩创坛&lt;/strong&gt;&lt;/a&gt; （原YC中国，MiraclePlus） S22 所投资的项目，感谢奇绩创坛与陆奇博士对本项目的支持！&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="赞助者"&gt;赞助者&lt;/h2&gt;
&lt;p&gt;感谢我们的赞助者 Vercel，为 Pigsty 网站提供了赞助与网站托管基础设施。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://vercel.com/oss"&gt;&lt;img src="https://vercel.com/oss/program-badge.svg" alt="Vercel OSS Program"&gt;&lt;/a&gt;&lt;/p&gt;</description></item><item><title>行业案例</title><link>https://pigsty.cc/docs/about/case/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/case/</guid><description>&lt;p&gt;根据 Google Analytics PV 与下载量，Pigsty 目前有约 &lt;strong&gt;10 万用户&lt;/strong&gt;，一半来自中国大陆，一半来自全球其他地区。
遍布互联网、云计算、金融、自动驾驶、制造业、科技创新、ISV 与军工等多个行业。
如果您在 使用 Pigsty 并且愿意与我们分享您的案例与 Logo，欢迎联系我们，我们提供一次的免费咨询支持。&lt;/p&gt;
&lt;h2 id="互联网"&gt;互联网&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;探探&lt;/strong&gt;：两百台+物理机，用于 PostgreSQL 与 Redis 服务&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;哔哩哔哩&lt;/strong&gt;：用于支持 PostgreSQL 创新业务&lt;/p&gt;
&lt;h2 id="云厂商"&gt;云厂商&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Bitdeer&lt;/strong&gt;：比特小鹿，提供 PG DBaaS&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Oracle OCI&lt;/strong&gt;：使用 Pigsty 交付 PostgreSQL 集群。&lt;/p&gt;
&lt;h2 id="金融行业"&gt;金融行业&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;AirWallex&lt;/strong&gt;：监控 200+ GCP PostgreSQL 数据库&lt;/p&gt;
&lt;h2 id="影视行业"&gt;影视行业&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;影视飓风&lt;/strong&gt;：自建 PG RDS / Victoria Metrics&lt;/p&gt;
&lt;h2 id="自动驾驶"&gt;自动驾驶&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Momenta&lt;/strong&gt;：自动驾驶，管理自建 PostgreSQL 集群&lt;/p&gt;
&lt;h2 id="制造业"&gt;制造业&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;华峰集团&lt;/strong&gt;：使用 Pigsty 交付 PostgreSQL 集群作为化工时序数据仓库&lt;/p&gt;
&lt;h2 id="科技创新"&gt;科技创新&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;北京领雾科技&lt;/strong&gt;：云上 PostgreSQL 下云自建&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Motphys&lt;/strong&gt;：自建 PostgreSQL 支持 Gitlab&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;赛陇生物科技&lt;/strong&gt;：自建 Supabase&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;杭州零码科技&lt;/strong&gt;：自建 PostgreSQL&lt;/p&gt;
&lt;h2 id="isv"&gt;ISV&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;内蒙古豪德天沐科技有限公司&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>订阅服务</title><link>https://pigsty.cc/docs/about/service/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/service/</guid><description>&lt;p&gt;Pigsty 旨在聚集PG生态的合力，并用自动驾驶的数据库管控软件帮助用户用好世界上 &lt;a href="https://pigsty.cc/blog/pg/pg-is-no1-again/"&gt;&lt;strong&gt;最流行&lt;/strong&gt;&lt;/a&gt; 的数据库 PostgreSQL。&lt;/p&gt;
&lt;p&gt;尽管 Pigsty 本身已经解决了 PG 使用中的诸多问题。但想真正达到企业级服务的质量，原厂提供的专家支持与兜底服务不可或缺。
我们深知专业的商业支持服务对于企业客户的重要性，因此，Pigsty 企业版在开源版本的基础上提供了一系列增值服务，帮助用户更好地用好 PostgreSQL 与 Pigsty，供有需求的客户按需选用。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如果您有下列需求，欢迎考虑 Pigsty 订阅服务：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在关键场景中运行数据库，需要严格 SLA 保障兜底。&lt;/li&gt;
&lt;li&gt;希望对 Pigsty 与 PostgreSQL 相关疑难杂症提供兜底。&lt;/li&gt;
&lt;li&gt;希望获取关于 PostgreSQL / Pigsty 生产环境最佳实践的指导。&lt;/li&gt;
&lt;li&gt;希望有专家帮助解读监控图表，分析定位性能瓶颈与故障根因，给出意见。&lt;/li&gt;
&lt;li&gt;希望根据现有资源与业务需求，规划满足安全/容灾/合规要求的数据库架构。&lt;/li&gt;
&lt;li&gt;需要将其他数据库迁移至 PostgreSQL 数据库，或对历史遗留实例迁移与改造。&lt;/li&gt;
&lt;li&gt;建设基于Prometheus / Grafana 技术栈的可观测性体系，数据大盘，可视化应用。&lt;/li&gt;
&lt;li&gt;希望支持国产信创操作系统/国产信创 ARM 芯片架构，提供中文/本地化界面支持。&lt;/li&gt;
&lt;li&gt;下云并寻求 RDS for PostgreSQL 的开源替代 —— 云中立，无供应商锁定的解决方案。&lt;/li&gt;
&lt;li&gt;希望获取关于 Redis / ETCD / MinIO，以及 TimescaleDB / Citus 等扩展的专业支持。&lt;/li&gt;
&lt;li&gt;希望将 Pigsty 作为 SaaS / PaaS / DBaaS 对外销售，或基于此发行版提供技术服务/云服务。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="订阅计划"&gt;订阅计划&lt;/h2&gt;
&lt;p&gt;除了 &lt;a href="#pigsty%E5%BC%80%E6%BA%90%E7%89%88"&gt;&lt;strong&gt;开源版&lt;/strong&gt;&lt;/a&gt; 之外，Pigsty 提供两种不同的订阅服务档位：&lt;a href="#pigsty%E4%B8%93%E4%B8%9A%E7%89%88"&gt;&lt;strong&gt;专业版&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="#pigsty%E4%BC%81%E4%B8%9A%E7%89%88"&gt;&lt;strong&gt;企业版&lt;/strong&gt;&lt;/a&gt;，您可以根据自身的实际情况与需求选购。&lt;/p&gt;</description></item><item><title>概念</title><link>https://pigsty.cc/docs/concept/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/</guid><description>&lt;p&gt;Pigsty 是一个可移植、可扩展的开源 PostgreSQL 发行版，用于在本地环境中构建生产级数据库服务，方便进行声明式配置和自动化。它拥有庞大的生态系统，提供了一整套工具、脚本和最佳实践，让 PostgreSQL 真正达到企业级 RDS 的服务水准。&lt;/p&gt;
&lt;p&gt;Pigsty 名字源自 &lt;strong&gt;P&lt;/strong&gt;ostgreSQL &lt;strong&gt;I&lt;/strong&gt;n &lt;strong&gt;G&lt;/strong&gt;reat &lt;strong&gt;STY&lt;/strong&gt;le，也可理解为 &lt;strong&gt;P&lt;/strong&gt;ostgres， &lt;strong&gt;I&lt;/strong&gt;nfras， &lt;strong&gt;G&lt;/strong&gt;raphics， &lt;strong&gt;S&lt;/strong&gt;ervice， &lt;strong&gt;T&lt;/strong&gt;oolbox， it&amp;rsquo;s all &lt;strong&gt;Y&lt;/strong&gt;ours —— 属于您的 PostgreSQL 图形化自建工具箱。您可以在 &lt;a href="https://github.com/Vonng/pigsty"&gt;&lt;strong&gt;GitHub&lt;/strong&gt;&lt;/a&gt; 上找到源代码，访问 &lt;a href="https://pigsty.io"&gt;&lt;strong&gt;官方文档&lt;/strong&gt;&lt;/a&gt; 了解更多信息，或在 &lt;a href="https://demo.pigsty.cc"&gt;&lt;strong&gt;在线演示&lt;/strong&gt;&lt;/a&gt; 中体验 &lt;a href="https://pigsty.cc/docs/setup/webui"&gt;&lt;strong&gt;Web 界面&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc"&gt;&lt;img src="https://pigsty.cc/img/pigsty/banner.png" alt="pigsty-banner"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="为什么需要-pigsty它能做什么"&gt;为什么需要 Pigsty，它能做什么？&lt;/h2&gt;
&lt;p&gt;PostgreSQL 是一个足够完美的数据库内核，但它需要更多工具与系统的配合才能成为一个足够好的数据库服务。在生产环境中，您需要管理数据库的方方面面：高可用、备份恢复、监控告警、访问控制、参数调优、扩展安装、连接池化、负载均衡……&lt;/p&gt;
&lt;p&gt;如果这些复杂的运维工作都能自动化处理，是不是会更容易一些？这正是 Pigsty 诞生的原因。&lt;/p&gt;
&lt;p&gt;Pigsty 为您提供：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;开箱即用的 PostgreSQL 发行版&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Pigsty 深度整合了 PostgreSQL 生态中的 &lt;a href="https://pgext.cloud/zh/list"&gt;&lt;strong&gt;444 扩展插件&lt;/strong&gt;&lt;/a&gt;，为您提供开箱即用的分布式、时序、地理、空间、图、向量、搜索等多模态数据库能力。从内核到 RDS 发行版，在 EL/Debian/Ubuntu 下提供 13-18 版本的生产级数据库服务。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;故障自愈的高可用架构&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;基于 Patroni、Etcd 和 HAProxy 打造的 &lt;a href="https://pigsty.cc/docs/concept/ha"&gt;&lt;strong&gt;高可用架构&lt;/strong&gt;&lt;/a&gt;，让硬件故障自动切换，流量无缝衔接。主库故障恢复时间 RTO &amp;lt; 45s，数据恢复点 RPO ≈ 0。您可以在无需应用配合的情况下滚动维护升级整个集群。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;完整的时间点恢复能力&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;基于 pgBackRest 与可选的 MinIO 集群，提供开箱即用的 &lt;a href="https://pigsty.cc/docs/concept/pitr"&gt;&lt;strong&gt;PITR 时间点恢复&lt;/strong&gt;&lt;/a&gt; 能力。让您拥有快速回到过去任意时间点的能力，为软件缺陷与人为删库兜底。&lt;/p&gt;</description></item><item><title>常见问题</title><link>https://pigsty.cc/docs/about/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/faq/</guid><description>&lt;hr&gt;
&lt;h3 id="pigsty-是什么不是什么"&gt;Pigsty 是什么，不是什么？&lt;/h3&gt;
&lt;p&gt;Pigsty 是一个 PostgreSQL 数据库发行版，本地优先的开源 RDS 云数据库解决方案。
Pigsty 不是数据库管理系统（DBMS），而是管理 DBMS 的工具，发行版，解决方案，与最佳实践。&lt;/p&gt;
&lt;p&gt;类比：数据库是车，那么 DBA 是司机，RDS 是出租车服务，Pigsty 则是自动驾驶软件。&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="pigsty-解决什么问题"&gt;Pigsty 解决什么问题？&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;用好数据库的能力&lt;/strong&gt; 极为稀缺：要么高薪聘请数据库专家自建（雇司机），或从云厂商以天价租赁 RDS（打车），但现在你有新的选项：Pigsty（自动驾驶）。
Pigsty 帮用户用好数据库：让用户在没有 DBA 的情况下，以不到 RDS 1 / 10 的成本，自建质量效率更优的本地云数据库服务！&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="pigsty-的目标用户是谁"&gt;Pigsty 的目标用户是谁？&lt;/h3&gt;
&lt;p&gt;Pigsty 有两类典型目标用户，基本盘是 &lt;strong&gt;中大型公司&lt;/strong&gt; 超大规模自建企业级/生产级 PostgreSQL RDS / DBaaS 服务。
Pigsty 通过极致的可定制性，可以实现最苛刻场景的数据库管理需求，并提供企业级的支持与服务保障。&lt;/p&gt;
&lt;p&gt;与此同时，Pigsty 也针对个人开发者，缺乏 DBA 中小企业以及开源社区提供 “开箱即用” 的 PG RDS 自建方案。&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="pigsty-为什么能帮您用好数据库"&gt;Pigsty 为什么能帮您用好数据库？&lt;/h3&gt;
&lt;p&gt;Pigsty 沉淀了顶尖专家在最复杂，最大规模的甲方 PostgreSQL 场景中打磨得到的经验与最佳实践，产品化为可复制的软件：
一次性解决扩展安装，高可用，链接池，监控，备份恢复，参数优化，IaC 批量管理，一键安装，自动化运维等诸多问题。提前规避诸多陷阱，避免重复踩坑。&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="pigsty-为何比-rds-好用"&gt;Pigsty 为何比 RDS 好用？&lt;/h3&gt;
&lt;p&gt;Pigsty 提供远超 RDS 的特性集与基础设施支持，包括 444 扩展插件与 8+ 内核支持。
Pigsty 提供 PG 生态中独一无二的专业级监控系统，与久经复杂场景打磨考验的架构最佳实践，简单易用。&lt;/p&gt;</description></item><item><title>积木式架构</title><link>https://pigsty.cc/docs/concept/arch/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/arch/</guid><description>&lt;p&gt;Pigsty 使用 &lt;strong&gt;模块化架构&lt;/strong&gt; 与 &lt;strong&gt;声明式接口&lt;/strong&gt;，您可以像 &lt;a href="https://pigsty.cc/docs/deploy/planning#%E5%B8%B8%E8%A7%81%E6%96%B9%E6%A1%88"&gt;&lt;strong&gt;搭积木一样自由按需组合模块&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pigsty 采用 &lt;a href="https://pigsty.cc/docs/deploy/planning"&gt;&lt;strong&gt;模块化设计&lt;/strong&gt;&lt;/a&gt;，可自由组合，按需使用（Use one or all），以适应不同场景的需求。&lt;/li&gt;
&lt;li&gt;Pigsty 使用 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/concept/iac/parameter"&gt;&lt;strong&gt;配置参数&lt;/strong&gt;&lt;/a&gt; 描述整套部署环境，并通过 &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;strong&gt;Ansible 剧本&lt;/strong&gt;&lt;/a&gt; 实现部署与调整。&lt;/li&gt;
&lt;li&gt;Pigsty 在可以在任意 &lt;a href="https://pigsty.cc/docs/concept/arch/node"&gt;&lt;strong&gt;节点&lt;/strong&gt;&lt;/a&gt; 上运行，无论是物理裸机还是虚拟机，只要运行 &lt;a href="https://pigsty.cc/docs/ref/linux"&gt;&lt;strong&gt;兼容的操作系统&lt;/strong&gt;&lt;/a&gt; 即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="模块"&gt;模块&lt;/h2&gt;
&lt;p&gt;Pigsty 采用模块化设计，有六个主要的默认模块：&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/redis"&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：由 Patroni、Pgbouncer、HAproxy、PgBackrest 等驱动的自治高可用 Postgres 集群。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：本地软件仓库、Nginx、Grafana、Victoria、AlertManager、Blackbox Exporter 可观测性全家桶。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：调整节点到所需状态、名称、时区、NTP、ssh、sudo、haproxy、docker、vector、keepalived&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：分布式键值存储，用作高可用 Postgres 集群的 DCS：共识选主/配置管理/服务发现。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/redis"&gt;&lt;strong&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：Redis 服务器，支持独立主从、哨兵、集群模式，并带有完整的监控支持。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;：与 S3 兼容的简单对象存储服务器，可作为 PG数据库备份的可选目的地。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你可以声明式地自由组合它们。如果你想要主机监控，在基础设施节点上安装 &lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt; 模块，并在纳管节点上安装 &lt;a href="https://pigsty.cc/docs/node"&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt; 模块就足够了。
&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt; 模块用于搭建高可用 PG 集群，将模块安装在多个节点上，可以自动形成一个高可用的数据库集群。
您可以复用 Pigsty 基础架构并开发您自己的模块，&lt;a href="https://pigsty.cc/docs/redis"&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/a&gt; 可以作为一个样例。后续还会有更多的模块加入，例如对 Mongo 与 MySQL 的初步支持已经提上了日程。&lt;/p&gt;
&lt;p&gt;请注意，所有模块都强依赖 &lt;code&gt;NODE&lt;/code&gt; 模块：在 Pigsty 中节点必须先安装 &lt;code&gt;NODE&lt;/code&gt; 模块，被 Pigsty 纳管后方可部署其他模块。
当节点（默认）使用本地软件源进行安装时，&lt;code&gt;NODE&lt;/code&gt; 模块对 &lt;code&gt;INFRA&lt;/code&gt; 模块有弱依赖。因此安装 &lt;code&gt;INFRA&lt;/code&gt; 模块的管理节点/基础设施节点会在 &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;code&gt;deploy.yml&lt;/code&gt;&lt;/a&gt; 剧本中完成 Bootstrap 过程，解决循环依赖。&lt;/p&gt;</description></item><item><title>集群模型图</title><link>https://pigsty.cc/docs/concept/model/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/model/</guid><description>&lt;p&gt;在 Pigsty 中最大的实体概念叫做 &lt;strong&gt;部署（Deployment）&lt;/strong&gt;，一套部署中的主要实体与关系（E-R 图）如下所示：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://pigsty.cc/img/pigsty/er-full.svg" alt=""&gt;&lt;/p&gt;
&lt;p&gt;一套部署也可以理解为一个 &lt;strong&gt;环境（Environment）&lt;/strong&gt;。例如，生产环境（Prod），用户测试环境（UTA），预发环境（Staging），测试环境（Testing），开发环境（Devbox），等等。
每个环境中，都对应着一份 Pigsty &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt;，描述了环境中的所有实体与属性。&lt;/p&gt;
&lt;p&gt;通常来说，一套环境中也会带有一套共用的基础设施（&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;），广义的基础设施还包括 &lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;（高可用 DCS）以及 &lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;（集中式备份仓库），
同时供环境中的多套 PostgreSQL 数据库集群（以及其他数据库模块组件）使用。（例外：也有 &lt;a href="https://pigsty.cc/docs/setup/slim"&gt;&lt;strong&gt;不带基础设施的部署&lt;/strong&gt;&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;在 Pigsty 中，几乎所有数据库模块都是以 &amp;ldquo;&lt;strong&gt;集群&lt;/strong&gt;&amp;quot;（Cluster）的方式组织起来的。每一个集群都是一个 Ansible 分组，包含有若干节点资源。
例如 PostgreSQL 高可用数据库集群，Redis，Etcd / MinIO 这些数据库都是以集群的形式存在。一套环境中可以包含多个集群。&lt;/p&gt;</description></item><item><title>成本对比</title><link>https://pigsty.cc/docs/about/compare/cost/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/about/compare/cost/</guid><description>&lt;hr&gt;
&lt;h2 id="总体概览"&gt;总体概览&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;EC2&lt;/th&gt;
 &lt;th style="text-align: center"&gt;核·月&lt;/th&gt;
 &lt;th style="text-align: center"&gt;RDS&lt;/th&gt;
 &lt;th style="text-align: center"&gt;核·月&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;DHH 自建核月价格（192C 384G）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;25.32&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;初级开源数据库DBA参考工资&lt;/td&gt;
 &lt;td style="text-align: center"&gt;15K/人·月&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;IDC自建机房（独占物理机: 64C384G）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;19.53&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;中级开源数据库DBA参考工资&lt;/td&gt;
 &lt;td style="text-align: center"&gt;30K/人·月&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;IDC自建机房（容器，超卖500%）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;7&lt;/td&gt;
 &lt;td style="text-align: center"&gt;高级开源数据库DBA参考工资&lt;/td&gt;
 &lt;td style="text-align: center"&gt;60K/人·月&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;UCloud 弹性虚拟机（8C16G，有超卖）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;25&lt;/td&gt;
 &lt;td style="text-align: center"&gt;ORACLE 数据库授权&lt;/td&gt;
 &lt;td style="text-align: center"&gt;10000&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;阿里云 弹性服务器 2x内存（独占无超卖）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;107&lt;/td&gt;
 &lt;td style="text-align: center"&gt;阿里云 RDS PG 2x内存（独占）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;260&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;阿里云 弹性服务器 4x内存（独占无超卖）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;138&lt;/td&gt;
 &lt;td style="text-align: center"&gt;阿里云 RDS PG 4x内存（独占）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;320&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;阿里云 弹性服务器 8x内存（独占无超卖）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;180&lt;/td&gt;
 &lt;td style="text-align: center"&gt;阿里云 RDS PG 8x内存（独占）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;410&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;AWS C5D.METAL 96C 200G (按月无预付)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;100&lt;/td&gt;
 &lt;td style="text-align: center"&gt;AWS RDS PostgreSQL db.T2 (2x)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;440&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;AWS C5D.METAL 96C 200G (预付三年)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;80&lt;/td&gt;
 &lt;td style="text-align: center"&gt;AWS RDS PostgreSQL db.M5 (4x)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;611&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;AWS C7A.METAL 192C 384G (预付三年)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;104.8&lt;/td&gt;
 &lt;td style="text-align: center"&gt;AWS RDS PostgreSQL db.R6G (8x)&lt;/td&gt;
 &lt;td style="text-align: center"&gt;786&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="rds成本参考"&gt;RDS成本参考&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;付费模式&lt;/th&gt;
 &lt;th&gt;价格&lt;/th&gt;
 &lt;th&gt;折合每年（万¥）&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;IDC自建（单物理机）&lt;/td&gt;
 &lt;td&gt;¥7.5w / 5年&lt;/td&gt;
 &lt;td&gt;1.5&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;IDC自建（2～3台组HA）&lt;/td&gt;
 &lt;td&gt;¥15w / 5年&lt;/td&gt;
 &lt;td&gt;3.0 ~ 4.5&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;阿里云 RDS 按需&lt;/td&gt;
 &lt;td&gt;¥87.36/时&lt;/td&gt;
 &lt;td&gt;76.5&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;阿里云 RDS 月付（基准）&lt;/td&gt;
 &lt;td&gt;¥4.2w / 月&lt;/td&gt;
 &lt;td&gt;50&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;阿里云 RDS 年付（85折）&lt;/td&gt;
 &lt;td&gt;¥425095 / 年&lt;/td&gt;
 &lt;td&gt;42.5&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;阿里云 RDS 3年付（5折）&lt;/td&gt;
 &lt;td&gt;¥750168 / 3年&lt;/td&gt;
 &lt;td&gt;25&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 按需&lt;/td&gt;
 &lt;td&gt;$25,817 / 月&lt;/td&gt;
 &lt;td&gt;217&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 1年不预付&lt;/td&gt;
 &lt;td&gt;$22,827 / 月&lt;/td&gt;
 &lt;td&gt;191.7&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 3年全预付&lt;/td&gt;
 &lt;td&gt;12w$ + 17.5k$/月&lt;/td&gt;
 &lt;td&gt;175&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 中国/宁夏按需&lt;/td&gt;
 &lt;td&gt;¥197,489 / 月&lt;/td&gt;
 &lt;td&gt;237&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 中国/宁夏1年不预付&lt;/td&gt;
 &lt;td&gt;¥143,176 / 月&lt;/td&gt;
 &lt;td&gt;171&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;AWS 中国/宁夏3年全预付&lt;/td&gt;
 &lt;td&gt;¥647k + 116k/月&lt;/td&gt;
 &lt;td&gt;160.6&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;我们可以对比一下自建与云数据库的成本差异：&lt;/p&gt;</description></item><item><title>声明式配置 —— 基础设施即代码（IaC）</title><link>https://pigsty.cc/docs/concept/iac/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/</guid><description>&lt;p&gt;Pigsty 遵循 IaC 与 GitOPS 的理念：使用声明式的 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; 描述整个环境，并通过 &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;strong&gt;幂等剧本&lt;/strong&gt;&lt;/a&gt; 来实现。&lt;/p&gt;
&lt;p&gt;用户用声明的方式通过 &lt;a href="https://pigsty.cc/docs/ref/param"&gt;&lt;strong&gt;参数&lt;/strong&gt;&lt;/a&gt; 来描述自己期望的状态，而剧本则以幂等的方式调整目标节点以达到这个状态。
这类似于 Kubernetes 的 CRD &amp;amp; Operator，然而 Pigsty 在裸机和虚拟机上，通过 Ansible 实现了这样的功能。&lt;/p&gt;
&lt;p&gt;Pigsty 诞生之初是为了解决超大规模 PostgreSQL 集群的运维管理问题，背后的想法很简单 —— 我们需要有在十分钟内在就绪的服务器上复刻整套基础设施（100+数据库集群 + PG/Redis + 可观测性）的能力。
任何 GUI + ClickOps 都无法在如此短的时间内完成如此复杂的任务，这让 CLI + IaC 成为唯一的选择 —— 它提供了精确，高效的控制能力。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; &lt;strong&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/strong&gt; 文件描述了整个部署的状态，无论是 生产环境（prod），预发环境（staging）， 测试环境（test），还是 开发环境（devbox），
基础设施的区别仅在于配置清单的不同，而部署交付的逻辑则是完全相同的。&lt;/p&gt;
&lt;p&gt;您可以使用 git 对这份部署的 “种子/基因” 进行版本控制与审计，而且，Pigsty 甚至支持将配置清单以数据库表的形式存储在 PostgreSQL &lt;a href="https://pigsty.cc/docs/concept/iac/cmdb"&gt;&lt;strong&gt;CMDB&lt;/strong&gt;&lt;/a&gt; 中，
更进一步从 Infra as Code 升级为 Infra as Data，无缝与您现有的工作流程集成与对接。&lt;/p&gt;
&lt;p&gt;IaC 面向专业用户与企业场景而设计，但也针对个人开发者，SMB 进行了深度优化。
即使您并非专业 DBA，也无需了解这几百个调节开关与旋钮，所有参数都带有表现良好的默认值，
您完全可以在 &lt;strong&gt;零配置&lt;/strong&gt; 的情况下，获得一个开箱即用的单机数据库节点；
简单地再添加两行 IP 地址，就能获得一套企业级的高可用的 PostgreSQL 集群。&lt;/p&gt;</description></item><item><title>PG 高可用</title><link>https://pigsty.cc/docs/concept/ha/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/ha/</guid><description>&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;Pigsty 的 PostgreSQL 集群带有开箱即用的高可用方案，由 &lt;a href="https://patroni.readthedocs.io/en/latest/"&gt;&lt;strong&gt;Patroni&lt;/strong&gt;&lt;/a&gt;、&lt;a href="https://etcd.io/"&gt;&lt;strong&gt;Etcd&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="http://www.haproxy.org/"&gt;&lt;strong&gt;HAProxy&lt;/strong&gt;&lt;/a&gt; 强力驱动。&lt;/p&gt;
&lt;p&gt;当您的 PostgreSQL 集群含有两个或更多实例时，您无需任何配置即拥有了硬件故障自愈的数据库高可用能力 —— 只要集群中有任意实例存活，集群就可以对外提供完整的服务，而客户端只要连接至集群中的任意节点，即可获得完整的服务，而无需关心主从拓扑变化。&lt;/p&gt;
&lt;p&gt;在默认配置下，主库故障恢复时间目标 RTO ≈ 45s，数据恢复点目标 RPO &amp;lt; 1MB；从库故障 RPO = 0，RTO ≈ 0 (闪断)；在一致性优先模式下，可确保故障切换数据零损失：
RPO = 0。以上指标均可通过参数，根据您的实际硬件条件与可靠性要求 &lt;a href="https://pigsty.cc/docs/concept/ha/rto"&gt;&lt;strong&gt;按需配置&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Pigsty 内置了 HAProxy 负载均衡器用于自动流量切换，提供 DNS/VIP/LVS 等多种接入方式供客户端选用。故障切换与主动切换对业务侧除零星闪断外几乎无感知，应用不需要修改连接串重启。
极小的维护窗口需求带来了极大的灵活便利：您完全可以在无需应用配合的情况下滚动维护升级整个集群。硬件故障可以等到第二天再抽空善后处置的特性，让研发，运维与 DBA 都能在故障时安心睡个好觉。&lt;/p&gt;
&lt;p&gt;&lt;del&gt;&lt;img src="https://pigsty.cc/img/pigsty/ha.png" alt="pigsty-ha"&gt;&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;许多大型组织与核心机构已经在生产环境中长时间使用 Pigsty ，最大的部署有 25K CPU 核心与 220+ PostgreSQL 超大规格实例（64c / 512g / 3TB NVMe SSD）；在这一部署案例中，五年内经历了数十次硬件故障与各类事故，但依然可以保持高于 &lt;strong&gt;99.999%&lt;/strong&gt; 的总体可用性战绩。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;高可用（High-Availability）解决什么问题？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;将数据安全C/IA中的可用性提高到一个新高度：RPO ≈ 0, RTO &amp;lt; 45s。&lt;/li&gt;
&lt;li&gt;获得无缝滚动维护的能力，最小化维护窗口需求，带来极大便利。&lt;/li&gt;
&lt;li&gt;硬件故障可以立即自愈，无需人工介入，运维DBA可以睡个好觉。&lt;/li&gt;
&lt;li&gt;从库可以用于承载只读请求，分担主库负载，让资源得以充分利用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;高可用有什么代价？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基础设施依赖：高可用需要依赖 DCS (etcd/zk/consul) 提供共识。&lt;/li&gt;
&lt;li&gt;起步门槛增加：一个有意义的高可用部署环境至少需要 &lt;strong&gt;三个节点&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;额外的资源消耗：一个新从库就要消耗一份额外资源，不算大问题。&lt;/li&gt;
&lt;li&gt;复杂度代价显著升高：备份成本显著加大，需要使用工具压制复杂度。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;高可用的局限性&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>RPO 利弊权衡</title><link>https://pigsty.cc/docs/concept/ha/rpo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/ha/rpo/</guid><description>&lt;p&gt;&lt;strong&gt;RPO&lt;/strong&gt;（Recovery Point Objective，恢复点目标）定义了在主库发生故障时，&lt;strong&gt;允许丢失的最大数据量&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;对于金融交易这类数据完整性至关重要的场景，通常要求 RPO = 0，即不允许任何数据丢失；&lt;/p&gt;
&lt;p&gt;然而更为严格的 RPO 指标是有代价的，它会引入更高的写入延迟，降低系统吞吐量，并且存在从库故障导致主库不可用的风险。
因此对于常规场景，通常可以接受一定量的数据丢失（例如允许丢失不超过 1MB 的数据），以换取更高的可用性与性能。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="利弊权衡"&gt;利弊权衡&lt;/h2&gt;
&lt;p&gt;通常在异步复制场景下，从库和主库之间会存在一定的复制延迟（取决于网络和吞吐量，正常在 10KB-100KB / 100µs-10ms 的数量级），
这意味着当主库发生故障时，从库可能还没有完全同步主库的最新数据。这时候如果出现故障切换，新的主库可能会丢失一些尚未复制的数据。&lt;/p&gt;
&lt;p&gt;潜在数据丢失量的上限由 &lt;a href="https://pigsty.cc/docs/pgsql/param#pg_rpo"&gt;&lt;strong&gt;&lt;code&gt;pg_rpo&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 参数控制，默认为 &lt;code&gt;1048576&lt;/code&gt; （&lt;code&gt;1MB&lt;/code&gt;），这意味着在故障转移期间最多可以容忍 1MiB 的数据丢失。&lt;/p&gt;
&lt;p&gt;当集群主库宕机时，如果有任何一个从库的复制延迟在这个值以内，Pigsty 将自动提升该从库为新的主库。
然而当所有从库副本的复制延迟都超出这个阈值时，Pigsty 将拒绝进行 [&lt;strong&gt;自动故障切换&lt;/strong&gt;] 以避免数据丢失。
此时需要人工介入进行决策 —— 等待主库恢复（可能永远也不会恢复），还是接受数据损失并强制提升一个从库为新的主库。&lt;/p&gt;
&lt;p&gt;您需要根据业务的需求偏好配置这个值，在 &lt;strong&gt;可用性&lt;/strong&gt; 和 &lt;strong&gt;一致性&lt;/strong&gt; 之间进行 &lt;strong&gt;利弊权衡&lt;/strong&gt;。
增大这个值可以提高自动故障切换的成功率，但也会增加潜在的数据丢失量上限。&lt;/p&gt;
&lt;p&gt;当您指定 &lt;a href="https://pigsty.cc/docs/pgsql/param#pg_rpo"&gt;&lt;strong&gt;&lt;code&gt;pg_rpo&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; = 0 时，Pigsty 将启用 &lt;strong&gt;同步复制&lt;/strong&gt;，确保主库在确认至少一个从库持久化数据后才返回写入成功。
这种配置能确保没有复制延迟，但会带来显著的写入延迟，并降低整体的吞吐量。&lt;/p&gt;
&lt;pre class="mermaid"&gt;flowchart LR
 A([主库故障]) --&amp;gt; B{同步复制?}

 B --&amp;gt;|否| C{延迟 &amp;lt; RPO?}
 B --&amp;gt;|是| D{同步从库&amp;lt;br/&amp;gt;可用?}

 C --&amp;gt;|是| E[有损自动故障切换&amp;lt;br/&amp;gt;RPO &amp;lt; 1MB]
 C --&amp;gt;|否| F[拒绝自动切换&amp;lt;br/&amp;gt;等待主库恢复&amp;lt;br/&amp;gt;或人工介入决策]

 D --&amp;gt;|是| G[无损自动故障切换&amp;lt;br/&amp;gt;RPO = 0]
 D --&amp;gt;|否| H{严格模式?}

 H --&amp;gt;|否| C
 H --&amp;gt;|是| F

 style A fill:#dc3545,stroke:#b02a37,color:#fff
 style E fill:#F0AD4E,stroke:#146c43,color:#fff
 style G fill:#198754,stroke:#146c43,color:#fff
 style F fill:#BE002F,stroke:#565e64,color:#fff&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id="保护模式"&gt;保护模式&lt;/h2&gt;
&lt;p&gt;Pigsty 提供三种保护模式，以帮助用户在不同的 RPO 要求下进行利弊权衡，类似于 &lt;a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/sbydb/oracle-data-guard-protection-modes.html"&gt;&lt;strong&gt;Oracle Data Guard&lt;/strong&gt;&lt;/a&gt; 的数据保护模式。&lt;/p&gt;</description></item><item><title>RTO 利弊权衡</title><link>https://pigsty.cc/docs/concept/ha/rto/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/ha/rto/</guid><description>&lt;p&gt;&lt;strong&gt;RTO&lt;/strong&gt;（Recovery Time Objective，恢复时间目标）定义了在主库发生故障时，&lt;strong&gt;系统恢复写入能力所需的最长时间&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;对于核心交易系统这类可用性至关重要的场景，通常要求 RTO 尽可能短，例如一分钟内。&lt;/p&gt;
&lt;p&gt;然而更短的 RTO 指标是有代价的，它会增加误切风险：网络抖动可能被误判为故障，导致不必要的故障切换。
因此对于跨机房/跨地域部署的场景，通常需要放宽 RTO 要求（例如 1-2 分钟），以降低误切风险。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="利弊权衡"&gt;利弊权衡&lt;/h2&gt;
&lt;p&gt;故障切换时的不可用时长上限由 &lt;a href="https://pigsty.cc/docs/pgsql/param#pg_rto"&gt;&lt;strong&gt;&lt;code&gt;pg_rto&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 参数控制。Pigsty 提供了四种预设的 RTO 模式：
&lt;code&gt;fast&lt;/code&gt;、&lt;code&gt;norm&lt;/code&gt;、&lt;code&gt;safe&lt;/code&gt;、&lt;code&gt;wide&lt;/code&gt;，分别针对不同的网络条件与部署场景进行了优化，默认使用 &lt;code&gt;norm&lt;/code&gt; 模式（约 45 秒）。
您也可以使用秒数直接指定 RTO 上限，系统会自动映射到最接近的模式。&lt;/p&gt;
&lt;p&gt;当主库发生故障时，整个恢复流程涉及多个阶段：Patroni 检测故障、DCS 锁过期、新主选举、执行 promote、HAProxy 感知新主。
减小 RTO 意味着缩短各阶段的超时时间，这会使集群对网络抖动更加敏感，从而增加误切风险。&lt;/p&gt;
&lt;p&gt;您需要根据实际网络条件选择合适的模式，在 &lt;strong&gt;恢复速度&lt;/strong&gt; 与 &lt;strong&gt;误切风险&lt;/strong&gt; 之间取得平衡。
网络质量越差，越应该选择保守的模式；网络质量越好，越可以选择激进的模式。&lt;/p&gt;
&lt;pre class="mermaid"&gt;flowchart LR
 A([主库故障]) --&amp;gt; B{Patroni&amp;lt;br/&amp;gt;检测到?}

 B --&amp;gt;|PG崩溃| C[尝试本地重启]
 B --&amp;gt;|节点宕机| D[等待 TTL 过期]

 C --&amp;gt;|成功| E([本地恢复])
 C --&amp;gt;|失败/超时| F[释放 Leader 锁]

 D --&amp;gt; F
 F --&amp;gt; G[从库竞选]
 G --&amp;gt; H[执行 Promote]
 H --&amp;gt; I[HAProxy 感知]
 I --&amp;gt; J([服务恢复])

 style A fill:#dc3545,stroke:#b02a37,color:#fff
 style E fill:#198754,stroke:#146c43,color:#fff
 style J fill:#198754,stroke:#146c43,color:#fff&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id="四种模式"&gt;四种模式&lt;/h2&gt;
&lt;p&gt;Pigsty 提供四种 RTO 模式，以帮助用户在不同的网络条件下进行利弊权衡。&lt;/p&gt;</description></item><item><title>配置清单</title><link>https://pigsty.cc/docs/concept/iac/inventory/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/inventory/</guid><description>&lt;p&gt;每一套 Pigsty 部署都对应着一份 &lt;strong&gt;配置清单&lt;/strong&gt; （Inventory），描述了基础设施与数据库集群的关键属性。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="配置文件"&gt;配置文件&lt;/h2&gt;
&lt;p&gt;Pigsty 默认使用 &lt;a href="https://docs.ansible.com/projects/ansible/latest/inventory_guide/intro_inventory.html"&gt;&lt;strong&gt;Ansible YAML 配置格式&lt;/strong&gt;&lt;/a&gt;，
使用一个单一 YAML 配置文件 &lt;a href="https://github.com/pgsty/pigsty/blob/main/pigsty.yml"&gt;&lt;strong&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 作为配置清单。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ^---- pigsty.yml &lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;---- 默认配置文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;您可以直接修改该配置文件来定制您的部署，或者使用 Pigsty 提供的 &lt;a href="https://pigsty.cc/docs/concept/iac/configure"&gt;&lt;strong&gt;配置向导&lt;/strong&gt;&lt;/a&gt; &lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt; 脚本自动生成合适的配置文件。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="配置结构"&gt;配置结构&lt;/h2&gt;
&lt;p&gt;配置清单使用标准的 &lt;a href="https://docs.ansible.com/projects/ansible/latest/inventory_guide/intro_inventory.html"&gt;&lt;strong&gt;Ansible YAML 配置格式&lt;/strong&gt;&lt;/a&gt;，由两部分组成：&lt;strong&gt;全局参数&lt;/strong&gt; （&lt;code&gt;all.vars&lt;/code&gt;）和多个 &lt;strong&gt;组&lt;/strong&gt;（&lt;code&gt;all.children&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;您可以在 &lt;code&gt;all.children&lt;/code&gt; 中定义新集群，并使用全局变量描述基础设施：&lt;code&gt;all.vars&lt;/code&gt;，它看起来像这样：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 顶级对象：all&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 全局参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;children&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;infra&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义：&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组成员：&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组参数：&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;etcd&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义：&amp;#39;etcd&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg-meta&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义：&amp;#39;pg-meta&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg-test&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...} &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义：&amp;#39;pg-test&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;redis-test&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#000"&gt;...}&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 组定义：&amp;#39;redis-test&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ...&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="集群定义"&gt;集群定义&lt;/h2&gt;
&lt;p&gt;每个 Ansible 组可能代表一个集群，可以是节点集群、PostgreSQL 集群、Redis 集群、Etcd 集群或 MinIO 集群等…&lt;/p&gt;</description></item><item><title>配置向导</title><link>https://pigsty.cc/docs/concept/iac/configure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/configure/</guid><description>&lt;p&gt;Pigsty 提供了一个 &lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt; 脚本作为 &lt;strong&gt;配置向导&lt;/strong&gt;，它能根据当前环境，自动生成合适的 &lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件。&lt;/p&gt;
&lt;p&gt;这是一个 &lt;strong&gt;可选&lt;/strong&gt; 的脚本：如果您已经了解了如何配置 Pigsty，大可以直接编辑 &lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件，跳过向导。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="快速开始"&gt;快速开始&lt;/h2&gt;
&lt;p&gt;进入 pigsty 源码家目录中，执行 &lt;code&gt;./configure&lt;/code&gt; 即可自动运行配置向导。不带任何参数时，默认使用 &lt;a href="https://pigsty.cc/docs/conf/meta"&gt;&lt;strong&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 单节点配置模板：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure &lt;span style="color:#8f5902;font-style:italic"&gt;# 交互式配置向导，自动检测环境并生成配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;该命令会以选定的模板为基础，检测当前节点的 IP 地址与区域，并生成适合当前环境的 &lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件。&lt;/p&gt;
&lt;div id="asciinema-faf4cf8e717f5b9f582b3cede024d31c" class="asciinema-container td-max-width-on-larger-screens" style="margin: 1em 0;"&gt;&lt;/div&gt;

&lt;script&gt;
(function() {
 var containerId = "asciinema-faf4cf8e717f5b9f582b3cede024d31c";
 var castURL = "\/demo\/configure.cast";
 var configuredTheme = "auto";
 var player = null;

 
 function detectTheme() {
 var htmlTheme = document.documentElement.getAttribute("data-bs-theme");
 if (htmlTheme === "dark") return "solarized-dark";
 if (htmlTheme === "light") return "solarized-light";
 
 if (window.matchMedia &amp;&amp; window.matchMedia("(prefers-color-scheme: dark)").matches) {
 return "solarized-dark";
 }
 return "solarized-light";
 }

 function getTheme() {
 if (configuredTheme === "auto") {
 return detectTheme();
 }
 return configuredTheme;
 }

 function createPlayer() {
 var container = document.getElementById(containerId);
 
 container.innerHTML = "";

 var opts = {
 theme: getTheme(),
 speed: "1.3",
 startAt: 0 ,
 fit: "width"
 };
 opts.autoPlay = true;
 opts.loop = true;
 opts.markers = [[ 3 , "默认配置"],[ 7 , "指定IP"],[ 14 , "随机密码"],[ 17 , "rich模板"],[ 20 , "app\/odoo模板"],[ 26 , "china区域"],[ 33 , "ha\/full模板"]];

 player = AsciinemaPlayer.create(castURL, container, opts);
 }

 
 createPlayer();

 
 if (configuredTheme === "auto") {
 
 var observer = new MutationObserver(function(mutations) {
 mutations.forEach(function(mutation) {
 if (mutation.attributeName === "data-bs-theme") {
 createPlayer();
 }
 });
 });
 observer.observe(document.documentElement, { attributes: true });

 
 if (window.matchMedia) {
 window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", function() {
 
 var htmlTheme = document.documentElement.getAttribute("data-bs-theme");
 if (!htmlTheme || htmlTheme === "auto") {
 createPlayer();
 }
 });
 }
 }
})();
&lt;/script&gt;

&lt;h2 id="功能说明"&gt;功能说明&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt; 脚本会根据环境与输入执行以下调整，并在当前目录下生成 &lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件。&lt;/p&gt;</description></item><item><title>配置参数</title><link>https://pigsty.cc/docs/concept/iac/parameter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/parameter/</guid><description>&lt;p&gt;在 &lt;strong&gt;配置清单&lt;/strong&gt; 中，您可以使用各种参数对 Pigsty 进行精细化定制。这些参数涵盖了从基础设施设置到数据库配置的各个方面。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="参数列表"&gt;参数列表&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了约 &lt;strong&gt;380+&lt;/strong&gt; 个配置参数，分布在 8 个默认模块中，用于精细控制系统的各个方面，完整列表见 &lt;a href="https://pigsty.cc/docs/ref/param"&gt;&lt;strong&gt;参考-参数列表&lt;/strong&gt;&lt;/a&gt; 。&lt;/p&gt;
&lt;table class="stretch-last"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;模块&lt;/th&gt;
 &lt;th style="text-align: center"&gt;参数组&lt;/th&gt;
 &lt;th style="text-align: center"&gt;参数数&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param"&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;9&lt;/td&gt;
 &lt;td style="text-align: center"&gt;123&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 数据库集群的核心配置&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/param"&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;10&lt;/td&gt;
 &lt;td style="text-align: center"&gt;82&lt;/td&gt;
 &lt;td style="text-align: left"&gt;基础设施组件：软件源、Nginx、DNS、监控、Grafana 等&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/node/param"&gt;&lt;strong&gt;NODE&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;11&lt;/td&gt;
 &lt;td style="text-align: center"&gt;83&lt;/td&gt;
 &lt;td style="text-align: left"&gt;主机节点调优：身份、DNS、包、调优、安全、管理员、时间、VIP等&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/etcd/param"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;2&lt;/td&gt;
 &lt;td style="text-align: center"&gt;13&lt;/td&gt;
 &lt;td style="text-align: left"&gt;分布式配置存储与服务发现&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/redis/param"&gt;&lt;strong&gt;REDIS&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;21&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Redis 缓存与数据结构服务器&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/minio/param"&gt;&lt;strong&gt;MINIO&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;2&lt;/td&gt;
 &lt;td style="text-align: center"&gt;21&lt;/td&gt;
 &lt;td style="text-align: left"&gt;S3 兼容对象存储服务&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/ferret/param"&gt;&lt;strong&gt;FERRET&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;9&lt;/td&gt;
 &lt;td style="text-align: left"&gt;MongoDB 兼容数据库 FerretDB&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/docker/param"&gt;&lt;strong&gt;DOCKER&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;8&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Docker 容器引擎&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="参数形式"&gt;参数形式&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt; 是用于描述实体的 &lt;strong&gt;键值对&lt;/strong&gt;。&lt;strong&gt;键&lt;/strong&gt;（Key）是字符串，&lt;strong&gt;值&lt;/strong&gt;（Value）可以是五种类型之一：布尔值、字符串、数字、数组或对象。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- 顶级对象：all&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;admin_ip&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- 全局配置参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;children&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg-meta&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- pg-meta 分组&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;pg-meta &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- 集群级别参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- 主机节点 IP&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_seq&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;1&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_role&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;primary &lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# &amp;lt;------- 实例级别参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="参数优先级"&gt;参数优先级&lt;/h2&gt;
&lt;p&gt;参数可以在不同级别设置，具有以下优先级：&lt;/p&gt;</description></item><item><title>配置模板</title><link>https://pigsty.cc/docs/concept/iac/template/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/template/</guid><description>&lt;p&gt;在 Pigsty 中，部署的蓝图细节由 &lt;a href="https://pigsty.cc/docs/setup/config/"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; 所定义，也就是 &lt;a href="https://github.com/pgsty/pigsty/blob/main/pigsty.yml"&gt;&lt;strong&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 配置文件，您可以通过声明式配置进行定制。&lt;/p&gt;
&lt;p&gt;然而，直接编写配置文件可能会让新用户望而生畏。为此，我们提供了一些开箱即用的配置模板，涵盖了常见的使用场景。&lt;/p&gt;
&lt;p&gt;每一个模板都是一个预定义的 &lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件，包含了适用于特定场景的合理默认值。&lt;/p&gt;
&lt;p&gt;您可以根据自己的需要，选择一个模板作为定制起点，然后根据需要进行修改，以满足您的具体需求。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="使用模板"&gt;使用模板&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了 &lt;a href="https://github.com/pgsty/pigsty/blob/main/configure"&gt;&lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 脚本作为可选的配置向导，它将根据您的环境和输入，生成具有良好默认值的 &lt;a href="https://pigsty.cc/docs/setup/config/"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;./configure -c &amp;lt;conf&amp;gt;&lt;/code&gt; 指定配置模板，其中 &lt;code&gt;&amp;lt;conf&amp;gt;&lt;/code&gt; 是相对于 &lt;code&gt;conf&lt;/code&gt; 目录的路径（可省略 &lt;code&gt;.yml&lt;/code&gt; 后缀）。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure &lt;span style="color:#8f5902;font-style:italic"&gt;# 默认使用 meta.yml 配置模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c meta &lt;span style="color:#8f5902;font-style:italic"&gt;# 显式指定使用 meta.yml 单节点模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c rich &lt;span style="color:#8f5902;font-style:italic"&gt;# 使用包含全部扩展与 MinIO 的富功能模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c slim &lt;span style="color:#8f5902;font-style:italic"&gt;# 使用最小化的单节点模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 使用不同的数据库内核&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c pgsql &lt;span style="color:#8f5902;font-style:italic"&gt;# 原生 PostgreSQL 内核，基础功能 (13~18)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c citus &lt;span style="color:#8f5902;font-style:italic"&gt;# Citus 分布式高可用 PostgreSQL (14~17)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c mssql &lt;span style="color:#8f5902;font-style:italic"&gt;# Babelfish 内核，兼容 SQL Server 协议 (15)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c polar &lt;span style="color:#8f5902;font-style:italic"&gt;# PolarDB PG 内核，Aurora/RAC 风格 (15)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c ivory &lt;span style="color:#8f5902;font-style:italic"&gt;# IvorySQL 内核，兼容 Oracle 语法 (18)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c mysql &lt;span style="color:#8f5902;font-style:italic"&gt;# OpenHalo 内核，兼容 MySQL (14)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c pgtde &lt;span style="color:#8f5902;font-style:italic"&gt;# Percona PostgreSQL Server 透明加密 (18)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c oriole &lt;span style="color:#8f5902;font-style:italic"&gt;# OrioleDB 内核，OLTP 增强 (17)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c supabase &lt;span style="color:#8f5902;font-style:italic"&gt;# Supabase 自托管配置 (15~18)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 使用多节点高可用模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c ha/dual &lt;span style="color:#8f5902;font-style:italic"&gt;# 使用 2 节点高可用模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c ha/trio &lt;span style="color:#8f5902;font-style:italic"&gt;# 使用 3 节点高可用模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -c ha/full &lt;span style="color:#8f5902;font-style:italic"&gt;# 使用 4 节点高可用模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果不指定模板，Pigsty 默认使用 &lt;code&gt;meta.yml&lt;/code&gt; 单节点配置模板。&lt;/p&gt;</description></item><item><title>元数据库</title><link>https://pigsty.cc/docs/concept/iac/cmdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/iac/cmdb/</guid><description>&lt;p&gt;Pigsty 允许您使用 PostgreSQL &lt;strong&gt;元数据库&lt;/strong&gt; 作为动态配置源，取代静态的 YAML 配置文件，实现更强大的配置管理能力。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;CMDB&lt;/strong&gt;（Configuration Management Database，配置管理数据库）是一种将配置信息存储在数据库中进行管理的方式。&lt;/p&gt;
&lt;p&gt;在 Pigsty 中，默认的配置源是一个静态 YAML 文件 &lt;code&gt;pigsty.yml&lt;/code&gt;，
它作为 Ansible 的 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory/"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; 使用。&lt;/p&gt;
&lt;p&gt;这种方式简单直接，但当基础设施规模扩大、需要复杂精细的管理与外部集成时，单一的静态文件难以满足需求。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;特性&lt;/th&gt;
 &lt;th style="text-align: left"&gt;静态 YAML 文件&lt;/th&gt;
 &lt;th style="text-align: left"&gt;CMDB 元数据库&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;查询能力&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;手工搜索/grep&lt;/td&gt;
 &lt;td style="text-align: left"&gt;SQL 任意条件查询，聚合分析&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;版本控制&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;依赖 Git 或手工备份&lt;/td&gt;
 &lt;td style="text-align: left"&gt;数据库事务，审计日志，时间旅行快照&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;权限控制&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;文件系统权限，粗粒度&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 数据库精细访问控制&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;并发编辑&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;需要锁文件或合并冲突&lt;/td&gt;
 &lt;td style="text-align: left"&gt;数据库事务天然支持并发&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;外部集成&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;需要解析 YAML&lt;/td&gt;
 &lt;td style="text-align: left"&gt;标准 SQL 接口，任意语言轻松对接&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;规模扩展&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;文件过大时难以维护&lt;/td&gt;
 &lt;td style="text-align: left"&gt;管理规模伸缩至物理极限&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;动态生成&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;静态文件，修改后需手动应用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;即时生效，实时反映配置变更&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Pigsty 在样板数据库 &lt;a href="https://github.com/pgsty/pigsty/blob/main/conf/meta.yml#L52"&gt;&lt;strong&gt;&lt;code&gt;pg-meta.meta&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 的模式基线定义中，提供了 Pigsty CMDB 的数据库模式。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="工作原理"&gt;工作原理&lt;/h2&gt;
&lt;p&gt;CMDB 的核心思想是用一个 &lt;strong&gt;动态脚本&lt;/strong&gt; 替换静态配置文件。
Ansible 支持使用可执行脚本作为配置清单，只要脚本输出符合 JSON 格式的清单数据即可。
当您启用 CMDB 后，Pigsty 会创建一个名为 &lt;code&gt;inventory.sh&lt;/code&gt; 的动态清单脚本：&lt;/p&gt;</description></item><item><title>安全合规</title><link>https://pigsty.cc/docs/concept/sec/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/</guid><description>&lt;p&gt;Pigsty 的安全目标是 &lt;strong&gt;CIA 三元组&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;机密性&lt;/strong&gt;：防止未授权访问与泄露&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;完整性&lt;/strong&gt;：防止数据被篡改或静默损坏&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可用性&lt;/strong&gt;：防止故障导致业务中断&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty 的安全理念：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;默认安全&lt;/strong&gt;：开箱即用的安全基线，配置少、覆盖广。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;纵深防御&lt;/strong&gt;：多层保护叠加，单点失守不致系统失守。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最小权限&lt;/strong&gt;：角色与权限模型贯彻最小授权原则。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;可合规&lt;/strong&gt;：安全能力与流程结合即可通过合规检查。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="默认安全基线解决什么问题"&gt;默认安全基线（解决什么问题）&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;安全选项&lt;/th&gt;
 &lt;th style="text-align: left"&gt;默认值&lt;/th&gt;
 &lt;th style="text-align: left"&gt;解决的问题&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;密码加密&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;pg_pwd_enc: scram-sha-256&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;防止弱哈希与明文泄露&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;数据校验&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;pg_checksum: true&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;检测静默数据损坏&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;HBA 分层&lt;/td&gt;
 &lt;td style="text-align: left"&gt;管理员外网必须 &lt;code&gt;ssl&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;防止外网明文访问&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;本地 CA&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;ca_create: true&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;统一证书信任链&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;备份恢复&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;pgbackrest_enabled: true&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;防止误删误改不可恢复&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Nginx HTTPS&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;nginx_sslmode: enable&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;防止 Web 入口明文泄露&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;MinIO HTTPS&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;minio_https: true&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;防止备份链路窃听&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;OS 基线&lt;/td&gt;
 &lt;td style="text-align: left"&gt;SELinux &lt;code&gt;permissive&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;为强制模式预留基础&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;默认配置以“可用、可扩展”为先，生产环境应根据合规要求加固。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id="加固路线图"&gt;加固路线图&lt;/h2&gt;
&lt;p&gt;Pigsty 提供安全增强模板 &lt;code&gt;conf/ha/safe.yml&lt;/code&gt;，可快速将默认基线升级到更高安全级别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;强制 SSL 与证书认证&lt;/li&gt;
&lt;li&gt;密码强度与过期策略&lt;/li&gt;
&lt;li&gt;连接与断开日志&lt;/li&gt;
&lt;li&gt;防火墙与 SELinux 加固&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="本章内容"&gt;本章内容&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;章节&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;th style="text-align: left"&gt;核心问题&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/level"&gt;&lt;strong&gt;纵深防御&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;七层安全模型与基线&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安全体系整体如何落地？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/auth"&gt;&lt;strong&gt;身份认证&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;HBA 规则、密码策略、证书认证&lt;/td&gt;
 &lt;td style="text-align: left"&gt;如何验证用户身份？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/ac"&gt;&lt;strong&gt;访问控制&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;角色系统、权限模型、数据库隔离&lt;/td&gt;
 &lt;td style="text-align: left"&gt;如何控制用户权限？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;加密通信&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;TLS、本地 CA、证书管理&lt;/td&gt;
 &lt;td style="text-align: left"&gt;如何保护传输与证书？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/data"&gt;&lt;strong&gt;数据安全&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;校验和、备份、加密与恢复&lt;/td&gt;
 &lt;td style="text-align: left"&gt;数据如何完整可恢复？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/compliance"&gt;&lt;strong&gt;合规清单&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;等保三级与 SOC2 对照&lt;/td&gt;
 &lt;td style="text-align: left"&gt;如何满足合规要求？&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="相关话题"&gt;相关话题&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;♾️ &lt;a href="https://pigsty.cc/docs/concept/ha/"&gt;&lt;strong&gt;高可用&lt;/strong&gt;&lt;/a&gt;：业务连续性保障&lt;/li&gt;
&lt;li&gt;⏰ &lt;a href="https://pigsty.cc/docs/concept/pitr/"&gt;&lt;strong&gt;备份恢复&lt;/strong&gt;&lt;/a&gt;：PITR 与灾难恢复&lt;/li&gt;
&lt;li&gt;📊 &lt;a href="https://pigsty.cc/docs/concept/monitor/"&gt;&lt;strong&gt;可观测性&lt;/strong&gt;&lt;/a&gt;：安全事件监控&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>七层安全模型</title><link>https://pigsty.cc/docs/concept/sec/level/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/level/</guid><description>&lt;p&gt;安全不是一道墙，而是一座城。Pigsty 采用&lt;strong&gt;纵深防御&lt;/strong&gt;策略，在七个层次上构建多重保护，即使某一层被突破，仍有其他层提供保护。&lt;/p&gt;
&lt;p&gt;这种分层思路解决三类核心风险：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;边界被突破&lt;/strong&gt;：降低“单点失守导致全盘失守”的概率。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;内部滥用&lt;/strong&gt;：即使内部账号被盗，也能通过最小权限限制破坏范围。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;不可预期故障&lt;/strong&gt;：硬件、软件、人为错误都能被“多层兜底”。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;div id="infographic-296a28376e55bf0bd7d2bce937b065d7" class="infographic-container td-max-width-on-larger-screens"&gt;&lt;/div&gt;

&lt;script&gt;
(function() {
 var containerId = 'infographic-296a28376e55bf0bd7d2bce937b065d7';
 var syntax = "````\ninfographic sequence-pyramid-simple\ndata\n title 七层安全模型\n desc Pigsty 纵深防御体系：从物理到用户的多层保护\n items\n - label 物理与介质\n value 100\n desc 数据校验和 · 介质盗取防护\n time L1\n icon mingcute/building-4-fill\n illus server-cluster\n - label 网络安全\n value 95\n desc 防火墙 · 监听收敛 · TLS\n time L2\n icon mingcute/earth-2-fill\n illus secure-server\n - label 边界安全\n value 90\n desc HAProxy · Nginx · 统一入口\n time L3\n icon mingcute/shield-fill\n illus firewall-protection\n - label 主机安全\n value 85\n desc SELinux · 最小权限 · 系统加固\n time L4\n icon mingcute/computer-fill\n illus server-status\n - label 应用安全\n value 80\n desc HBA · SCRAM · 密码策略\n time L5\n icon mingcute/safe-box-fill\n illus database-security\n - label 数据安全\n value 75\n desc 备份加密 · PITR · 审计\n time L6\n icon mingcute/lock-fill\n illus data-encryption\n - label 用户安全\n value 70\n desc RBAC · 默认权限 · 隔离\n time L7\n icon mingcute/user-security-fill\n illus user-flow\ntheme light\n palette pigsty\n````";

 function renderInfographic() {
 var dom = document.getElementById(containerId);
 if (!dom) { console.error('Infographic: container not found:', containerId); return; }
 try {
 var ig = new AntVInfographic.Infographic({
 container: '#' + containerId,
 width: dom.offsetWidth || '100%',
 height: 'auto',
 });
 ig.render(syntax);
 } catch (e) {
 console.error('Infographic render error:', e);
 dom.innerHTML = '&lt;pre style="color: red;"&gt;Infographic Error: ' + e.message + '&lt;/pre&gt;';
 }
 }

 
 if (typeof AntVInfographic !== 'undefined') {
 renderInfographic();
 } else if (!window._infographicLoading) {
 window._infographicLoading = true;
 window._infographicCallbacks = [renderInfographic];
 var script = document.createElement('script');
 script.src = '/js/infographic.min.js';
 script.onload = function() {
 window._infographicCallbacks.forEach(function(cb) { cb(); });
 };
 document.head.appendChild(script);
 } else {
 window._infographicCallbacks.push(renderInfographic);
 }
})();
&lt;/script&gt;

&lt;hr&gt;
&lt;h2 id="l1-物理与介质安全"&gt;L1 物理与介质安全&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;物理层失守时，唯一的对抗手段是数据本身的自我保护。&lt;/p&gt;</description></item><item><title>身份认证</title><link>https://pigsty.cc/docs/concept/sec/auth/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/auth/</guid><description>&lt;p&gt;身份认证解决三个核心问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;你是谁&lt;/strong&gt;：身份是否唯一可识别？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;你怎么证明&lt;/strong&gt;：密码/证书是否足够安全？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;你从哪里来&lt;/strong&gt;：来源是否受控？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty 使用 &lt;strong&gt;HBA 规则 + 密码/证书&lt;/strong&gt; 完成身份认证，并以 SCRAM 为默认密码哈希方案。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="认证链路"&gt;认证链路&lt;/h2&gt;
&lt;pre class="mermaid"&gt;flowchart LR
 C[客户端] --&amp;gt; HBA[HBA 规则]
 HBA --&amp;gt; A1[密码 SCRAM]
 HBA --&amp;gt; A2[证书认证]
 HBA --&amp;gt; A3[本地 ident/peer]
 A1 --&amp;gt; RBAC[角色与权限]
 A2 --&amp;gt; RBAC
 A3 --&amp;gt; RBAC&lt;/pre&gt;
&lt;p&gt;HBA 决定“&lt;strong&gt;谁能从哪里来&lt;/strong&gt;”，认证方式决定“&lt;strong&gt;如何证明身份&lt;/strong&gt;”。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="hba-分层模型"&gt;HBA 分层模型&lt;/h2&gt;
&lt;p&gt;Pigsty 默认 HBA 规则已经分层：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;本地&lt;/strong&gt;使用 &lt;code&gt;ident/peer&lt;/code&gt;，最安全。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;内网&lt;/strong&gt;使用 &lt;code&gt;scram&lt;/code&gt; 密码认证。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;外网管理员&lt;/strong&gt;必须走 &lt;code&gt;ssl&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这解决了“&lt;strong&gt;同一个用户在不同来源使用不同认证强度&lt;/strong&gt;”的问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HBA 规则的关键能力&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;顺序优先&lt;/strong&gt;：支持 &lt;code&gt;order&lt;/code&gt; 排序，数值越小优先级越高。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地址别名&lt;/strong&gt;：&lt;code&gt;local&lt;/code&gt; / &lt;code&gt;localhost&lt;/code&gt; / &lt;code&gt;intra&lt;/code&gt; / &lt;code&gt;world&lt;/code&gt; 等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;角色条件&lt;/strong&gt;：&lt;code&gt;primary/replica/offline&lt;/code&gt; 可精细化控制。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="密码认证"&gt;密码认证&lt;/h2&gt;
&lt;p&gt;默认密码哈希算法：&lt;/p&gt;</description></item><item><title>访问控制</title><link>https://pigsty.cc/docs/concept/sec/ac/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/ac/</guid><description>&lt;p&gt;访问控制解决两个核心问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;你能做什么&lt;/strong&gt;：读/写/DDL 的权限边界&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;你能访问哪些数据&lt;/strong&gt;：跨库、跨模式的隔离边界&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty 通过 &lt;strong&gt;RBAC 角色体系 + 默认权限策略&lt;/strong&gt; 将“最小权限”落实为默认行为。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="四层角色模型"&gt;四层角色模型&lt;/h2&gt;
&lt;pre class="mermaid"&gt;flowchart TB
 subgraph Admin[&amp;#34;dbrole_admin（管理员）&amp;#34;]
 A1[&amp;#34;可执行 DDL / CREATE / ALTER&amp;#34;]
 A2[&amp;#34;继承 dbrole_readwrite&amp;#34;]
 end
 subgraph RW[&amp;#34;dbrole_readwrite（读写）&amp;#34;]
 RW1[&amp;#34;可 INSERT/UPDATE/DELETE&amp;#34;]
 RW2[&amp;#34;继承 dbrole_readonly&amp;#34;]
 end
 subgraph RO[&amp;#34;dbrole_readonly（只读）&amp;#34;]
 RO1[&amp;#34;可 SELECT 所有表&amp;#34;]
 end
 subgraph Offline[&amp;#34;dbrole_offline（离线）&amp;#34;]
 OFF1[&amp;#34;仅离线实例可用&amp;#34;]
 end

 Admin --&amp;gt; RW --&amp;gt; RO&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;生产账号天然拥有过高权限&lt;/li&gt;
&lt;li&gt;DDL 与 DML 不分离导致误操作风险&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="默认角色与系统用户"&gt;默认角色与系统用户&lt;/h2&gt;
&lt;p&gt;Pigsty 默认提供四个角色与四个系统用户（来自源码默认值）：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;角色/用户&lt;/th&gt;
 &lt;th&gt;属性&lt;/th&gt;
 &lt;th&gt;继承/角色&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;全局只读访问&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_offline&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;受限只读（离线实例）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readwrite&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;全局读写访问&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readwrite&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;管理员 / 对象创建&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;系统超级用户&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;replicator&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;REPLICATION&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;复制用户&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_dba&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbrole_admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;管理员用户&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_monitor&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;监控用户&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;这套默认角色可以覆盖绝大多数业务场景。&lt;/p&gt;</description></item><item><title>数据安全</title><link>https://pigsty.cc/docs/concept/sec/data/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/data/</guid><description>&lt;p&gt;数据安全关注三件事：&lt;strong&gt;完整性、可恢复性、保密性&lt;/strong&gt;。Pigsty 在默认配置中已启用关键能力，并支持按需加固。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="数据完整性"&gt;数据完整性&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;磁盘坏块、内存错误导致的静默损坏&lt;/li&gt;
&lt;li&gt;意外写入导致的数据污染&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty 支持&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数据校验和&lt;/strong&gt;：默认 &lt;code&gt;pg_checksum: true&lt;/code&gt;，初始化时启用 &lt;code&gt;data-checksums&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;副本兜底&lt;/strong&gt;：主库坏块可从从库恢复（与 HA 配合使用）。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="可恢复性备份与-pitr"&gt;可恢复性（备份与 PITR）&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;误删误改&lt;/li&gt;
&lt;li&gt;灾难性故障导致数据丢失&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty 支持&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;pgBackRest 默认启用&lt;/strong&gt;：&lt;code&gt;pgbackrest_enabled: true&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;本地仓库&lt;/strong&gt;：默认保留 2 份完整备份。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;远程仓库&lt;/strong&gt;：可接入 MinIO，支持对象存储与多副本。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PITR&lt;/strong&gt;：结合 WAL 归档进行任意时间点恢复。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="数据保密性"&gt;数据保密性&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;备份被窃导致数据外泄&lt;/li&gt;
&lt;li&gt;介质被盗导致明文数据泄露&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty 支持&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;备份加密&lt;/strong&gt;：MinIO 仓库支持 AES-256-CBC（&lt;code&gt;cipher_type&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;透明加密（可选）&lt;/strong&gt;：通过 &lt;code&gt;pg_tde&lt;/code&gt; 等扩展实现数据静态加密。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;密钥隔离&lt;/strong&gt;：建议将 &lt;code&gt;cipher_pass&lt;/code&gt; 与 CA 私钥分离管理。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="审计与可追溯"&gt;审计与可追溯&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;解决的问题&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;无法追责与还原操作&lt;/li&gt;
&lt;li&gt;合规审计缺少证据&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty 支持&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;日志收集&lt;/strong&gt;：模板默认启用 &lt;code&gt;logging_collector&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DDL 审计&lt;/strong&gt;：&lt;code&gt;log_statement: ddl&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;慢查询&lt;/strong&gt;：&lt;code&gt;log_min_duration_statement&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;连接日志&lt;/strong&gt;：&lt;code&gt;log_connections&lt;/code&gt;（PG18+）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;审计扩展&lt;/strong&gt;：&lt;code&gt;pgaudit&lt;/code&gt;、&lt;code&gt;pgauditlogtofile&lt;/code&gt; 可选。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="加固建议"&gt;加固建议&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;对远程备份强制加密与专用密钥。&lt;/li&gt;
&lt;li&gt;定期演练 PITR，验证恢复链路。&lt;/li&gt;
&lt;li&gt;对关键业务启用 &lt;code&gt;pgaudit&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;结合 &lt;a href="https://pigsty.cc/docs/concept/ha/"&gt;高可用&lt;/a&gt; 形成“备份 + 副本”双层兜底。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="接下来"&gt;接下来&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;🔐 &lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;加密通信&lt;/strong&gt;&lt;/a&gt;：证书管理与 TLS&lt;/li&gt;
&lt;li&gt;✅ &lt;a href="https://pigsty.cc/docs/concept/sec/compliance"&gt;&lt;strong&gt;合规清单&lt;/strong&gt;&lt;/a&gt;：审计与合规要求&lt;/li&gt;
&lt;li&gt;⏰ &lt;a href="https://pigsty.cc/docs/concept/pitr/"&gt;&lt;strong&gt;备份恢复&lt;/strong&gt;&lt;/a&gt;：PITR 机制与实践&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>合规清单</title><link>https://pigsty.cc/docs/concept/sec/compliance/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/compliance/</guid><description>&lt;p&gt;合规不是“开关”，而是 &lt;strong&gt;配置 + 流程 + 证据&lt;/strong&gt; 的组合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;配置&lt;/strong&gt;：安全能力是否启用（HBA/TLS/审计/备份）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;流程&lt;/strong&gt;：是否有权限管理、变更、备份演练等制度&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;证据&lt;/strong&gt;：日志、配置快照、备份报告、监控告警&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本页以 SOC2 与等保三级为切入点，说明 Pigsty 的安全能力与合规映射。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="默认凭证清单必须修改"&gt;默认凭证清单（必须修改）&lt;/h2&gt;
&lt;p&gt;来自源码默认值：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;组件&lt;/th&gt;
 &lt;th&gt;默认用户名&lt;/th&gt;
 &lt;th&gt;默认密码&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL 管理员&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbuser_dba&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL 监控&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbuser_monitor&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Monitor&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL 复制&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;replicator&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Replicator&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Patroni API&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Patroni.API&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;HAProxy 管理&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Grafana 管理&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;MinIO Root&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;minioadmin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;S3User.MinIO&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;etcd Root&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;root&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Etcd.Root&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;生产环境必须修改。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="证据准备建议"&gt;证据准备（建议）&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;证据类型&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;th&gt;Pigsty 支持&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;配置快照&lt;/td&gt;
 &lt;td&gt;HBA、角色、TLS、备份策略&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty.yml&lt;/code&gt; / inventory 配置&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;访问控制&lt;/td&gt;
 &lt;td&gt;角色与权限&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_default_roles&lt;/code&gt; / &lt;code&gt;pg_default_privileges&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;连接审计&lt;/td&gt;
 &lt;td&gt;连接、断开、DDL&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;log_connections&lt;/code&gt; / &lt;code&gt;log_statement&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;备份报告&lt;/td&gt;
 &lt;td&gt;完整备份与恢复记录&lt;/td&gt;
 &lt;td&gt;pgBackRest 日志与任务&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;监控告警&lt;/td&gt;
 &lt;td&gt;异常事件记录&lt;/td&gt;
 &lt;td&gt;Prometheus + Grafana&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;证书管理&lt;/td&gt;
 &lt;td&gt;CA/证书分发记录&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;files/pki/&lt;/code&gt; / &lt;code&gt;/etc/pki/ca.crt&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="soc2-视角示例映射"&gt;SOC2 视角（示例映射）&lt;/h2&gt;
&lt;p&gt;SOC2 的核心是 &lt;strong&gt;安全、可用性、机密性&lt;/strong&gt;。以下为常见控制点的概念映射：&lt;/p&gt;</description></item><item><title>上手</title><link>https://pigsty.cc/docs/setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/</guid><description>&lt;p&gt;Pigsty 采用可伸缩的架构设计，既可用于 &lt;a href="https://pigsty.cc/docs/deploy"&gt;&lt;strong&gt;超大规模生产环境&lt;/strong&gt;&lt;/a&gt;，也可用于 &lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机开发演示环境&lt;/strong&gt;&lt;/a&gt;，本文关注后者。&lt;/p&gt;
&lt;p&gt;如果您打算学习了解 Pigsty，可以从 &lt;a href="https://pigsty.cc/docs/setup/install/"&gt;&lt;strong&gt;快速上手&lt;/strong&gt;&lt;/a&gt; 单机部署开始。一台 1C/2G 的 Linux 虚拟机即可运行 Pigsty。&lt;/p&gt;
&lt;p&gt;您可以利用一台 Linux MiniPC，云厂商提供的免费/优惠虚拟机，Windows 的 WSL，或者在自己的笔记本上创建虚拟机用于 Pigsty 部署。
Pigsty 提供了开箱即用的 &lt;a href="https://pigsty.cc/docs/deploy/vagrant/"&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; 模板与 &lt;a href="https://pigsty.cc/docs/deploy/terraform/"&gt;&lt;strong&gt;Terraform&lt;/strong&gt;&lt;/a&gt; 模版，可以帮助您一键在本地或云端置备 Linux 虚拟机。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/concept/arch"&gt;&lt;img src="https://pigsty.cc/img/pigsty/arch.png" alt="pigsty-arch"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;单机版本的 Pigsty 包含了所有核心功能，&lt;strong&gt;444&lt;/strong&gt; 个 &lt;a href="https://pigsty.cc/docs/pgsql/ext"&gt;&lt;strong&gt;PG 扩展&lt;/strong&gt;&lt;/a&gt;，自包含的 Grafana / Victoria 监控，&lt;a href="https://pigsty.cc/docs/concept/iac"&gt;&lt;strong&gt;IaC&lt;/strong&gt;&lt;/a&gt; 置备能力。
以及本地 &lt;a href="https://pigsty.cc/docs/concept/pitr"&gt;&lt;strong&gt;PITR&lt;/strong&gt;&lt;/a&gt; 时间点恢复。如果您配备了外部的对象存储（用于 PostgreSQL PITR 备份），那么对于 Demo，个人网站，小型服务等场景，
即使是单机环境，也可以提供一定程度的 &lt;a href="https://pigsty.cc/docs/concept/pitr"&gt;&lt;strong&gt;数据持久性&lt;/strong&gt;&lt;/a&gt; 保证。
不过，单机无法实现 &lt;a href="https://pigsty.cc/docs/concept/ha"&gt;&lt;strong&gt;高可用&lt;/strong&gt;&lt;/a&gt; —— 故障自动切换至少需要 3 个节点。&lt;/p&gt;
&lt;p&gt;如果您想要在没有互联网连接的环境中安装 Pigsty，请参考 &lt;a href="https://pigsty.cc/docs/setup/offline/"&gt;&lt;strong&gt;离线安装&lt;/strong&gt;&lt;/a&gt; 模式。
如果您只需要 PostgreSQL 数据库本身，请参考 &lt;a href="https://pigsty.cc/docs/setup/slim/"&gt;&lt;strong&gt;精简安装&lt;/strong&gt;&lt;/a&gt; 模式。
如果您准备开始进行严肃的多节点生产部署，请参考 &lt;a href="https://pigsty.cc/docs/deploy/"&gt;&lt;strong&gt;部署指南&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="快速开始"&gt;快速开始&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;&lt;strong&gt;准备&lt;/strong&gt;&lt;/a&gt; 一台具有 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;SSH 权限&lt;/strong&gt;&lt;/a&gt; 的 &lt;a href="https://pigsty.cc/docs/deploy/prepare#%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;节点&lt;/strong&gt;&lt;/a&gt;，
安装 &lt;a href="https://pigsty.cc/docs/ref/linux/"&gt;&lt;strong&gt;兼容的 Linux 系统&lt;/strong&gt;&lt;/a&gt;，使用具有免密 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;&lt;code&gt;ssh&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/deploy/admin#sudo"&gt;&lt;strong&gt;&lt;code&gt;sudo&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 权限的 &lt;a href="https://pigsty.cc/docs/deploy/admin"&gt;&lt;strong&gt;管理用户&lt;/strong&gt;&lt;/a&gt; 执行：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.cc/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash &lt;span style="color:#8f5902;font-style:italic"&gt;# 安装 Pigsty 与依赖&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty&lt;span style="color:#000;font-weight:bold"&gt;;&lt;/span&gt; ./configure -g &lt;span style="color:#8f5902;font-style:italic"&gt;# 生成配置（使用默认单机配置模板，-g 参数会生成随机密码）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./deploy.yml &lt;span style="color:#8f5902;font-style:italic"&gt;# 执行部署剧本，完成部署&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;是的，就是这么简单。您完全可以在不了解任何细节的情况下，使用 &lt;a href="https://pigsty.cc/docs/concept/iac/template"&gt;&lt;strong&gt;预制配置模板&lt;/strong&gt;&lt;/a&gt; 一键拉起 Pigsty。&lt;/p&gt;</description></item><item><title>快速上手 Pigsty 单机部署</title><link>https://pigsty.cc/docs/setup/install/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/install/</guid><description>&lt;p&gt;本文是 Pigsty 单节点安装指南，生产环境的多节点高可用部署请参考 &lt;a href="https://pigsty.cc/docs/deploy/"&gt;&lt;strong&gt;部署&lt;/strong&gt;&lt;/a&gt; 文档。&lt;/p&gt;
&lt;p&gt;Pigsty 单机安装分为三步走：&lt;a href="#%E5%AE%89%E8%A3%85"&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/a&gt;，&lt;a href="#%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;配置&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="#%E9%83%A8%E7%BD%B2"&gt;&lt;strong&gt;部署&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="摘要"&gt;摘要&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;&lt;strong&gt;准备&lt;/strong&gt;&lt;/a&gt; 一台具有 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;SSH 权限&lt;/strong&gt;&lt;/a&gt; 的 &lt;a href="https://pigsty.cc/docs/deploy/prepare#%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;节点&lt;/strong&gt;&lt;/a&gt;，
安装 &lt;a href="https://pigsty.cc/docs/ref/linux/"&gt;&lt;strong&gt;兼容的 Linux 系统&lt;/strong&gt;&lt;/a&gt;，使用具有免密 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;&lt;code&gt;ssh&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/deploy/admin#sudo"&gt;&lt;strong&gt;&lt;code&gt;sudo&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 权限的 &lt;a href="https://pigsty.cc/docs/deploy/admin"&gt;&lt;strong&gt;管理用户&lt;/strong&gt;&lt;/a&gt; 执行：&lt;/p&gt;



&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist"&gt;
 &lt;li class="nav-item"&gt;
 &lt;button class="nav-link active"
 id="tabs-00-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-00" role="tab"
 data-td-tp-persist="pigsty.cc（中国）" aria-controls="tabs-00-00" aria-selected="true"&gt;
 pigsty.cc（中国）
 &lt;/button&gt;
 &lt;/li&gt;&lt;li class="nav-item"&gt;
 &lt;button class="nav-link"
 id="tabs-00-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-01" role="tab"
 data-td-tp-persist="pigsty.io（全球）" aria-controls="tabs-00-01" aria-selected="false"&gt;
 pigsty.io（全球）
 &lt;/button&gt;
 &lt;/li&gt;
&lt;/ul&gt;

&lt;div class="tab-content" id="tabs-0-content"&gt;
 &lt;div class="tab-body tab-pane fade show active"
 id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.cc/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash&lt;span style="color:#000;font-weight:bold"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="tab-body tab-pane fade"
 id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash&lt;span style="color:#000;font-weight:bold"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;该命令会执行 &lt;a href="#%E5%AE%89%E8%A3%85"&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/a&gt; 脚本，下载并提取 Pigsty 源码至家目录并安装依赖，接下来依次完成 &lt;a href="#%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;配置&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="#%E9%83%A8%E7%BD%B2"&gt;&lt;strong&gt;部署&lt;/strong&gt;&lt;/a&gt; 即可完成交付。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty &lt;span style="color:#8f5902;font-style:italic"&gt;# 进入 Pigsty 目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -g &lt;span style="color:#8f5902;font-style:italic"&gt;# 生成配置文件（可选，如果知道如何配置可以跳过）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./deploy.yml &lt;span style="color:#8f5902;font-style:italic"&gt;# 执行部署剧本，根据生成的配置文件开始安装&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装完成后，您可以通过 IP / 域名 + &lt;code&gt;80/443&lt;/code&gt; 端口访问 &lt;a href="https://pigsty.cc/docs/setup/webui/"&gt;&lt;strong&gt;Web 用户界面&lt;/strong&gt;&lt;/a&gt;，
并通过 &lt;code&gt;5432&lt;/code&gt; 端口访问 &lt;a href="https://pigsty.cc/docs/setup/pgsql/"&gt;&lt;strong&gt;PostgreSQL 服务&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;</description></item><item><title>Docker 部署</title><link>https://pigsty.cc/docs/setup/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/docker/</guid><description>&lt;p&gt;Pigsty 旨在运行于原生 Linux 系统上，但也可以在带有 systemd 的 Linux 容器环境中运行。
如果您没有原生 Linux 环境（例如 &lt;strong&gt;macOS&lt;/strong&gt; 或 &lt;strong&gt;Windows&lt;/strong&gt; 用户），可以使用 Docker 快速拉起一个本地单机 Pigsty 环境进行测试与体验。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="快速开始"&gt;快速开始&lt;/h2&gt;
&lt;p&gt;进入 Pigsty 源码包的 &lt;a href="https://github.com/pgsty/pigsty/tree/main/docker"&gt;&lt;strong&gt;&lt;code&gt;docker/&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 目录，使用以下一键命令启动 Pigsty：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty/docker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;make launch &lt;span style="color:#8f5902;font-style:italic"&gt;# 启动容器 + 生成配置 + 执行部署&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;部署完成后，您可以通过以下方式访问服务：&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;服务&lt;/th&gt;
 &lt;th style="text-align: left"&gt;地址&lt;/th&gt;
 &lt;th style="text-align: left"&gt;凭据&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;SSH&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;ssh root@localhost -p 2222&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;密码：&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Web 界面&lt;/td&gt;
 &lt;td style="text-align: left"&gt;http://localhost:8080&lt;/td&gt;
 &lt;td style="text-align: left"&gt;-&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Grafana&lt;/td&gt;
 &lt;td style="text-align: left"&gt;http://localhost:8080/ui&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;admin&lt;/code&gt; / &lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;psql postgres://dbuser_dba:DBUser.DBA@localhost:5432/postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="alert alert-info" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;Web 界面与 PostgreSQL 服务&lt;/div&gt;
&lt;p&gt;Web 界面与 PostgreSQL 服务仅在完成 &lt;strong&gt;部署&lt;/strong&gt;（&lt;code&gt;./deploy.yml&lt;/code&gt;）后才可用。&lt;/p&gt;
&lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="准备"&gt;准备&lt;/h2&gt;
&lt;p&gt;使用 Docker 部署 Pigsty 需要满足以下条件：&lt;/p&gt;</description></item><item><title>从浏览器访问图形用户界面</title><link>https://pigsty.cc/docs/setup/webui/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/webui/</guid><description>&lt;p&gt;Pigsty &lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机安装&lt;/strong&gt;&lt;/a&gt; 完成后，您在当前节点上将安装有 &lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模块，它带有一套开箱即用的 Nginx Web 服务器。&lt;/p&gt;
&lt;p&gt;其中的默认服务器配置提供了一个 WebUI 图形界面，用于展示监控仪表盘，并统一代理访问其他组件的 Web 界面。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="访问"&gt;访问&lt;/h2&gt;
&lt;p&gt;您可以通过在浏览器中键入部署节点 IP 地址来访问这个图形界面。在默认配置下，Nginx 将通过 &lt;code&gt;80/443&lt;/code&gt; 标准端口对外提供服务。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;IP 直接访问&lt;/th&gt;
 &lt;th style="text-align: center"&gt;域名（HTTP）&lt;/th&gt;
 &lt;th style="text-align: center"&gt;域名（HTTPS）&lt;/th&gt;
 &lt;th style="text-align: center"&gt;Demo&lt;/th&gt;
 &lt;th&gt;&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="http://10.10.10.10"&gt;&lt;strong&gt;&lt;code&gt;http://10.10.10.10&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="http://i.pigsty"&gt;&lt;strong&gt;&lt;code&gt;http://i.pigsty&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://i.pigsty"&gt;&lt;strong&gt;&lt;code&gt;https://i.pigsty&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://demo.pigsty.cc/zh"&gt;&lt;strong&gt;&lt;code&gt;https://demo.pigsty.cc&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href="https://demo.pigsty.cc/zh"&gt;&lt;img src="https://pigsty.cc/img/pigsty/home.png" alt=""&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="监控"&gt;监控&lt;/h2&gt;
&lt;p&gt;要访问 Pigsty 的监控系统大盘（Grafana），您可以访问服务器的 &lt;code&gt;/ui&lt;/code&gt; 端点。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;IP 直接访问&lt;/th&gt;
 &lt;th style="text-align: center"&gt;域名（HTTP）&lt;/th&gt;
 &lt;th style="text-align: center"&gt;域名（HTTPS）&lt;/th&gt;
 &lt;th style="text-align: center"&gt;Demo&lt;/th&gt;
 &lt;th&gt;&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="http://10.10.10.10/ui"&gt;&lt;strong&gt;&lt;code&gt;http://10.10.10.10/ui&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="http://i.pigsty/ui"&gt;&lt;strong&gt;&lt;code&gt;http://i.pigsty/ui&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://i.pigsty/ui"&gt;&lt;strong&gt;&lt;code&gt;https://i.pigsty/ui&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://demo.pigsty.cc/ui"&gt;&lt;strong&gt;&lt;code&gt;https://demo.pigsty.cc/ui&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果您的服务对互联网与办公网开放，我们建议您通过 &lt;a href="https://pigsty.cc/docs/infra/admin/domain/"&gt;&lt;strong&gt;域名&lt;/strong&gt;&lt;/a&gt; 访问，并启用 &lt;a href="https://pigsty.cc/docs/infra/admin/cert"&gt;&lt;strong&gt;HTTPS&lt;/strong&gt;&lt;/a&gt; 加密，只需要少量配置工作即可实现。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="端点"&gt;端点&lt;/h2&gt;
&lt;p&gt;在默认配置下，Nginx 会在 &lt;code&gt;80/443&lt;/code&gt; 端口的默认服务器上，通过不同的路径暴露以下端点：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;端点&lt;/th&gt;
 &lt;th style="text-align: left"&gt;组件&lt;/th&gt;
 &lt;th style="text-align: left"&gt;原生端口&lt;/th&gt;
 &lt;th style="text-align: left"&gt;备注&lt;/th&gt;
 &lt;th&gt;公开演示&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;80/443&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;首页、本地仓库、文件服务&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc"&gt;&lt;code&gt;demo.pigsty.cc&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/ui/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#%E7%9B%91%E6%8E%A7"&gt;&lt;strong&gt;Grafana&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;3000&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Grafana 仪表盘入口&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/ui/"&gt;&lt;code&gt;demo.pigsty.cc/ui/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/vmetrics/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;VictoriaMetrics&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;8428&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;时序数据库 Web UI&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/vmetrics/"&gt;&lt;code&gt;demo.pigsty.cc/vmetrics/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/vlogs/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;VictoriaLogs&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9428&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;日志数据库 Web UI&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/vlogs/"&gt;&lt;code&gt;demo.pigsty.cc/vlogs/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/vtraces/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;VictoriaTraces&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;10428&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;链路追踪 Web UI&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/vtraces/"&gt;&lt;code&gt;demo.pigsty.cc/vtraces/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/vmalert/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;VMAlert&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;8880&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;告警规则管理&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/vmalert/"&gt;&lt;code&gt;demo.pigsty.cc/vmalert/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/alertmgr/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;AlertManager&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9059&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;告警管理 Web UI&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/alertmgr/"&gt;&lt;code&gt;demo.pigsty.cc/alertmgr/&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/blackbox/&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;Blackbox&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9115&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;黑盒探测器&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/haproxy/*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/node/"&gt;&lt;strong&gt;HAProxy&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9101&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;负载均衡管理 Web UI&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/pev&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/dalibo/pev2"&gt;&lt;strong&gt;PEV2&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;80&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 执行计划可视化&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://demo.pigsty.cc/pev"&gt;&lt;code&gt;demo.pigsty.cc/pev&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/nginx&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;80&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Nginx 状态页（指标采集用）&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="域名访问"&gt;域名访问&lt;/h2&gt;
&lt;p&gt;如果您有自己的域名，可以将其解析到 Pigsty 服务器的 IP 地址，从而通过域名访问 Pigsty 提供的各项服务。&lt;/p&gt;</description></item><item><title>通过配置清单定制 Pigsty 部署</title><link>https://pigsty.cc/docs/setup/config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/config/</guid><description>&lt;p&gt;除了使用 &lt;a href="https://pigsty.cc/docs/concept/iac/configure"&gt;&lt;strong&gt;配置向导&lt;/strong&gt;&lt;/a&gt; 自动生成配置，您也可以从零开始手工编写 Pigsty 配置文件。
本教程将指导您从头开始，逐步构建一个复杂的 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;如果您事先就在 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt; 中定义好了一切，那么只要 &lt;code&gt;deploy.yml&lt;/code&gt; 剧本一把梭，即可完成所有部署工作，但它隐藏了所有细节。&lt;/p&gt;
&lt;p&gt;所以本文档会把所有模块与剧本拆解开来，介绍如何从一个简单的配置，通过增量添加的方式，形成一套复杂完备的部署。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="最小配置"&gt;最小配置&lt;/h2&gt;
&lt;p&gt;最简单的有效配置文件可能如下所示，唯一的内容是定义 &lt;a href="https://pigsty.cc/docs/infra/param#admin_ip"&gt;&lt;strong&gt;&lt;code&gt;admin_ip&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 变量，这是当前安装 Pigsty 节点的 IP 地址（&lt;strong&gt;管理节点&lt;/strong&gt;）&lt;/p&gt;



&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist"&gt;
 &lt;li class="nav-item"&gt;
 &lt;button class="nav-link active"
 id="tabs-00-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-00" role="tab"
 data-td-tp-persist="最简配置" aria-controls="tabs-00-00" aria-selected="true"&gt;
 最简配置
 &lt;/button&gt;
 &lt;/li&gt;&lt;li class="nav-item"&gt;
 &lt;button class="nav-link"
 id="tabs-00-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-01" role="tab"
 data-td-tp-persist="中国特色" aria-controls="tabs-00-01" aria-selected="false"&gt;
 中国特色
 &lt;/button&gt;
 &lt;/li&gt;
&lt;/ul&gt;

&lt;div class="tab-content" id="tabs-0-content"&gt;
 &lt;div class="tab-body tab-pane fade show active"
 id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;admin_ip&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="tab-body tab-pane fade"
 id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 天朝自有国情在此，额外配置 region: chian 以使用国内的镜像源加速下载&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;admin_ip: 10.10.10.10, region&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;china } }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;这个配置不会部署任何东西，但是执行 &lt;code&gt;./deploy.yml&lt;/code&gt; 剧本时，会在 &lt;code&gt;files/pki/ca&lt;/code&gt; 生成一套自签名的 &lt;strong&gt;CA&lt;/strong&gt;，用于签发证书。&lt;/p&gt;</description></item><item><title>使用 Ansible 剧本完成部署</title><link>https://pigsty.cc/docs/setup/playbook/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/playbook/</guid><description>&lt;p&gt;Pigsty 使用 &lt;a href="https://docs.ansible.com/"&gt;&lt;strong&gt;Ansible&lt;/strong&gt;&lt;/a&gt; 对集群进行管理，这是在 SRE 群体中非常流行的大规模/批量化/自动化运维工具。&lt;/p&gt;
&lt;p&gt;Ansible 可以使用 &lt;strong&gt;声明式&lt;/strong&gt; 的方式对服务器进行配置管理，所有模块的部署都是通过一系列幂等的 &lt;a href="https://pigsty.cc/docs/ref/playbook"&gt;&lt;strong&gt;Ansible 剧本&lt;/strong&gt;&lt;/a&gt; 实现的。&lt;/p&gt;
&lt;p&gt;例如，在单机部署时，您会用到 &lt;a href="#%E9%83%A8%E7%BD%B2%E5%89%A7%E6%9C%AC"&gt;&lt;strong&gt;&lt;code&gt;deploy.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 剧本。Pigsty 还有更多 &lt;a href="https://pigsty.cc/docs/ref/playbook"&gt;&lt;strong&gt;内置剧本&lt;/strong&gt;&lt;/a&gt;，您可以根据需要选择使用。&lt;/p&gt;
&lt;p&gt;了解 Ansible 基础知识有助于更好的使用 Pigsty，但这 &lt;strong&gt;并非必须&lt;/strong&gt;，特别是在单机部署时。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="部署剧本"&gt;部署剧本&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了一个 “一条龙” 部署剧本 &lt;strong&gt;&lt;code&gt;deploy.yml&lt;/code&gt;&lt;/strong&gt;，一次性在当前环境上安装所有模块（如果在配置中定义）：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Playbook&lt;/th&gt;
 &lt;th&gt;命令&lt;/th&gt;
 &lt;th&gt;分组&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;code&gt;infra&lt;/code&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;code&gt;[nodes]&lt;/code&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;code&gt;etcd&lt;/code&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;code&gt;minio&lt;/code&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;code&gt;[pgsql]&lt;/code&gt;&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;infra.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;./infra.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;-l infra&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;node.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;./node.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;etcd.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;./etcd.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;-l etcd&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;minio.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;./minio.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;-l minio&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;pgsql.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;./pgsql.yml&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;✓&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;这是最简单的部署方式，您也可以参考 &lt;a href="https://pigsty.cc/docs/setup/config/"&gt;&lt;strong&gt;定制指南&lt;/strong&gt;&lt;/a&gt; 里的说明，一步一步来增量式地完成所有模块与节点的部署。&lt;/p&gt;</description></item><item><title>离线安装</title><link>https://pigsty.cc/docs/setup/offline/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/offline/</guid><description>&lt;p&gt;Pigsty 默认从互联网上游 &lt;a href="https://pigsty.cc/docs/setup/install/"&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/a&gt; 所需软件包，但有些环境与互联网隔离。
为了解决这个问题，Pigsty 支持使用 &lt;a href="#%E7%A6%BB%E7%BA%BF%E8%BD%AF%E4%BB%B6%E5%8C%85"&gt;&lt;strong&gt;离线软件包&lt;/strong&gt;&lt;/a&gt; 进行离线安装。
您可以将其视作 Linux-原生版本的 Docker 镜像。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;离线软件包&lt;/strong&gt; 打包了所有需要的 RPM/DEB 软件包及其依赖；它是常规 &lt;a href="https://pigsty.cc/docs/setup/install/"&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/a&gt; 后的本地 APT / YUM 仓库的快照。&lt;/p&gt;
&lt;p&gt;在 &lt;a href="https://pigsty.cc/docs/deploy"&gt;&lt;strong&gt;严肃的生产环境部署&lt;/strong&gt;&lt;/a&gt; 中，我们 &lt;strong&gt;强烈推荐&lt;/strong&gt; 您使用离线安装包进行安装。
它可以确保后续所有新节点的软件版本与现有环境保持一致，
并且可以避免上游变动导致的在线安装失败（相当常见！）
确保您能独立自主运行它至地老天荒。&lt;/p&gt;
&lt;div class="alert alert-success" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;使用离线软件包的优点&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;可以简单方便的在互联网隔离的环境中交付实施。&lt;/li&gt;
&lt;li&gt;一次性预下载所有软件包，可以有效加速安装过程。&lt;/li&gt;
&lt;li&gt;无需担心上游依赖项的变动导致依赖错漏/安装失败。&lt;/li&gt;
&lt;li&gt;如果有多个节点，那么所有软件包只需要下载一次，节省带宽资源。&lt;/li&gt;
&lt;li&gt;可以通过本地仓库确保所有节点的软件版本一致，实行统一版本管理
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="alert alert-warning" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;使用离线软件包的缺点&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;离线安装包针对 &lt;strong&gt;特定的操作系统小版本制作&lt;/strong&gt;，通常不能跨版本使用&lt;/li&gt;
&lt;li&gt;仅为制作时刻的快照，可能不包含最新的更新和操作系统安全补丁。&lt;/li&gt;
&lt;li&gt;离线安装包通常约 1GB 左右，而在线安装则是按需下载，更节省空间。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;hr&gt;
&lt;h2 id="离线软件包"&gt;离线软件包&lt;/h2&gt;
&lt;p&gt;我们通常为以下 &lt;a href="https://pigsty.cc/docs/ref/linux/"&gt;&lt;strong&gt;Linux 发行版&lt;/strong&gt;&lt;/a&gt; 发布离线软件包，使用较新的操作系统次要版本。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;Linux 发行版&lt;/th&gt;
 &lt;th style="text-align: left"&gt;系统代码&lt;/th&gt;
 &lt;th style="text-align: left"&gt;小版本&lt;/th&gt;
 &lt;th style="text-align: left"&gt;软件包&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 8 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el8.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;8.10&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el8.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el8.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 8 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el8.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;8.10&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el8.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el8.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 9 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el9.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9.7&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el9.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el9.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 9 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el9.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;9.7&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el9.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el9.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 10 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el10.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;10.1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el10.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el10.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;RockyLinux 10 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;el10.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;10.1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.el10.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.el10.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Debian 12 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;d12.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;12.13&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.d12.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.d12.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Debian 12 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;d12.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;12.13&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.d12.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.d12.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Debian 13 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;d13.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;13.3&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.d13.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.d13.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Debian 13 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;d13.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;13.3&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.d13.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.d13.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Ubuntu 24.04 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;u24.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;24.04.2&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.u24.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.u24.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Ubuntu 24.04 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;u24.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;24.04.2&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.u24.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.u24.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Ubuntu 22.04 x86_64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;u22.x86_64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;22.04.5&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.u22.x86_64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.u22.x86_64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Ubuntu 22.04 aarch64&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;u22.aarch64&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;22.04.5&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://github.com/pgsty/pigsty/releases/download/v4.1.0/pigsty-pkg-v4.1.0.u22.aarch64.tgz"&gt;&lt;strong&gt;&lt;code&gt;pigsty-pkg-v4.1.0.u22.aarch64.tgz&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果您使用的是上述列表中给出的操作系统（精确匹配的小版本），那么建议使用离线软件包。
Pigsty 为这些系统提供了开箱即用的预制离线软件包，在 GitHub 上提供免费下载。&lt;/p&gt;</description></item><item><title>精简安装</title><link>https://pigsty.cc/docs/setup/slim/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/slim/</guid><description>&lt;p&gt;如果您只想要高可用 PostgreSQL 数据库集群本身，而不需要监控、基础设施等功能，请考虑 &lt;strong&gt;精简安装&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;精简安装没有 &lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模块，没有监控，没有 &lt;a href="https://pigsty.cc/docs/setup/offline/"&gt;&lt;strong&gt;本地仓库&lt;/strong&gt;&lt;/a&gt;，只有 &lt;a href="https://pigsty.cc/docs/etcd/"&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/pgsql/"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 以及部分 &lt;a href="https://pigsty.cc/docs/node/"&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 功能。&lt;/p&gt;
&lt;div class="alert alert-success" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;精简安装适合以下场景&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;只需要 PostgreSQL 数据库本身，不需要可观测性基础设施。&lt;/li&gt;
&lt;li&gt;资源极度受限的环境，不愿意承担基础设施开销（单机约 0.2 vCPU / 500MB 开销）&lt;/li&gt;
&lt;li&gt;已有外部监控系统，希望统一使用自己的监控管理体系。&lt;/li&gt;
&lt;li&gt;不需要 Grafana 可视化看板组件。
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="alert alert-warning" role="alert"&gt;&lt;div class="h4 alert-heading" role="heading"&gt;精简安装的局限性&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;没有 &lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;基础设施模块&lt;/strong&gt;&lt;/a&gt;，无法使用 WebUI 和本地软件仓库功能。&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/setup/offline"&gt;&lt;strong&gt;离线安装&lt;/strong&gt;&lt;/a&gt; 仅限单机模式使用，多节点精简安装只能在线安装。
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;使用精简安装，您需要：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用 &lt;a href="https://pigsty.cc/docs/conf/slim"&gt;&lt;strong&gt;&lt;code&gt;slim.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 精简安装配置模板（&lt;code&gt;configure -c slim&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;执行 &lt;code&gt;slim.yml&lt;/code&gt; 剧本进行部署，而不是默认的 &lt;code&gt;deploy.yml&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://repo.pigsty.cc/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -g -c slim
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./slim.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div id="asciinema-652aef58304c00ff1cb585f667a5397b" class="asciinema-container td-max-width-on-larger-screens" style="margin: 1em 0;"&gt;&lt;/div&gt;

&lt;script&gt;
(function() {
 var containerId = "asciinema-652aef58304c00ff1cb585f667a5397b";
 var castURL = "\/demo\/install-slim.cast";
 var configuredTheme = "auto";
 var player = null;

 
 function detectTheme() {
 var htmlTheme = document.documentElement.getAttribute("data-bs-theme");
 if (htmlTheme === "dark") return "solarized-dark";
 if (htmlTheme === "light") return "solarized-light";
 
 if (window.matchMedia &amp;&amp; window.matchMedia("(prefers-color-scheme: dark)").matches) {
 return "solarized-dark";
 }
 return "solarized-light";
 }

 function getTheme() {
 if (configuredTheme === "auto") {
 return detectTheme();
 }
 return configuredTheme;
 }

 function createPlayer() {
 var container = document.getElementById(containerId);
 
 container.innerHTML = "";

 var opts = {
 theme: getTheme(),
 speed: "1.3",
 startAt: 0 ,
 fit: "width"
 };
 opts.autoPlay = true;
 opts.loop = true;
 opts.markers = [[ 3 , "安装"],[ 13 , "配置"],[ 22 , "部署"]];

 player = AsciinemaPlayer.create(castURL, container, opts);
 }

 
 createPlayer();

 
 if (configuredTheme === "auto") {
 
 var observer = new MutationObserver(function(mutations) {
 mutations.forEach(function(mutation) {
 if (mutation.attributeName === "data-bs-theme") {
 createPlayer();
 }
 });
 });
 observer.observe(document.documentElement, { attributes: true });

 
 if (window.matchMedia) {
 window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", function() {
 
 var htmlTheme = document.documentElement.getAttribute("data-bs-theme");
 if (!htmlTheme || htmlTheme === "auto") {
 createPlayer();
 }
 });
 }
 }
})();
&lt;/script&gt;

&lt;hr&gt;
&lt;h2 id="说明"&gt;说明&lt;/h2&gt;
&lt;p&gt;精简安装只安装/配置以下组件：&lt;/p&gt;</description></item><item><title>安全建议</title><link>https://pigsty.cc/docs/setup/security/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/setup/security/</guid><description>&lt;p&gt;对于单机部署的 Demo/Dev 场景，只要您 &lt;a href="#%E5%AF%86%E7%A0%81"&gt;&lt;strong&gt;修改了默认密码&lt;/strong&gt;&lt;/a&gt;，Pigsty 的默认配置已经足够安全。&lt;/p&gt;
&lt;p&gt;如果您的部署对互联网开放，可以考虑添加 &lt;a href="#%E9%98%B2%E7%81%AB%E5%A2%99"&gt;&lt;strong&gt;防火墙&lt;/strong&gt;&lt;/a&gt; 规则，限制端口访问与来源IP，进一步加固安全性。&lt;/p&gt;
&lt;p&gt;除此之外，我们建议您保护好 Pigsty 的 &lt;a href="#%E6%96%87%E4%BB%B6"&gt;&lt;strong&gt;关键文件&lt;/strong&gt;&lt;/a&gt;（配置文件与 CA 私钥）防止未授权访问并定期备份。&lt;/p&gt;
&lt;p&gt;对于有着严格安全要求的企业级生产环境，请参考 &lt;a href="https://pigsty.cc/docs/deploy/security/"&gt;&lt;strong&gt;部署-安全加固&lt;/strong&gt;&lt;/a&gt; 文档进行进阶配置。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="密码"&gt;密码&lt;/h2&gt;
&lt;p&gt;Pigsty 是一个开源项目，&lt;strong&gt;默认密码众所周知&lt;/strong&gt;。如果您的部署面向互联网或者办公网开放，请务必修改所有默认密码！&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;模块&lt;/th&gt;
 &lt;th&gt;参数&lt;/th&gt;
 &lt;th&gt;默认值&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/infra/param#grafana_admin_password"&gt;&lt;strong&gt;&lt;code&gt;grafana_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/infra/param#grafana_view_password"&gt;&lt;strong&gt;&lt;code&gt;grafana_view_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Viewer&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_admin_password"&gt;&lt;strong&gt;&lt;code&gt;pg_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_monitor_password"&gt;&lt;strong&gt;&lt;code&gt;pg_monitor_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Monitor&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_replication_password"&gt;&lt;strong&gt;&lt;code&gt;pg_replication_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Replicator&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#patroni_password"&gt;&lt;strong&gt;&lt;code&gt;patroni_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Patroni.API&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/node/param#haproxy_admin_password"&gt;&lt;strong&gt;&lt;code&gt;haproxy_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/minio/param#minio_secret_key"&gt;&lt;strong&gt;&lt;code&gt;minio_secret_key&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;S3User.MinIO&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/etcd/param#etcd_root_password"&gt;&lt;strong&gt;&lt;code&gt;etcd_root_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Etcd.Root&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;为了避免手动修改密码的繁琐，Pigsty 的 &lt;strong&gt;配置向导&lt;/strong&gt; 提供了自动生成随机强密码的功能，使用 &lt;code&gt;configure&lt;/code&gt; 的 &lt;code&gt;-g&lt;/code&gt; 参数即可。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ ./configure -g
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;configure pigsty v4.1.0 begin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;region&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; china
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;WARN&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;kernel&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; Darwin, can be used as admin node only
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;machine&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; arm64
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;package&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; brew &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;macOS&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;WARN&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;primary_ip&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; default placeholder 10.10.10.10 &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;macOS&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;mode&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; meta &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;unknown distro&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;locale&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; C.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; generating random passwords...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; grafana_admin_password : CdG0bDcfm3HFT9H2cvFuv9w7
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pg_admin_password : 86WqSGdokjol7WAU9fUxY8IG
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pg_monitor_password : 0X7PtgMmLxuCd2FveaaqBuX9
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pg_replication_password : 4iAjjXgEY32hbRGVUMeFH460
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; patroni_password : DsD38QLTSq36xejzEbKwEqBK
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; haproxy_admin_password : uhdWhepXrQBrFeAhK9sCSUDo
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; minio_secret_key : z6zrYUN1SbdApQTmfRZlyWMT
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; etcd_root_password : Bmny8op1li1wKlzcaAmvPiWc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; DBUser.Meta : U5v3CmeXICcMdhMNzP9JN3KY
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; DBUser.Viewer : 9cGQF1QMNCtV3KlDn44AEzpw
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; S3User.Backup : 2gjgSCFYNmDs5tOAiviCqM2X
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; S3User.Meta : XfqkAKY6lBtuDMJ2GZezA15T
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; S3User.Data : OygorcpCbV7DpDmqKe3G6UOj
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; random passwords generated, check and save them
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; &lt;span style="color:#000"&gt;ansible&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; ready
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt; OK &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; pigsty configured
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;WARN&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt; don&lt;span style="color:#a40000"&gt;&amp;#39;&lt;/span&gt;t forget to check it and change passwords!
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;proceed with ./deploy.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;我们建议在规划部署之前，就修改所有默认密码，确保部署完成后系统即处于安全状态。事后修改密码是一个繁琐的工作：&lt;/p&gt;</description></item><item><title>部署</title><link>https://pigsty.cc/docs/deploy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/</guid><description>&lt;p&gt;与 &lt;a href="https://pigsty.cc/docs/setup/"&gt;&lt;strong&gt;快速上手&lt;/strong&gt;&lt;/a&gt; 不同，严肃企业生产环境 Pigsty 部署需要更多 &lt;a href="https://pigsty.cc/docs/deploy/planning"&gt;&lt;strong&gt;架构规划&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;&lt;strong&gt;准备工作&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;本章将帮助您理解 Pigsty 的完整部署流程，并提供生产环境部署的最佳实践建议。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;我们建议您在真实的生产环境部署之前，使用 Pigsty 提供的 &lt;a href="https://pigsty.cc/docs/deploy/sandbox"&gt;&lt;strong&gt;沙箱环境&lt;/strong&gt;&lt;/a&gt; 进行测试与演练，确保对部署流程有充分的了解。
您可以使用 &lt;a href="https://pigsty.cc/docs/deploy/vagrant/"&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; 在本地快速创建一个四节点的 Pigsty 沙箱环境用于测试，或者利用 &lt;a href="https://pigsty.cc/docs/deploy/terraform/"&gt;&lt;strong&gt;Terraform&lt;/strong&gt;&lt;/a&gt; 在云端置备一个更大规模的仿真环境。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/concept/arch"&gt;&lt;img src="https://pigsty.cc/img/pigsty/sandbox.png" alt="pigsty-sandbox"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;对于生产环境部署，您通常需要准备至少三个 &lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;&lt;strong&gt;节点&lt;/strong&gt;&lt;/a&gt; 以实现高可用。您需要进一步了解 Pigsty 的 &lt;a href="https://pigsty.cc/docs/concept"&gt;&lt;strong&gt;相关概念&lt;/strong&gt;&lt;/a&gt; 以及常见操作的管理 SOP。
包括如何通过 &lt;a href="https://pigsty.cc/docs/setup/config"&gt;&lt;strong&gt;参数配置&lt;/strong&gt;&lt;/a&gt; 进行定制，如何执行 &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;strong&gt;Ansible 剧本&lt;/strong&gt;&lt;/a&gt; 进行部署。以及如何加固部署的 &lt;a href="https://pigsty.cc/docs/deploy/security"&gt;&lt;strong&gt;安全性&lt;/strong&gt;&lt;/a&gt; 以满足企业合规要求。&lt;/p&gt;</description></item><item><title>生产部署</title><link>https://pigsty.cc/docs/deploy/install/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/install/</guid><description>&lt;p&gt;本文是 Pigsty 生产环境多节点部署指南，部署单机版本 Demo/Dev 环境可以参考 &lt;a href="https://pigsty.cc/docs/setup/"&gt;&lt;strong&gt;快速上手&lt;/strong&gt;&lt;/a&gt; 文档。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="摘要"&gt;摘要&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/deploy/prepare"&gt;&lt;strong&gt;准备&lt;/strong&gt;&lt;/a&gt; &lt;a href="https://pigsty.cc/docs/deploy/planning"&gt;&lt;strong&gt;几台&lt;/strong&gt;&lt;/a&gt; 具有 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;SSH 权限&lt;/strong&gt;&lt;/a&gt; 的 &lt;a href="https://pigsty.cc/docs/deploy/prepare#%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;节点&lt;/strong&gt;&lt;/a&gt;，
安装 &lt;a href="https://pigsty.cc/docs/ref/linux/"&gt;&lt;strong&gt;兼容的 Linux 系统&lt;/strong&gt;&lt;/a&gt;，使用具有免密 &lt;a href="https://pigsty.cc/docs/deploy/admin#ssh"&gt;&lt;strong&gt;&lt;code&gt;ssh&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/deploy/admin#sudo"&gt;&lt;strong&gt;&lt;code&gt;sudo&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 权限的 &lt;a href="https://pigsty.cc/docs/deploy/admin"&gt;&lt;strong&gt;管理用户&lt;/strong&gt;&lt;/a&gt; 执行：&lt;/p&gt;



&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist"&gt;
 &lt;li class="nav-item"&gt;
 &lt;button class="nav-link active"
 id="tabs-00-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-00" role="tab"
 data-td-tp-persist="pigsty.cc（中国）" aria-controls="tabs-00-00" aria-selected="true"&gt;
 pigsty.cc（中国）
 &lt;/button&gt;
 &lt;/li&gt;&lt;li class="nav-item"&gt;
 &lt;button class="nav-link"
 id="tabs-00-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-01" role="tab"
 data-td-tp-persist="pigsty.io（全球）" aria-controls="tabs-00-01" aria-selected="false"&gt;
 pigsty.io（全球）
 &lt;/button&gt;
 &lt;/li&gt;
&lt;/ul&gt;

&lt;div class="tab-content" id="tabs-0-content"&gt;
 &lt;div class="tab-body tab-pane fade show active"
 id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.cc/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash&lt;span style="color:#000;font-weight:bold"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="tab-body tab-pane fade"
 id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; bash&lt;span style="color:#000;font-weight:bold"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;该命令会执行 &lt;a href="#%E5%AE%89%E8%A3%85"&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/a&gt; 脚本，下载并提取 Pigsty 源码至家目录并安装依赖，接下来依次完成 &lt;a href="#%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;配置&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="#%E9%83%A8%E7%BD%B2"&gt;&lt;strong&gt;部署&lt;/strong&gt;&lt;/a&gt; 即可完成交付。&lt;/p&gt;
&lt;p&gt;在执行 &lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;strong&gt;&lt;code&gt;deploy.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 进行部署前，您可能需要进一步审视与编辑 &lt;a href="https://pigsty.cc/docs/concept/iac/inventory"&gt;&lt;strong&gt;配置清单&lt;/strong&gt;&lt;/a&gt;：&lt;strong&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/strong&gt; 文件，确认部署细节。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty &lt;span style="color:#8f5902;font-style:italic"&gt;# 进入 Pigsty 目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./configure -g &lt;span style="color:#8f5902;font-style:italic"&gt;# 生成配置文件（可选，如果知道如何配置可以跳过）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./deploy.yml &lt;span style="color:#8f5902;font-style:italic"&gt;# 执行部署剧本，根据生成的配置文件开始安装&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装完成后，您可以通过 IP / 域名 + &lt;code&gt;80/443&lt;/code&gt; 端口访问 &lt;a href="https://pigsty.cc/docs/setup/webui/"&gt;&lt;strong&gt;Web 用户界面&lt;/strong&gt;&lt;/a&gt;，
并通过 &lt;code&gt;5432&lt;/code&gt; 端口访问 &lt;a href="https://pigsty.cc/docs/setup/pgsql/"&gt;&lt;strong&gt;PostgreSQL 服务&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;</description></item><item><title>资源准备</title><link>https://pigsty.cc/docs/deploy/prepare/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/prepare/</guid><description>&lt;p&gt;Pigsty 运行在节点（物理机或虚拟机）之上，本文档介绍硬件相关的规划与准备。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="节点"&gt;节点&lt;/h2&gt;
&lt;p&gt;Pigsty 目前运行在 &lt;code&gt;Linux&lt;/code&gt; 内核和 &lt;code&gt;x86_64&lt;/code&gt; / &lt;code&gt;aarch64&lt;/code&gt; 架构的节点上。
&lt;a href="https://pigsty.cc/docs/concept/arch/node"&gt;&amp;quot;&lt;strong&gt;节点&lt;/strong&gt;&amp;quot;&lt;/a&gt; 指的是 SSH &lt;a href="https://pigsty.cc/docs/deploy/admin#%E9%AA%8C%E8%AF%81%E5%8F%AF%E8%BE%BE%E6%80%A7"&gt;&lt;strong&gt;可访问&lt;/strong&gt;&lt;/a&gt; 且提供裸 Linux 操作系统环境的资源。
它可以是物理机、虚拟机或配备 &lt;code&gt;systemd&lt;/code&gt;、&lt;code&gt;sudo&lt;/code&gt; 和 &lt;code&gt;sshd&lt;/code&gt; 的类似操作系统的容器。&lt;/p&gt;
&lt;p&gt;部署 Pigsty 至少需要 &lt;strong&gt;1&lt;/strong&gt; 个节点，您可以准备更多，并在 &lt;a href="https://pigsty.cc/docs/setup/playbook#%E9%83%A8%E7%BD%B2%E5%89%A7%E6%9C%AC"&gt;&lt;strong&gt;执行部署剧本&lt;/strong&gt;&lt;/a&gt; 中一次性部署所有节点，或稍后添加并单独部署。
最小节点规格要求是 &lt;code&gt;1C1G&lt;/code&gt;，建议至少使用 &lt;code&gt;1C2G&lt;/code&gt;。越高越好，没有上限。&lt;strong&gt;系统参数将根据可用资源自动调优&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;所需节点的数量，取决于您的需求，更多详情请参考 &lt;a href="https://pigsty.cc/docs/deploy/planning"&gt;&lt;strong&gt;架构规划&lt;/strong&gt;&lt;/a&gt;。
尽管带有 &lt;a href="https://pigsty.cc/docs/pgsql/backup/repository"&gt;&lt;strong&gt;外部备份&lt;/strong&gt;&lt;/a&gt; 的 &lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机部署&lt;/strong&gt;&lt;/a&gt; 也提供一定程度上的兜底，
但我们建议在生产部署中使用复数个节点，起作用的 &lt;a href="https://pigsty.cc/docs/deploy/planning#%E4%B8%89%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;高可用配置&lt;/strong&gt;&lt;/a&gt; 至少需要 &lt;strong&gt;3&lt;/strong&gt; 个节点才能工作，&lt;strong&gt;2&lt;/strong&gt; 个节点则提供 &lt;a href="https://pigsty.cc/docs/deploy/planning#%E5%8F%8C%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;半高可用&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="磁盘"&gt;磁盘&lt;/h2&gt;
&lt;p&gt;Pigsty 将使用 &lt;strong&gt;&lt;code&gt;/data&lt;/code&gt;&lt;/strong&gt; 作为默认数据目录，如果您有专用的主数据磁盘，建议将其挂载到那里，并为额外的磁盘驱动器使用 &lt;code&gt;/data1&lt;/code&gt;、&lt;code&gt;/data2&lt;/code&gt;、&lt;code&gt;/dataN&lt;/code&gt;。
如果你想使用其他的数据目录，可以通过以下参数进行配置：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;名称&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;th style="text-align: left"&gt;默认值&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/node/param#node_data"&gt;&lt;strong&gt;&lt;code&gt;node_data&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;节点主数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_fs_main"&gt;&lt;strong&gt;&lt;code&gt;pg_fs_main&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;PG 主数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/postgres&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_fs_backup"&gt;&lt;strong&gt;&lt;code&gt;pg_fs_backup&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;PG 备份数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/backups&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/etcd/param#etcd_data"&gt;&lt;strong&gt;&lt;code&gt;etcd_data&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;ETCD 数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/etcd&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/infra/param#infra_data"&gt;&lt;strong&gt;&lt;code&gt;infra_data&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;Infra 数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/infra&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/infra/param#nginx_data"&gt;&lt;strong&gt;&lt;code&gt;nginx_data&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;Nginx 数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/nginx&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/minio/param#minio_data"&gt;&lt;strong&gt;&lt;code&gt;minio_data&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;MinIO 数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/minio&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/redis/param#redis_fs_main"&gt;&lt;strong&gt;&lt;code&gt;redis_fs_main&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;Redis 数据目录&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/data/redis&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="文件系统"&gt;文件系统&lt;/h2&gt;
&lt;p&gt;您可以使用任何支持的 Linux 文件系统来格式化数据磁盘，但对于生产环境部署，我们建议使用 &lt;strong&gt;&lt;code&gt;xfs&lt;/code&gt;&lt;/strong&gt;。&lt;/p&gt;</description></item><item><title>架构规划</title><link>https://pigsty.cc/docs/deploy/planning/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/planning/</guid><description>&lt;p&gt;Pigsty 采用 &lt;a href="https://pigsty.cc/docs/concept/arch"&gt;&lt;strong&gt;模块化架构&lt;/strong&gt;&lt;/a&gt;，您可以像搭积木一样组合出自己想要的部署方案，并用简单的 &lt;a href="https://pigsty.cc/docs/concept/iac"&gt;&lt;strong&gt;声明式配置&lt;/strong&gt;&lt;/a&gt; 表达您的意图。&lt;/p&gt;
&lt;h2 id="常见方案"&gt;常见方案&lt;/h2&gt;
&lt;p&gt;这里有一些常见的组合模式供您参考，您可以根据自己的需求进行进一步的定制与调整：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;方案&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/etcd/"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql/"&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;MINIO&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;单机部署（&lt;a href="https://pigsty.cc/docs/conf/meta"&gt;&lt;strong&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机部署&lt;/strong&gt;&lt;/a&gt; 默认配置，经典方案&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;单机部署（&lt;a href="https://pigsty.cc/docs/conf/slim"&gt;&lt;strong&gt;&lt;code&gt;slim&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;不要监控设施，只要数据库&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;基础设施（&lt;a href="https://pigsty.cc/docs/conf/infra"&gt;&lt;strong&gt;&lt;code&gt;infra&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;只要监控基础设施&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;单机部署（&lt;a href="https://pigsty.cc/docs/conf/rich"&gt;&lt;strong&gt;&lt;code&gt;rich&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td&gt;单机 + 对象存储 + 本地仓库/扩展&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;多节点方案&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/etcd/"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql/"&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;MINIO&lt;/strong&gt;&lt;/a&gt;&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;双节点（&lt;a href="https://pigsty.cc/docs/conf/dual"&gt;&lt;strong&gt;&lt;code&gt;dual&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;2&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;2节点半HA，可容忍坏特定一个&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;三节点（&lt;a href="https://pigsty.cc/docs/conf/trio"&gt;&lt;strong&gt;&lt;code&gt;trio&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;标准3节点HA，可容忍坏一个&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;四节点（&lt;a href="https://pigsty.cc/docs/conf/full"&gt;&lt;strong&gt;&lt;code&gt;full&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;1+3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td&gt;演示专用，1 INFRA/ETCD&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;生产部署（&lt;a href="https://pigsty.cc/docs/conf/simu"&gt;&lt;strong&gt;&lt;code&gt;simu&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;2&lt;/td&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;n&lt;/td&gt;
 &lt;td style="text-align: center"&gt;n&lt;/td&gt;
 &lt;td&gt;2个INFRA，3个ETCD&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;大规模生产（自定义）&lt;/td&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;5&lt;/td&gt;
 &lt;td style="text-align: center"&gt;n&lt;/td&gt;
 &lt;td style="text-align: center"&gt;n&lt;/td&gt;
 &lt;td&gt;3个INFRA，5个 ETCD&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;使用什么样的架构规划方案，取决于您对数据库可靠性的要求，以及手头可用的资源。
通常来说，严肃的生产环境部署至少需要 &lt;strong&gt;3&lt;/strong&gt; 个节点以实现 &lt;a href="#%E4%B8%89%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;高可用配置&lt;/strong&gt;&lt;/a&gt;。
如果您只有 &lt;strong&gt;2&lt;/strong&gt; 个节点，则可以使用 &lt;a href="#%E5%8F%8C%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"&gt;&lt;strong&gt;半高可用配置&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;</description></item><item><title>管理机制</title><link>https://pigsty.cc/docs/deploy/admin/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/admin/</guid><description>&lt;p&gt;Pigsty 需要一个在所有被管理节点上具有免密 &lt;a href="#ssh"&gt;&lt;strong&gt;SSH&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href="#sudo"&gt;&lt;strong&gt;Sudo&lt;/strong&gt;&lt;/a&gt; 权限的操作系统 &lt;strong&gt;管理用户&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;这个用户需要能够通过 ssh 访问到所有被管理节点，并且能够在这些节点上执行 sudo 命令。&lt;/p&gt;
&lt;p&gt;要想将节点纳入 Pigsty 中管理，&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="用户"&gt;用户&lt;/h2&gt;
&lt;p&gt;通常我们会选择 &lt;code&gt;dba&lt;/code&gt; 或 &lt;code&gt;admin&lt;/code&gt; 这样的用户名称，并避免使用 &lt;code&gt;root&lt;/code&gt; 与 &lt;code&gt;postgres&lt;/code&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 &lt;code&gt;root&lt;/code&gt; 进行部署是可行的，但不符合生产最佳实践。&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;postgres&lt;/code&gt; （&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_dbsu"&gt;&lt;strong&gt;&lt;code&gt;pg_dbsu&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;）作为管理员用户是严格禁止的。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="免密码"&gt;免密码&lt;/h2&gt;
&lt;p&gt;如果您可以接受为每个 &lt;code&gt;ssh&lt;/code&gt; 和 &lt;code&gt;sudo&lt;/code&gt; 命令输入密码，则免密码要求是可选的。&lt;/p&gt;
&lt;p&gt;您可以在 &lt;a href="https://pigsty.cc/docs/setup/playbook/"&gt;&lt;strong&gt;执行剧本&lt;/strong&gt;&lt;/a&gt; 时使用 &lt;code&gt;-k|--ask-pass&lt;/code&gt; 来提示输入 &lt;strong&gt;SSH&lt;/strong&gt; 密码，
以及 &lt;code&gt;-K|--ask-become-pass&lt;/code&gt; 来提示输入 &lt;strong&gt;sudo&lt;/strong&gt; 密码。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./deploy.yml -k -K
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;一些企业的安全策略可能不允许免密 &lt;code&gt;ssh&lt;/code&gt; 或 &lt;code&gt;sudo&lt;/code&gt;，在这种情况下，您可以使用上述选项。&lt;/p&gt;
&lt;p&gt;或者考虑配置一个 sudo 密码缓存时间较长的 sudoers 规则，以减少密码提示的频率。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="创建管理员用户"&gt;创建管理员用户&lt;/h2&gt;
&lt;p&gt;通常，您的服务器/虚拟机供应商会为您创建一个初始管理员用户。&lt;/p&gt;
&lt;p&gt;如果你对这个用户不满意，Pigsty 的部署剧本可以为你创建一个 &lt;a href="#%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%91%98%E7%94%A8%E6%88%B7"&gt;&lt;strong&gt;新的管理员用户&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;假设您在节点上有 root 权限，或有一个现有的管理员用户，您可以使用 Pigsty 本身创建管理员用户：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./node.yml -k -K -t node_admin -e &lt;span style="color:#000"&gt;ansible_user&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;=[&lt;/span&gt;你准备使用的管理员名称&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;它将利用现有的管理员创建新的管理员，创建由以下参数描述的专用 &lt;code&gt;dba&lt;/code&gt;（uid=88）用户，并正确配置 sudo / ssh。&lt;/p&gt;</description></item><item><title>沙箱环境</title><link>https://pigsty.cc/docs/deploy/sandbox/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/sandbox/</guid><description>&lt;p&gt;Pigsty 提供了一个标准的四节点 &lt;strong&gt;沙箱环境&lt;/strong&gt;，用于学习、测试与功能演示。&lt;/p&gt;
&lt;p&gt;沙箱使用固定的 IP 地址和预定义的身份标识符，便于复现各种演示用例。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="环境描述"&gt;环境描述&lt;/h2&gt;
&lt;p&gt;默认的沙箱环境由 4 个节点组成，默认使用配置文件 &lt;a href="https://github.com/pgsty/pigsty/blob/main/conf/ha/full.yml"&gt;&lt;code&gt;ha/full.yml&lt;/code&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;ID&lt;/th&gt;
 &lt;th style="text-align: center"&gt;IP 地址&lt;/th&gt;
 &lt;th style="text-align: center"&gt;节点名&lt;/th&gt;
 &lt;th style="text-align: center"&gt;PostgreSQL&lt;/th&gt;
 &lt;th style="text-align: center"&gt;INFRA&lt;/th&gt;
 &lt;th style="text-align: center"&gt;ETCD&lt;/th&gt;
 &lt;th style="text-align: center"&gt;MINIO&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;1&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;10.10.10.10&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;pg-meta-1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;infra-1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;etcd-1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;minio-1&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;2&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;10.10.10.11&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;node-1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;pg-test-1&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;3&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;10.10.10.12&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;node-2&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;pg-test-2&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;4&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;10.10.10.13&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;node-3&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;pg-test-3&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;沙箱的配置可以概括表示为以下配置文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;children&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;infra&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;infra_seq&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;1&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;etcd&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;etcd_seq: 1 } }, vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;etcd_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;etcd } }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;minio&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;minio_seq: 1 } }, vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;minio_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;minio } }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg-meta&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_seq: 1, pg_role&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;primary } }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;pg-meta }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg-test&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.11&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_seq: 1, pg_role&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;primary }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.12&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_seq: 2, pg_role&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;replica }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.13&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_seq: 3, pg_role&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;replica }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;pg-test }&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;version&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;v4.1.0&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;admin_ip&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;region&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;default&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;pg_version&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;18&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="https://pigsty.cc/img/pigsty/sandbox.png" alt="pigsty-sandbox"&gt;&lt;/p&gt;</description></item><item><title>Vagrant</title><link>https://pigsty.cc/docs/deploy/vagrant/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/vagrant/</guid><description>&lt;p&gt;&lt;a href="https://www.vagrantup.com/"&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; 是一个流行的本地虚拟化工具，可以按照声明式的方式创建本地虚拟机。&lt;/p&gt;
&lt;p&gt;Pigsty 需要 Linux 环境运行，您可以使用 Vagrant 轻松在本地创建 Linux 虚拟机进行测试。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="安装依赖"&gt;安装依赖&lt;/h2&gt;
&lt;p&gt;首先，确保您的系统中已经安装了 &lt;a href="https://www.vagrantup.com/"&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; 和虚拟机软件（&lt;a href="https://www.virtualbox.org/"&gt;&lt;strong&gt;VirtualBox&lt;/strong&gt;&lt;/a&gt;， &lt;a href="https://libvirt.org/"&gt;&lt;strong&gt;libvirt&lt;/strong&gt;&lt;/a&gt;，Hyper-V，Parallel，……）。&lt;/p&gt;
&lt;p&gt;在 MacOS 上，您可以使用 &lt;a href="https://brew.sh/"&gt;&lt;strong&gt;Homebrew&lt;/strong&gt;&lt;/a&gt; 一键安装 vagrant 与 virtualbox；
在 Linux 上，您可以使用 VirtualBox 或 &lt;a href="https://vagrant-libvirt.github.io/vagrant-libvirt/"&gt;&lt;strong&gt;vagrant-libvirt&lt;/strong&gt;&lt;/a&gt; 作为虚拟机管理软件；
在 Windows 专业版上，可以使用 Virtualbox 与 Hyper-V 作为提供商。&lt;/p&gt;





&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist"&gt;
 &lt;li class="nav-item"&gt;
 &lt;button class="nav-link active"
 id="tabs-00-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-00" role="tab"
 aria-controls="tabs-00-00" aria-selected="true"&gt;
 macOS
 &lt;/button&gt;
 &lt;/li&gt;&lt;li class="nav-item"&gt;
 &lt;button class="nav-link"
 id="tabs-00-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-01" role="tab"
 aria-controls="tabs-00-01" aria-selected="false"&gt;
 安装 Homebrew
 &lt;/button&gt;
 &lt;/li&gt;
&lt;/ul&gt;

&lt;div class="tab-content" id="tabs-0-content"&gt;
 &lt;div class="tab-pane fade show active"
 id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-Bash" data-lang="Bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install vagrant virtualbox ansible
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# 安装 VirtualBox 后需要重启系统，并在系统偏好设置中允许其内核扩展。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="tab-pane fade"
 id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab" tabindex="0"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-Bash" data-lang="Bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/bin/bash -c &lt;span style="color:#4e9a06"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span style="color:#204a87;font-weight:bold"&gt;)&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id="创建虚拟机"&gt;创建虚拟机&lt;/h3&gt;
&lt;p&gt;使用 Pigsty 提供的 &lt;code&gt;make&lt;/code&gt; 快捷方式创建虚拟机：&lt;/p&gt;</description></item><item><title>Terraform</title><link>https://pigsty.cc/docs/deploy/terraform/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/terraform/</guid><description>&lt;p&gt;&lt;a href="https://www.terraform.io/"&gt;&lt;strong&gt;Terraform&lt;/strong&gt;&lt;/a&gt; 是一个流行的&amp;quot;基础设施即代码&amp;quot;工具，您可以使用它在公有云上一键创建虚拟机。&lt;/p&gt;
&lt;p&gt;Pigsty 提供了阿里云、AWS、腾讯云的 Terraform 模板作为示例。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="快速开始"&gt;快速开始&lt;/h2&gt;
&lt;h3 id="安装-terraform"&gt;安装 Terraform&lt;/h3&gt;
&lt;p&gt;在 macOS 上，您可以使用 &lt;a href="https://brew.sh/"&gt;&lt;strong&gt;Homebrew&lt;/strong&gt;&lt;/a&gt; 安装 Terraform：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install terraform
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其他平台请参考 &lt;a href="https://developer.hashicorp.com/terraform/install"&gt;&lt;strong&gt;Terraform 官方安装指南&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id="初始化与应用"&gt;初始化与应用&lt;/h3&gt;
&lt;p&gt;进入 Terraform 目录，选择模板，初始化提供商插件，然后应用配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87"&gt;cd&lt;/span&gt; ~/pigsty/terraform
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cp spec/aliyun-meta.tf terraform.tf &lt;span style="color:#8f5902;font-style:italic"&gt;# 选择模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;terraform init &lt;span style="color:#8f5902;font-style:italic"&gt;# 安装云提供商插件（首次使用时）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;terraform apply &lt;span style="color:#8f5902;font-style:italic"&gt;# 生成执行计划并创建资源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行 &lt;code&gt;apply&lt;/code&gt; 命令后，按提示输入 &lt;code&gt;yes&lt;/code&gt; 确认，Terraform 将为您创建虚拟机及相关云资源。&lt;/p&gt;
&lt;h3 id="获取-ip-地址"&gt;获取 IP 地址&lt;/h3&gt;
&lt;p&gt;创建完成后，打印管理节点的公网 IP 地址：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;terraform output &lt;span style="color:#000;font-weight:bold"&gt;|&lt;/span&gt; grep -Eo &lt;span style="color:#4e9a06"&gt;&amp;#39;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="配置-ssh-访问"&gt;配置 SSH 访问&lt;/h3&gt;
&lt;p&gt;使用 &lt;code&gt;ssh&lt;/code&gt; 脚本自动配置 SSH 别名并分发密钥：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./ssh &lt;span style="color:#8f5902;font-style:italic"&gt;# 写入 SSH 配置到 ~/.ssh/pigsty_config 并复制密钥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此脚本会将 Terraform 输出的 IP 地址写入 &lt;code&gt;~/.ssh/pigsty_config&lt;/code&gt;，并使用默认密码 &lt;code&gt;PigstyDemo4&lt;/code&gt; 自动分发 SSH 密钥。&lt;/p&gt;</description></item><item><title>安全考量</title><link>https://pigsty.cc/docs/deploy/security/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/deploy/security/</guid><description>&lt;p&gt;Pigsty 的默认配置已经足以覆盖绝大多数场景对于安全的需求。&lt;/p&gt;
&lt;p&gt;Pigsty 已经提供了开箱即用的 &lt;a href="https://pigsty.cc/docs/pgsql/config/hba"&gt;认证&lt;/a&gt; 与 &lt;a href="https://pigsty.cc/docs/concept/sec/ac/"&gt;访问控制&lt;/a&gt; 模型，对于绝大多数场景已经足够安全。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/ac/"&gt;&lt;img src="https://pigsty.cc/img/pigsty/acl.jpg" alt="pigsty-acl.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果您希望进一步加固系统的安全性，那么以下建议供您参考：&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="机密性"&gt;机密性&lt;/h2&gt;
&lt;h3 id="重要文件"&gt;重要文件&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;保护你的 pigsty.yml 配置文件或CMDB&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pigsty.yml&lt;/code&gt; 配置文件通常包含了高度敏感的机密信息，您应当确保它的安全。&lt;/li&gt;
&lt;li&gt;严格控制管理节点的访问权限，仅限 DBA 或者 Infra 管理员访问。&lt;/li&gt;
&lt;li&gt;严格控制 pigsty.yml 配置文件仓库的访问权限（如果您使用 git 进行管理）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;保护你的 CA 私钥和其他证书，这些文件非常重要。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;相关文件默认会在管理节点Pigsty源码目录的 &lt;code&gt;files/pki&lt;/code&gt; 内生成。&lt;/li&gt;
&lt;li&gt;你应该定期将它们备份到一个安全的地方存储。&lt;/li&gt;
&lt;/ul&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;h3 id="密码"&gt;密码&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;在生产环境部署时，必须更改这些密码，不要使用默认值！&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/infra/param#grafana_admin_password"&gt;&lt;strong&gt;&lt;code&gt;grafana_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;pigsty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_admin_password"&gt;&lt;strong&gt;&lt;code&gt;pg_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_monitor_password"&gt;&lt;strong&gt;&lt;code&gt;pg_monitor_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;DBUser.Monitor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#pg_replication_password"&gt;&lt;strong&gt;&lt;code&gt;pg_replication_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;DBUser.Replicator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/pgsql/param#patroni_password"&gt;&lt;strong&gt;&lt;code&gt;patroni_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;Patroni.API&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/node/param#haproxy_admin_password"&gt;&lt;strong&gt;&lt;code&gt;haproxy_admin_password&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;pigsty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/minio/param#minio_access_key"&gt;&lt;strong&gt;&lt;code&gt;minio_access_key&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;minioadmin&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.cc/docs/minio/param#minio_secret_key"&gt;&lt;strong&gt;&lt;code&gt;minio_secret_key&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; : &lt;code&gt;minioadmin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;如果您使用MinIO，请修改MinIO的默认用户密码，与pgbackrest中的引用&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;请修改 MinIO 普通用户的密码：&lt;a href="https://pigsty.cc/docs/minio/param#minio_users"&gt;&lt;strong&gt;&lt;code&gt;minio_users&lt;/code&gt;&lt;/strong&gt;&lt;code&gt;.&lt;/code&gt;[pgbacrest]&lt;code&gt;.&lt;/code&gt;secret_key`&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;请修改 pgbackrest 中对 MinIO 使用的备份用户密码：&lt;a href="https://pigsty.cc/docs/pgsql/param#pgbackrest_repo"&gt;&lt;strong&gt;&lt;code&gt;pgbackrest_repo&lt;/code&gt;&lt;/strong&gt;&lt;code&gt;.&lt;/code&gt;minio&lt;code&gt;.&lt;/code&gt;s3_key_secret`&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;如果您使用远程备份仓库，请务必启用备份加密，并设置加解密密码&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设置 [&lt;strong&gt;&lt;code&gt;pgbackrest_repo&lt;/code&gt;&lt;/strong&gt;&lt;code&gt;.&lt;/code&gt;*&lt;code&gt;.&lt;/code&gt;cipher_type&lt;code&gt;](/docs/pgsql/param#pgbackrest_repo) 为 &lt;/code&gt;aes-256-cbc`&lt;/li&gt;
&lt;li&gt;设置密码时可以使用 &lt;code&gt;${pg_cluster}&lt;/code&gt; 作为密码的一部分，避免所有集群使用同一个密码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;为 PostgreSQL 使用安全可靠的密码加密算法&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>参考</title><link>https://pigsty.cc/docs/ref/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ref/</guid><description/></item><item><title>模块列表</title><link>https://pigsty.cc/docs/ref/module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ref/module/</guid><description>&lt;hr&gt;
&lt;h2 id="正式模块"&gt;正式模块&lt;/h2&gt;
&lt;table class="stretch-last"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;模块&lt;/th&gt;
 &lt;th style="text-align: center"&gt;类别&lt;/th&gt;
 &lt;th style="text-align: center"&gt;状态&lt;/th&gt;
 &lt;th style="text-align: center"&gt;文档入口&lt;/th&gt;
 &lt;th style="text-align: left"&gt;简介&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;核心&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/pgsql&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;高可用 PostgreSQL 集群，内置备份、监控、SOP 与扩展生态。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;核心&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/infra&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;本地软件仓库 + VictoriaMetrics/Logs/Traces + Grafana 等基础设施。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;核心&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/node&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;节点初始化与收敛：系统调优、管理员、HAProxy、Vector、Docker 等。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;核心&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/etcd&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 高可用 DCS（服务发现、配置、选主元数据）。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/minio"&gt;&lt;strong&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/minio&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;S3 兼容对象存储，可作为 PostgreSQL 备份仓库。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/redis"&gt;&lt;strong&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/redis&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Redis 独立/哨兵/集群模式部署与监控。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/ferret"&gt;&lt;strong&gt;&lt;code&gt;FERRET&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/ferret&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;FerretDB 模块（&lt;code&gt;MONGO&lt;/code&gt; API 兼容），为 PG 提供 MongoDB 协议访问。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/docker"&gt;&lt;strong&gt;&lt;code&gt;DOCKER&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;GA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/docker&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Docker Daemon 及容器化应用运行基础能力。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/juice"&gt;&lt;strong&gt;&lt;code&gt;JUICE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;BETA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/juice&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;JuiceFS 分布式文件系统，使用 PostgreSQL 作为元数据引擎。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="https://pigsty.cc/docs/vibe"&gt;&lt;strong&gt;&lt;code&gt;VIBE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;扩展&lt;/td&gt;
 &lt;td style="text-align: center"&gt;BETA&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;/docs/vibe&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;浏览器化开发环境，集成 Code-Server、JupyterLab、Node.js 与 Claude Code。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="核心模块"&gt;核心模块&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了四个 &lt;span class="text-primary"&gt;&lt;b&gt;基础&lt;/b&gt;&lt;/span&gt; 功能模块，对于提供完整高可用的 PostgreSQL 服务非常重要：&lt;/p&gt;</description></item><item><title>文件结构</title><link>https://pigsty.cc/docs/ref/fhs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ref/fhs/</guid><description>&lt;hr&gt;
&lt;h2 id="pigsty-fhs"&gt;Pigsty FHS&lt;/h2&gt;
&lt;p&gt;Pigsty 的主目录默认放置于 &lt;code&gt;~/pigsty&lt;/code&gt;，该目录下的文件结构如下所示：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#------------------------------------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# pigsty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@app # 额外的示例应用资源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@bin # bin 脚本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@docs # 文档（可docsify化）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@files # ansible 文件资源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@victoria # Victoria 规则与运维脚本（bin/rules）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@grafana # grafana 仪表盘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@postgres # /pg/bin/ 脚本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@migration # pgsql 迁移任务定义&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@pki # 自签名 CA 和证书&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@roles # ansible 剧本实现&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@templates # ansible 模板文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@vagrant # Vagrant 沙箱虚拟机定义模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@terraform # Terraform 云虚拟机申请模板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----configure # 配置向导脚本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----ansible.cfg # ansible 默认配置文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----pigsty.yml # pigsty 默认配置文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----*.yml # ansible 剧本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#------------------------------------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# /infra -&amp;gt; /data/infra # infra 运行时目录软链接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# /data/infra # root:infra 0771&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@metrics # VictoriaMetrics TSDB 数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@logs # VictoriaLogs 数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@traces # VictoriaTraces 数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@alertmgr # AlertManager 数据&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@rules # 规则定义（含 agent.yml）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@targets # FileSD 监控目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@dashboards # Grafana 仪表盘定义&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----@datasources # Grafana 数据源定义&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ^-----prometheus.yml # Victoria 的 Prometheus 兼容配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#------------------------------------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="ca-fhs"&gt;CA FHS&lt;/h2&gt;
&lt;p&gt;Pigsty 的 &lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;自签名 CA&lt;/strong&gt;&lt;/a&gt; 位于 Pigsty 主目录下的 &lt;code&gt;files/pki/&lt;/code&gt;。&lt;/p&gt;</description></item><item><title>模板</title><link>https://pigsty.cc/docs/conf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/conf/</guid><description>&lt;p&gt;Pigsty 提供了多种开箱即用的配置模板，适用于不同的使用场景。&lt;/p&gt;
&lt;p&gt;您可以在 &lt;a href="https://pigsty.cc/docs/concept/iac/configure"&gt;&lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 时使用 &lt;code&gt;-c&lt;/code&gt; 指定一个配置模板。如果没有指定配置模板，将会使用默认的 &lt;a href="https://pigsty.cc/docs/conf/meta/"&gt;&lt;strong&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模版。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;分类&lt;/th&gt;
 &lt;th style="text-align: left"&gt;模板&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;单机模版&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/conf/meta/"&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/rich/"&gt;&lt;code&gt;rich&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/fat/"&gt;&lt;code&gt;fat&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/slim/"&gt;&lt;code&gt;slim&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/infra/"&gt;&lt;code&gt;infra&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/vibe/"&gt;&lt;code&gt;vibe&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;内核模版&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/conf/pgsql/"&gt;&lt;code&gt;pgsql&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/citus/"&gt;&lt;code&gt;citus&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/mssql/"&gt;&lt;code&gt;mssql&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/polar/"&gt;&lt;code&gt;polar&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/ivory/"&gt;&lt;code&gt;ivory&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/mysql/"&gt;&lt;code&gt;mysql&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/pgtde/"&gt;&lt;code&gt;pgtde&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/oriole/"&gt;&lt;code&gt;oriole&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/supabase/"&gt;&lt;code&gt;supabase&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;高可用模板&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/conf/simu/"&gt;&lt;code&gt;ha/simu&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/full/"&gt;&lt;code&gt;ha/full&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/safe/"&gt;&lt;code&gt;ha/safe&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/trio/"&gt;&lt;code&gt;ha/trio&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/dual/"&gt;&lt;code&gt;ha/dual&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;应用模版&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/conf/odoo/"&gt;&lt;code&gt;app/odoo&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/dify/"&gt;&lt;code&gt;app/dify&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/electric/"&gt;&lt;code&gt;app/electric&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/maybe/"&gt;&lt;code&gt;app/maybe&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/teable/"&gt;&lt;code&gt;app/teable&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/mattermost/"&gt;&lt;code&gt;app/mattermost&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/registry/"&gt;&lt;code&gt;app/registry&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;其他模版&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/conf/docker/"&gt;&lt;code&gt;docker&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/mongo/"&gt;&lt;code&gt;mongo&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/el/"&gt;&lt;code&gt;demo/el&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/debian/"&gt;&lt;code&gt;demo/debian&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/demo/"&gt;&lt;code&gt;demo/demo&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/minio/"&gt;&lt;code&gt;demo/minio&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/oss/"&gt;&lt;code&gt;build/oss&lt;/code&gt;&lt;/a&gt;、&lt;a href="https://pigsty.cc/docs/conf/pro/"&gt;&lt;code&gt;build/pro&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="漏项检查v410"&gt;漏项检查（v4.1.0）&lt;/h2&gt;
&lt;p&gt;当前 &lt;code&gt;content/docs/conf/yaml/&lt;/code&gt; 与 Pigsty 主仓库 &lt;code&gt;conf/&lt;/code&gt; 目录保持一一对应（44/44）。&lt;/p&gt;
&lt;p&gt;仍缺少独立说明页（可由你后续补充）的模板如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;build/dev.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/bare.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/kernel.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/kernels.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/redis.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/remote.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/saas.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;demo/wool.yml&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;补充说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;app/supa.yml&lt;/code&gt; 是 &lt;code&gt;supabase.yml&lt;/code&gt; 的软链接别名，已由 &lt;a href="https://pigsty.cc/docs/conf/supabase/"&gt;&lt;code&gt;supabase&lt;/code&gt;&lt;/a&gt; 页面覆盖。&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>任务教程</title><link>https://pigsty.cc/docs/pgsql/tutorial/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/pgsql/tutorial/</guid><description/></item><item><title>常见问题</title><link>https://pigsty.cc/docs/infra/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/infra/faq/</guid><description>&lt;hr&gt;
&lt;h2 id="infra-模块中包含了哪些组件"&gt;INFRA 模块中包含了哪些组件？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Ansible&lt;/strong&gt;：用于自动化配置、部署和日常运维。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nginx&lt;/strong&gt;：对外暴露 Grafana、VictoriaMetrics（VMUI）、Alertmanager 等 WebUI，并托管本地 YUM/APT 仓库。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自签名 CA&lt;/strong&gt;：为 Nginx、Patroni、pgBackRest 等组件签发 SSL/TLS 证书。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VictoriaMetrics 套件&lt;/strong&gt;：替代 Prometheus/Loki，包含 VictoriaMetrics（TSDB）、VMAlert（告警评估）、VictoriaLogs（集中日志）、VictoriaTraces（链路追踪）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Vector&lt;/strong&gt;：节点侧日志采集器，负责将系统/数据库日志推送至 VictoriaLogs。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AlertManager&lt;/strong&gt;：聚合并分发告警通知。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Grafana&lt;/strong&gt;：监控/可视化平台，预置大量仪表板和数据源。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Chronyd&lt;/strong&gt;：提供 NTP 时间同步。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DNSMasq&lt;/strong&gt;：提供 DNS 注册与解析。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ETCD&lt;/strong&gt;：作为 PostgreSQL 高可用 DCS（亦可在专用集群部署）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;：在管理节点上充当 CMDB（可选）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker&lt;/strong&gt;：在节点上运行无状态工具或应用（可选）。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="如何重新向-victoriametrics-注册监控目标"&gt;如何重新向 VictoriaMetrics 注册监控目标？&lt;/h2&gt;
&lt;p&gt;VictoriaMetrics 通过 &lt;code&gt;/infra/targets/&amp;lt;job&amp;gt;/*.yml&lt;/code&gt; 目录进行静态服务发现。如果目标文件被误删，可使用如下命令重新注册：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./infra.yml -t infra_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染 infra 自监控目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./node.yml -t node_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染节点 / HAProxy / Vector 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./etcd.yml -t etcd_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染 etcd 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./minio.yml -t minio_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染 MinIO 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./pgsql.yml -t pg_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染 PGSQL/Patroni 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./redis.yml -t redis_register &lt;span style="color:#8f5902;font-style:italic"&gt;# 重新渲染 Redis 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其他模块（如 &lt;code&gt;pg_monitor.yml&lt;/code&gt;、&lt;code&gt;mongo.yml&lt;/code&gt;、&lt;code&gt;mysql.yml&lt;/code&gt;）也提供了对应的 &lt;code&gt;*_register&lt;/code&gt; 标签，可按需执行。&lt;/p&gt;</description></item><item><title>常见问题</title><link>https://pigsty.cc/docs/etcd/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/etcd/faq/</guid><description>&lt;hr&gt;
&lt;h2 id="etcd集群起什么作用"&gt;etcd集群起什么作用？&lt;/h2&gt;
&lt;p&gt;etcd 是一个分布式的、可靠的键-值存储，用于存放系统中最为关键的数据，Pigsty 使用 etcd 作为 Patroni 的 DCS（分布式配置存储）服务，用于存储 PostgreSQL 集群的高可用状态信息。&lt;/p&gt;
&lt;p&gt;Patroni 将通过 etcd，实现集群故障检测、自动故障转移、主从切换，集群配置管理等功能。&lt;/p&gt;
&lt;p&gt;etcd 对于 PostgreSQL 集群的高可用至关重要，而 etcd 本身的可用性与容灾，是通过使用多个分布式的节点来保证的。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="etcd集群使用多大规模合适"&gt;etcd集群使用多大规模合适？&lt;/h2&gt;
&lt;p&gt;如果超过集群成员数一半（包括正好一半）的 etcd 实例不可用，那么 etcd 集群将进入不可用状态，拒绝对外提供服务。&lt;/p&gt;
&lt;p&gt;例如：使用 3 节点的 etcd 集群允许最多一个节点宕机，而其他两个节点仍然可以正常工作；而使用 5 节点的 etcd 集群则可以容忍 2 节点失效。&lt;/p&gt;
&lt;p&gt;请注意，etcd 集群中的 &lt;strong&gt;学习者&lt;/strong&gt;（Learner）实例不计入成员数，因此在 3 节点 etcd 集群中，如果有一个学习者实例，那么实际上成员数量为 2，不能容忍任一节点失效。&lt;/p&gt;
&lt;p&gt;在生产环境中，我们建议使用奇数个 etcd 实例，对于生产环境，建议使用 3 节点或 5 节点的 etcd 集群部署以确保足够的可靠性。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="etcd集群不可用会有什么影响"&gt;etcd集群不可用会有什么影响？&lt;/h2&gt;
&lt;p&gt;如果 etcd 集群不可用，那么会影响 PostgreSQL 的管控平面，但不会影响数据平面 —— 现有的 PostgreSQL 集群将继续运行，但通过 Patroni 进行的管理操作将无法执行。&lt;/p&gt;
&lt;p&gt;etcd 故障期间，PostgreSQL 高可用将无法实现自动故障转移，您也无法使用 &lt;code&gt;patronictl&lt;/code&gt; 对 PostgreSQL 集群发起管理操作，例如修改配置，执行手动故障转移等。
通过 Ansible 发起的管理命令不受 etcd 故障影响：例如创建数据库，创建用户，刷新 HBA 与 Service 配置等，etcd 故障期间，您依然可以直接操作 PostgreSQL 集群来实现这些功能。&lt;/p&gt;</description></item></channel></rss>