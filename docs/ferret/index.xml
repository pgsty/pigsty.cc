<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>模块：FERRET on PIGSTY</title><link>https://pigsty.cc/docs/ferret/</link><description>Recent content in 模块：FERRET on PIGSTY</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://pigsty.cc/docs/ferret/index.xml" rel="self" type="application/rss+xml"/><item><title>使用方法</title><link>https://pigsty.cc/docs/ferret/usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/usage/</guid><description>&lt;p&gt;本文档介绍如何安装 MongoDB 客户端工具并连接到 FerretDB。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="安装客户端工具"&gt;安装客户端工具&lt;/h2&gt;
&lt;p&gt;您可以使用 MongoDB 的命令行工具 &lt;a href="https://www.mongodb.com/docs/mongodb-shell/"&gt;MongoSH&lt;/a&gt; 来访问 FerretDB。&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;pig&lt;/code&gt; 命令添加 MongoDB 仓库，然后使用 &lt;code&gt;yum&lt;/code&gt; 或 &lt;code&gt;apt&lt;/code&gt; 安装 &lt;code&gt;mongosh&lt;/code&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pig repo add mongo -u &lt;span style="color:#8f5902;font-style:italic"&gt;# 添加 MongoDB 官方仓库&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;yum install mongodb-mongosh &lt;span style="color:#8f5902;font-style:italic"&gt;# RHEL/CentOS/Rocky/Alma&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install mongodb-mongosh &lt;span style="color:#8f5902;font-style:italic"&gt;# Debian/Ubuntu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装完成后，您可以使用 &lt;code&gt;mongosh&lt;/code&gt; 命令连接到 FerretDB。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="连接到-ferretdb"&gt;连接到 FerretDB&lt;/h2&gt;
&lt;p&gt;您可以使用任何语言的 MongoDB 驱动程序通过 MongoDB 连接字符串访问 FerretDB。以下是使用 &lt;code&gt;mongosh&lt;/code&gt; CLI 工具的示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ mongosh &lt;span style="color:#4e9a06"&gt;&amp;#39;mongodb://postgres:DBUser.Postgres@10.10.10.10:27017&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Current Mongosh Log ID:	696b5bb93441875f86284d0b
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Connecting to:		mongodb://&amp;lt;credentials&amp;gt;@10.10.10.10:27017/?directConnection&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;true&lt;span style="color:#000;font-weight:bold"&gt;&amp;amp;&lt;/span&gt;&lt;span style="color:#000"&gt;appName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;mongosh+2.6.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Using MongoDB:		7.0.77
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Using Mongosh:		2.6.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;test&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="使用连接字符串"&gt;使用连接字符串&lt;/h3&gt;
&lt;p&gt;FerretDB 的身份验证完全基于 PostgreSQL。Pigsty 默认使用 &lt;code&gt;scram-sha-256&lt;/code&gt;，在 FerretDB 2.x 中对应 &lt;code&gt;SCRAM-SHA-256&lt;/code&gt; 认证。通常客户端会自动协商，你可以直接使用 PostgreSQL 用户名与密码。&lt;/p&gt;</description></item><item><title>集群配置</title><link>https://pigsty.cc/docs/ferret/config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/config/</guid><description>&lt;p&gt;在部署 FerretDB 集群之前，您需要使用相关 &lt;a href="https://pigsty.cc/docs/ferret/param"&gt;参数&lt;/a&gt; 在配置清单中定义它。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="ferretdb-集群"&gt;FerretDB 集群&lt;/h2&gt;
&lt;p&gt;以下示例使用默认单节点 &lt;code&gt;pg-meta&lt;/code&gt; 集群的 &lt;code&gt;postgres&lt;/code&gt; 数据库作为 FerretDB 的底层存储：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;children&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#----------------------------------#&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ferretdb for mongodb on postgresql&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#----------------------------------#&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ./mongo.yml -l ferret&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;ferret&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;{&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_seq&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;1&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;}&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_cluster&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;ferret&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_pgurl&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;postgres://dbuser_dba:DBUser.DBA@10.10.10.10:5432/postgres&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里，&lt;a href="https://pigsty.cc/docs/ferret/param#mongo_cluster"&gt;&lt;code&gt;mongo_cluster&lt;/code&gt;&lt;/a&gt; 和 &lt;a href="https://pigsty.cc/docs/ferret/param#mongo_seq"&gt;&lt;code&gt;mongo_seq&lt;/code&gt;&lt;/a&gt; 是基本的身份参数。对于 FerretDB，还需要 &lt;a href="https://pigsty.cc/docs/ferret/param#mongo_pgurl"&gt;&lt;code&gt;mongo_pgurl&lt;/code&gt;&lt;/a&gt; 来指定底层 PostgreSQL 的位置。&lt;/p&gt;
&lt;p&gt;请注意，&lt;code&gt;mongo_pgurl&lt;/code&gt; 参数需要一个 PostgreSQL &lt;strong&gt;超级用户&lt;/strong&gt;。此示例使用默认的 &lt;code&gt;dbuser_dba&lt;/code&gt;，生产环境中也可以改用专用超级用户。&lt;/p&gt;
&lt;p&gt;请注意，FerretDB 的 &lt;a href="https://docs.ferretdb.io/security/authentication/"&gt;身份验证&lt;/a&gt; 完全基于 PostgreSQL。您可以使用 FerretDB 或 PostgreSQL 创建其他常规用户。&lt;/p&gt;</description></item><item><title>参数列表</title><link>https://pigsty.cc/docs/ferret/param/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/param/</guid><description>&lt;h2 id="参数概览"&gt;参数概览&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;FERRET&lt;/code&gt;&lt;/strong&gt; 参数组用于 FerretDB 部署与配置，包括身份标识、底层 PostgreSQL 连接、监听端口以及 SSL 设置。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;参数&lt;/th&gt;
 &lt;th style="text-align: center"&gt;类型&lt;/th&gt;
 &lt;th style="text-align: center"&gt;级别&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_seq"&gt;&lt;code&gt;mongo_seq&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;int&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;I&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;mongo 实例号，必选身份参数&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_cluster"&gt;&lt;code&gt;mongo_cluster&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;mongo 集群名，必选身份参数&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_pgurl"&gt;&lt;code&gt;mongo_pgurl&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;pgurl&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C/I&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;FerretDB 底层使用的 PGURL 连接串&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_ssl_enabled"&gt;&lt;code&gt;mongo_ssl_enabled&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;bool&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;是否启用 SSL？默认为 &lt;code&gt;false&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_listen"&gt;&lt;code&gt;mongo_listen&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;ip&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;监听地址，默认留空则监听所有地址&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_port"&gt;&lt;code&gt;mongo_port&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;port&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;服务端口，默认使用 &lt;code&gt;27017&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_ssl_port"&gt;&lt;code&gt;mongo_ssl_port&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;port&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;TLS 监听端口，默认使用 &lt;code&gt;27018&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_exporter_port"&gt;&lt;code&gt;mongo_exporter_port&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;port&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Exporter 端口，默认使用 &lt;code&gt;9216&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#mongo_extra_vars"&gt;&lt;code&gt;mongo_extra_vars&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;额外环境变量，默认为空白字符串&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="默认值"&gt;默认值&lt;/h2&gt;
&lt;p&gt;默认参数定义在 &lt;a href="https://github.com/pgsty/pigsty/blob/v4.1.0/roles/ferret/defaults/main.yml"&gt;&lt;code&gt;roles/ferret/defaults/main.yml&lt;/code&gt;&lt;/a&gt; 中：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo_cluster: #CLUSTER # mongo 集群名称，必选身份参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo_seq: 0 #INSTANCE # mongo 实例序列号，必选身份参数&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo_pgurl: &amp;#39;postgres:///&amp;#39; # mongo/ferretdb 底层 postgresql url，必选&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_ssl_enabled&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb ssl 启用，默认为 false&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_listen&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb 监听地址，&amp;#39;&amp;#39; 表示所有地址&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_port&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;27017&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb 监听端口，默认为 27017&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_ssl_port&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;27018&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb tls 监听端口，默认为 27018&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_exporter_port&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;9216&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb exporter 端口，默认为 9216&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;mongo_extra_vars&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# mongo/ferretdb 的额外环境变量&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="mongo_cluster"&gt;&lt;code&gt;mongo_cluster&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;参数名称：&lt;code&gt;mongo_cluster&lt;/code&gt;，类型：&lt;code&gt;string&lt;/code&gt;，级别：&lt;code&gt;C&lt;/code&gt;&lt;/p&gt;</description></item><item><title>管理预案</title><link>https://pigsty.cc/docs/ferret/admin/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/admin/</guid><description>&lt;p&gt;本文档介绍 FerretDB 集群的日常管理操作。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="创建-ferretdb-集群"&gt;创建 FerretDB 集群&lt;/h2&gt;
&lt;p&gt;在 &lt;a href="https://pigsty.cc/docs/setup/config"&gt;配置清单&lt;/a&gt; 中 &lt;a href="https://pigsty.cc/docs/ferret/config"&gt;定义&lt;/a&gt; FerretDB 集群后，您可以使用以下命令安装它：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./mongo.yml -l ferret &lt;span style="color:#8f5902;font-style:italic"&gt;# 在 ferret 分组上安装 FerretDB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;由于 FerretDB 使用 PostgreSQL 作为其底层存储，多次运行此剧本通常是安全的（幂等性）。&lt;/p&gt;
&lt;p&gt;FerretDB 服务配置了失败自动重启（&lt;code&gt;Restart=on-failure&lt;/code&gt;），为这个无状态代理层提供了基本的容错能力。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="移除-ferretdb-集群"&gt;移除 FerretDB 集群&lt;/h2&gt;
&lt;p&gt;要移除 FerretDB 集群，请使用 &lt;code&gt;mongo_purge&lt;/code&gt; 参数运行 &lt;a href="https://pigsty.cc/docs/ferret/playbook#mongoyml"&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt; 剧本的 &lt;code&gt;mongo_purge&lt;/code&gt; 子任务：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./mongo.yml -l ferret -e &lt;span style="color:#000"&gt;mongo_purge&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#204a87"&gt;true&lt;/span&gt; -t mongo_purge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;重要&lt;/strong&gt;：请务必使用 &lt;code&gt;-l &amp;lt;cluster&amp;gt;&lt;/code&gt; 参数限制执行范围，避免误删其他集群。&lt;/p&gt;
&lt;p&gt;此命令将会：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;停止 FerretDB 服务&lt;/li&gt;
&lt;li&gt;移除 systemd 服务文件&lt;/li&gt;
&lt;li&gt;清理配置文件和证书&lt;/li&gt;
&lt;li&gt;从 Prometheus 监控中注销&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="连接到-ferretdb"&gt;连接到 FerretDB&lt;/h2&gt;
&lt;p&gt;您可以使用 MongoDB 连接串，用任何语言的 MongoDB 驱动访问 FerretDB。以下是使用 &lt;a href="https://pigsty.cc/docs/ferret/usage#%E5%AE%89%E8%A3%85%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E5%85%B7"&gt;&lt;code&gt;mongosh&lt;/code&gt;&lt;/a&gt; 命令行工具的示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mongosh &lt;span style="color:#4e9a06"&gt;&amp;#39;mongodb://dbuser_meta:DBUser.Meta@10.10.10.10:27017&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mongosh &lt;span style="color:#4e9a06"&gt;&amp;#39;mongodb://test:test@10.10.10.11:27017/test&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pigsty 管理的 PostgreSQL 集群默认使用 &lt;code&gt;scram-sha-256&lt;/code&gt;。FerretDB 2.x 对应使用 &lt;code&gt;SCRAM-SHA-256&lt;/code&gt; 认证，绝大多数客户端会自动协商；如果遇到协商失败，可在连接串中显式追加 &lt;code&gt;authMechanism=SCRAM-SHA-256&lt;/code&gt;。参阅 &lt;a href="https://docs.ferretdb.io/security/authentication/"&gt;FerretDB：认证&lt;/a&gt; 获取详细信息。&lt;/p&gt;</description></item><item><title>管理剧本</title><link>https://pigsty.cc/docs/ferret/playbook/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/playbook/</guid><description>&lt;p&gt;Pigsty 提供了一个内置剧本 &lt;a href="https://github.com/pgsty/pigsty/blob/v4.1.0/mongo.yml"&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt; 用于在节点上安装 FerretDB。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;重要说明&lt;/strong&gt;：此剧本仅在定义了 &lt;a href="https://pigsty.cc/docs/ferret/param#mongo_seq"&gt;&lt;code&gt;mongo_seq&lt;/code&gt;&lt;/a&gt; 参数的主机上执行。
对于未定义 &lt;code&gt;mongo_seq&lt;/code&gt; 的主机，剧本会安全跳过所有任务，因此可以安全地在混合主机组上运行。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="mongoyml"&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;剧本地址：&lt;a href="https://github.com/pgsty/pigsty/blob/v4.1.0/mongo.yml"&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;功能说明：在定义了 &lt;code&gt;mongo_seq&lt;/code&gt; 的目标主机上安装 MongoDB/FerretDB。&lt;/p&gt;
&lt;p&gt;此剧本包含以下子任务：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;子任务&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_check&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;检查 mongo 身份参数&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_dbsu&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;创建操作系统用户 mongod&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_install&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装 ferretdb RPM/DEB 包&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_purge&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;清理现有 FerretDB（默认不执行）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_config&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;配置 FerretDB 服务&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_cert&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;签发 FerretDB SSL 证书&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_launch&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;启动 FerretDB 服务&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;mongo_register&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;将 FerretDB 注册到 Prometheus&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="任务详解"&gt;任务详解&lt;/h2&gt;
&lt;h3 id="mongo_check"&gt;&lt;code&gt;mongo_check&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;检查必选的身份参数是否已定义：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mongo_cluster&lt;/code&gt;：集群名称&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_seq&lt;/code&gt;：实例序号&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_pgurl&lt;/code&gt;：PostgreSQL 连接串&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果任一参数缺失，剧本将报错退出。&lt;/p&gt;
&lt;h3 id="mongo_dbsu"&gt;&lt;code&gt;mongo_dbsu&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;创建 FerretDB 运行所需的操作系统用户和组：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;创建 &lt;code&gt;mongod&lt;/code&gt; 用户组&lt;/li&gt;
&lt;li&gt;创建 &lt;code&gt;mongod&lt;/code&gt; 用户，家目录为 &lt;code&gt;/var/lib/mongod&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="mongo_install"&gt;&lt;code&gt;mongo_install&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;安装 FerretDB 软件包：&lt;/p&gt;</description></item><item><title>监控告警</title><link>https://pigsty.cc/docs/ferret/monitor/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/monitor/</guid><description>&lt;p&gt;&lt;a href="https://pigsty.cc/docs/ferret"&gt;&lt;code&gt;FERRET&lt;/code&gt;&lt;/a&gt; 模块目前提供了一个监控仪表板。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="mongo-overview"&gt;Mongo Overview&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://demo.pigsty.cc/d/mongo-overview"&gt;Mongo Overview&lt;/a&gt;：Mongo/FerretDB 集群概览&lt;/p&gt;
&lt;p&gt;这个监控面板提供了关于 FerretDB 的基本监控指标，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;实例状态&lt;/strong&gt;：FerretDB 实例的运行状态&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;客户端连接&lt;/strong&gt;：客户端连接数量和请求统计&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;资源使用&lt;/strong&gt;：CPU、内存、Goroutine 数量等&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PostgreSQL 连接池&lt;/strong&gt;：后端 PostgreSQL 连接池状态&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://demo.pigsty.cc/d/mongo-overview"&gt;&lt;img src="https://pigsty.cc/img/dashboard/mongo-overview.jpg" alt="mongo-overview.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;由于 FerretDB 底层使用 PostgreSQL 作为存储引擎，更多的监控指标请参考 &lt;a href="https://pigsty.cc/docs/pgsql/monitor"&gt;PostgreSQL 监控&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="监控指标"&gt;监控指标&lt;/h2&gt;
&lt;p&gt;FerretDB 通过内置的 Exporter 在 &lt;a href="https://pigsty.cc/docs/ferret/param#mongo_exporter_port"&gt;&lt;code&gt;mongo_exporter_port&lt;/code&gt;&lt;/a&gt;（默认 9216）端口暴露 Prometheus 格式的监控指标。&lt;/p&gt;
&lt;p&gt;关键指标类别包括：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;指标前缀&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;ferretdb_*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;FerretDB 核心指标&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;ferretdb_client_*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;客户端连接和请求统计&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;ferretdb_postgresql_*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 后端状态&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;go_*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Go 运行时指标&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;process_*&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;进程级别指标&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;完整的指标列表请参阅 &lt;a href="https://pigsty.cc/docs/ferret/metric"&gt;指标列表&lt;/a&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="告警规则"&gt;告警规则&lt;/h2&gt;
&lt;p&gt;Pigsty v4.1 默认规则集中未内置专门的 FerretDB 告警规则（&lt;code&gt;files/victoria/rules/*.yml&lt;/code&gt;）。您可以基于 &lt;code&gt;ferretdb_up&lt;/code&gt; 指标按需添加自定义告警，例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- &lt;span style="color:#204a87;font-weight:bold"&gt;alert&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;FerretDBDown&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;expr&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;ferretdb_up == 0&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;for&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;1m&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;labels&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;severity&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;critical&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;annotations&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;summary&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;FerretDB instance {{ $labels.ins }} is down&amp;#34;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;description&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;FerretDB instance {{ $labels.ins }} on {{ $labels.ip }} has been down for more than 1 minute.&amp;#34;&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;由于 FerretDB 是无状态的代理层，主要的监控和告警应集中在底层 PostgreSQL 集群。&lt;/p&gt;</description></item><item><title>指标列表</title><link>https://pigsty.cc/docs/ferret/metric/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/metric/</guid><description>&lt;p&gt;&lt;a href="https://pigsty.cc/docs/ferret"&gt;&lt;strong&gt;&lt;code&gt;MONGO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模块包含有 54 类可用监控指标。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Metric Name&lt;/th&gt;
 &lt;th&gt;Type&lt;/th&gt;
 &lt;th&gt;Labels&lt;/th&gt;
 &lt;th&gt;Description&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_accepts_total&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_duration_seconds_bucket&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;le&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_duration_seconds_count&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_duration_seconds_sum&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_requests_total&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;opcode&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_client_responses_total&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;result&lt;/code&gt;, &lt;code&gt;argument&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;opcode&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_postgresql_metadata_databases&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;The current number of database in the registry.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_postgresql_pool_size&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;The current number of pools.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ferretdb_up&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;version&lt;/code&gt;, &lt;code&gt;commit&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;dirty&lt;/code&gt;, &lt;code&gt;telemetry&lt;/code&gt;, &lt;code&gt;package&lt;/code&gt;, &lt;code&gt;update_available&lt;/code&gt;, &lt;code&gt;uuid&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;, &lt;code&gt;branch&lt;/code&gt;, &lt;code&gt;debug&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;FerretDB instance state.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_gc_duration_seconds&lt;/td&gt;
 &lt;td&gt;summary&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;quantile&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;A summary of the pause duration of garbage collection cycles.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_gc_duration_seconds_count&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_gc_duration_seconds_sum&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_goroutines&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of goroutines that currently exist.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_info&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;version&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Information about the Go environment.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_alloc_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes allocated and still in use.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_alloc_bytes_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of bytes allocated, even if freed.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_buck_hash_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes used by the profiling bucket hash table.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_frees_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of frees.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_gc_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes used for garbage collection system metadata.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_alloc_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes allocated and still in use.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_idle_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes waiting to be used.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_inuse_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes that are in use.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_objects&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of allocated objects.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_released_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes released to OS.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_heap_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes obtained from system.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_last_gc_time_seconds&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of seconds since 1970 of last garbage collection.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_lookups_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of pointer lookups.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_mallocs_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of mallocs.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_mcache_inuse_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes in use by mcache structures.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_mcache_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes used for mcache structures obtained from system.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_mspan_inuse_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes in use by mspan structures.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_mspan_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes used for mspan structures obtained from system.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_next_gc_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of heap bytes when next garbage collection will take place.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_other_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes used for other system allocations.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_stack_inuse_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes in use by the stack allocator.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_stack_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes obtained from system for stack allocator.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_memstats_sys_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of bytes obtained from system.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;go_threads&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of OS threads created.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;mongo_up&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_cpu_seconds_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total user and system CPU time spent in seconds.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_max_fds&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Maximum number of open file descriptors.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_open_fds&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Number of open file descriptors.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_resident_memory_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Resident memory size in bytes.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_start_time_seconds&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Start time of the process since unix epoch in seconds.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_virtual_memory_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Virtual memory size in bytes.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;process_virtual_memory_max_bytes&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Maximum amount of virtual memory available in bytes.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;promhttp_metric_handler_errors_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;job&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;cause&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of internal errors encountered by the promhttp metric handler.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;promhttp_metric_handler_requests_in_flight&lt;/td&gt;
 &lt;td&gt;gauge&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Current number of scrapes being served.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;promhttp_metric_handler_requests_total&lt;/td&gt;
 &lt;td&gt;counter&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;job&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;code&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;Total number of scrapes by HTTP status code.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;scrape_duration_seconds&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;scrape_samples_post_metric_relabeling&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;scrape_samples_scraped&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;scrape_series_added&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;up&lt;/td&gt;
 &lt;td&gt;Unknown&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;N/A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>常见问题</title><link>https://pigsty.cc/docs/ferret/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/ferret/faq/</guid><description>&lt;hr&gt;
&lt;h2 id="为什么要使用-ferretdb"&gt;为什么要使用 FerretDB？&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.mongodb.com/licensing/server-side-public-license/faq"&gt;MongoDB&lt;/a&gt; &lt;strong&gt;曾经&lt;/strong&gt; 是一项令人惊叹的技术，让开发者能够抛开关系型数据库的&amp;quot;模式束缚&amp;quot;，快速构建应用程序。
然而随着时间推移，MongoDB 放弃了它的开源本质，将许可证更改为 SSPL，这使得许多开源项目和早期商业项目无法使用它。
大多数 MongoDB 用户其实并不需要 MongoDB 提供的高级功能，但他们确实需要一个易于使用的开源文档数据库解决方案。为了填补这个空白，&lt;a href="https://ferretdb.io"&gt;FerretDB&lt;/a&gt; 应运而生。&lt;/p&gt;
&lt;p&gt;PostgreSQL 的 JSON 功能支持已经足够完善了：二进制存储 JSONB，GIN 任意字段索引，各种 JSON 处理函数，JSON PATH 和 JSON Schema，它早已是一个功能完备，性能强大的文档数据库。
但是提供替代的功能，与 &lt;strong&gt;直接仿真&lt;/strong&gt; 还是不一样的。FerretDB 可以为使用 MongoDB 驱动的应用程序提供一个丝滑迁移到 PostgreSQL 的过渡方案。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="pigsty-对-ferretdb-的支持历史"&gt;Pigsty 对 FerretDB 的支持历史？&lt;/h2&gt;
&lt;p&gt;Pigsty 从 1.x 开始就提供了基于 Docker 的 FerretDB 模板，在 v2.3 中提供了原生部署支持。
它作为一个选装项，对丰富 PostgreSQL 生态大有裨益。Pigsty 社区已经与 FerretDB 社区成为了合作伙伴，后续将进行深度的合作与适配支持。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;FERRET&lt;/strong&gt; 是 Pigsty 中的一个 &lt;strong&gt;可选&lt;/strong&gt; 模块。自 v2.0 以来，它需要 &lt;a href="https://pgext.cloud/e/documentdb"&gt;&lt;code&gt;documentdb&lt;/code&gt;&lt;/a&gt; 扩展才能工作。
Pigsty 已经打包了这个扩展，并提供了一个 &lt;a href="https://github.com/pgsty/pigsty/blob/v4.1.0/conf/mongo.yml"&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt; 模板，帮助您轻松部署 FerretDB 集群。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="安装-mongosh"&gt;安装 MongoSH&lt;/h2&gt;
&lt;p&gt;您可以使用 &lt;a href="https://www.mongodb.com/docs/mongodb-shell/"&gt;MongoSH&lt;/a&gt; 作为客户端工具访问 FerretDB 集群。&lt;/p&gt;</description></item></channel></rss>