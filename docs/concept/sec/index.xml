<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>å®‰å…¨åˆè§„ on PIGSTY</title><link>https://pigsty.cc/docs/concept/sec/</link><description>Recent content in å®‰å…¨åˆè§„ on PIGSTY</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://pigsty.cc/docs/concept/sec/index.xml" rel="self" type="application/rss+xml"/><item><title>ä¸ƒå±‚å®‰å…¨æ¨¡å‹</title><link>https://pigsty.cc/docs/concept/sec/level/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/level/</guid><description>&lt;p&gt;å®‰å…¨ä¸æ˜¯ä¸€é“å¢™ï¼Œè€Œæ˜¯ä¸€åº§åŸã€‚Pigsty é‡‡ç”¨&lt;strong&gt;çºµæ·±é˜²å¾¡&lt;/strong&gt;ç­–ç•¥ï¼Œåœ¨ä¸ƒä¸ªå±‚æ¬¡ä¸Šæ„å»ºå¤šé‡ä¿æŠ¤ï¼Œå³ä½¿æŸä¸€å±‚è¢«çªç ´ï¼Œä»æœ‰å…¶ä»–å±‚æä¾›ä¿æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§åˆ†å±‚æ€è·¯è§£å†³ä¸‰ç±»æ ¸å¿ƒé£é™©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾¹ç•Œè¢«çªç ´&lt;/strong&gt;ï¼šé™ä½â€œå•ç‚¹å¤±å®ˆå¯¼è‡´å…¨ç›˜å¤±å®ˆâ€çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨æ»¥ç”¨&lt;/strong&gt;ï¼šå³ä½¿å†…éƒ¨è´¦å·è¢«ç›—ï¼Œä¹Ÿèƒ½é€šè¿‡æœ€å°æƒé™é™åˆ¶ç ´åèŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯é¢„æœŸæ•…éšœ&lt;/strong&gt;ï¼šç¡¬ä»¶ã€è½¯ä»¶ã€äººä¸ºé”™è¯¯éƒ½èƒ½è¢«â€œå¤šå±‚å…œåº•â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ¦‚è§ˆ"&gt;æ¦‚è§ˆ&lt;/h2&gt;
&lt;div id="infographic-296a28376e55bf0bd7d2bce937b065d7" class="infographic-container td-max-width-on-larger-screens"&gt;&lt;/div&gt;

&lt;script&gt;
(function() {
 var containerId = 'infographic-296a28376e55bf0bd7d2bce937b065d7';
 var syntax = "````\ninfographic sequence-pyramid-simple\ndata\n title ä¸ƒå±‚å®‰å…¨æ¨¡å‹\n desc Pigsty çºµæ·±é˜²å¾¡ä½“ç³»ï¼šä»ç‰©ç†åˆ°ç”¨æˆ·çš„å¤šå±‚ä¿æŠ¤\n items\n - label ç‰©ç†ä¸ä»‹è´¨\n value 100\n desc æ•°æ®æ ¡éªŒå’Œ Â· ä»‹è´¨ç›—å–é˜²æŠ¤\n time L1\n icon mingcute/building-4-fill\n illus server-cluster\n - label ç½‘ç»œå®‰å…¨\n value 95\n desc é˜²ç«å¢™ Â· ç›‘å¬æ”¶æ•› Â· TLS\n time L2\n icon mingcute/earth-2-fill\n illus secure-server\n - label è¾¹ç•Œå®‰å…¨\n value 90\n desc HAProxy Â· Nginx Â· ç»Ÿä¸€å…¥å£\n time L3\n icon mingcute/shield-fill\n illus firewall-protection\n - label ä¸»æœºå®‰å…¨\n value 85\n desc SELinux Â· æœ€å°æƒé™ Â· ç³»ç»ŸåŠ å›º\n time L4\n icon mingcute/computer-fill\n illus server-status\n - label åº”ç”¨å®‰å…¨\n value 80\n desc HBA Â· SCRAM Â· å¯†ç ç­–ç•¥\n time L5\n icon mingcute/safe-box-fill\n illus database-security\n - label æ•°æ®å®‰å…¨\n value 75\n desc å¤‡ä»½åŠ å¯† Â· PITR Â· å®¡è®¡\n time L6\n icon mingcute/lock-fill\n illus data-encryption\n - label ç”¨æˆ·å®‰å…¨\n value 70\n desc RBAC Â· é»˜è®¤æƒé™ Â· éš”ç¦»\n time L7\n icon mingcute/user-security-fill\n illus user-flow\ntheme light\n palette pigsty\n````";

 function renderInfographic() {
 var dom = document.getElementById(containerId);
 if (!dom) { console.error('Infographic: container not found:', containerId); return; }
 try {
 var ig = new AntVInfographic.Infographic({
 container: '#' + containerId,
 width: dom.offsetWidth || '100%',
 height: 'auto',
 });
 ig.render(syntax);
 } catch (e) {
 console.error('Infographic render error:', e);
 dom.innerHTML = '&lt;pre style="color: red;"&gt;Infographic Error: ' + e.message + '&lt;/pre&gt;';
 }
 }

 
 if (typeof AntVInfographic !== 'undefined') {
 renderInfographic();
 } else if (!window._infographicLoading) {
 window._infographicLoading = true;
 window._infographicCallbacks = [renderInfographic];
 var script = document.createElement('script');
 script.src = '/js/infographic.min.js';
 script.onload = function() {
 window._infographicCallbacks.forEach(function(cb) { cb(); });
 };
 document.head.appendChild(script);
 } else {
 window._infographicCallbacks.push(renderInfographic);
 }
})();
&lt;/script&gt;

&lt;hr&gt;
&lt;h2 id="l1-ç‰©ç†ä¸ä»‹è´¨å®‰å…¨"&gt;L1 ç‰©ç†ä¸ä»‹è´¨å®‰å…¨&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‰©ç†å±‚å¤±å®ˆæ—¶ï¼Œå”¯ä¸€çš„å¯¹æŠ—æ‰‹æ®µæ˜¯æ•°æ®æœ¬èº«çš„è‡ªæˆ‘ä¿æŠ¤ã€‚&lt;/p&gt;</description></item><item><title>èº«ä»½è®¤è¯</title><link>https://pigsty.cc/docs/concept/sec/auth/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/auth/</guid><description>&lt;p&gt;èº«ä»½è®¤è¯è§£å†³ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½ æ˜¯è°&lt;/strong&gt;ï¼šèº«ä»½æ˜¯å¦å”¯ä¸€å¯è¯†åˆ«ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½ æ€ä¹ˆè¯æ˜&lt;/strong&gt;ï¼šå¯†ç /è¯ä¹¦æ˜¯å¦è¶³å¤Ÿå®‰å…¨ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½ ä»å“ªé‡Œæ¥&lt;/strong&gt;ï¼šæ¥æºæ˜¯å¦å—æ§ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty ä½¿ç”¨ &lt;strong&gt;HBA è§„åˆ™ + å¯†ç /è¯ä¹¦&lt;/strong&gt; å®Œæˆèº«ä»½è®¤è¯ï¼Œå¹¶ä»¥ SCRAM ä¸ºé»˜è®¤å¯†ç å“ˆå¸Œæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="è®¤è¯é“¾è·¯"&gt;è®¤è¯é“¾è·¯&lt;/h2&gt;
&lt;pre class="mermaid"&gt;flowchart LR
 C[å®¢æˆ·ç«¯] --&amp;gt; HBA[HBA è§„åˆ™]
 HBA --&amp;gt; A1[å¯†ç  SCRAM]
 HBA --&amp;gt; A2[è¯ä¹¦è®¤è¯]
 HBA --&amp;gt; A3[æœ¬åœ° ident/peer]
 A1 --&amp;gt; RBAC[è§’è‰²ä¸æƒé™]
 A2 --&amp;gt; RBAC
 A3 --&amp;gt; RBAC&lt;/pre&gt;
&lt;p&gt;HBA å†³å®šâ€œ&lt;strong&gt;è°èƒ½ä»å“ªé‡Œæ¥&lt;/strong&gt;â€ï¼Œè®¤è¯æ–¹å¼å†³å®šâ€œ&lt;strong&gt;å¦‚ä½•è¯æ˜èº«ä»½&lt;/strong&gt;â€ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="hba-åˆ†å±‚æ¨¡å‹"&gt;HBA åˆ†å±‚æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;Pigsty é»˜è®¤ HBA è§„åˆ™å·²ç»åˆ†å±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°&lt;/strong&gt;ä½¿ç”¨ &lt;code&gt;ident/peer&lt;/code&gt;ï¼Œæœ€å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…ç½‘&lt;/strong&gt;ä½¿ç”¨ &lt;code&gt;scram&lt;/code&gt; å¯†ç è®¤è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–ç½‘ç®¡ç†å‘˜&lt;/strong&gt;å¿…é¡»èµ° &lt;code&gt;ssl&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™è§£å†³äº†â€œ&lt;strong&gt;åŒä¸€ä¸ªç”¨æˆ·åœ¨ä¸åŒæ¥æºä½¿ç”¨ä¸åŒè®¤è¯å¼ºåº¦&lt;/strong&gt;â€çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HBA è§„åˆ™çš„å…³é”®èƒ½åŠ›&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¡ºåºä¼˜å…ˆ&lt;/strong&gt;ï¼šæ”¯æŒ &lt;code&gt;order&lt;/code&gt; æ’åºï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€åˆ«å&lt;/strong&gt;ï¼š&lt;code&gt;local&lt;/code&gt; / &lt;code&gt;localhost&lt;/code&gt; / &lt;code&gt;intra&lt;/code&gt; / &lt;code&gt;world&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§’è‰²æ¡ä»¶&lt;/strong&gt;ï¼š&lt;code&gt;primary/replica/offline&lt;/code&gt; å¯ç²¾ç»†åŒ–æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="å¯†ç è®¤è¯"&gt;å¯†ç è®¤è¯&lt;/h2&gt;
&lt;p&gt;é»˜è®¤å¯†ç å“ˆå¸Œç®—æ³•ï¼š&lt;/p&gt;</description></item><item><title>è®¿é—®æ§åˆ¶</title><link>https://pigsty.cc/docs/concept/sec/ac/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/ac/</guid><description>&lt;p&gt;è®¿é—®æ§åˆ¶è§£å†³ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½ èƒ½åšä»€ä¹ˆ&lt;/strong&gt;ï¼šè¯»/å†™/DDL çš„æƒé™è¾¹ç•Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½ èƒ½è®¿é—®å“ªäº›æ•°æ®&lt;/strong&gt;ï¼šè·¨åº“ã€è·¨æ¨¡å¼çš„éš”ç¦»è¾¹ç•Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty é€šè¿‡ &lt;strong&gt;RBAC è§’è‰²ä½“ç³» + é»˜è®¤æƒé™ç­–ç•¥&lt;/strong&gt; å°†â€œæœ€å°æƒé™â€è½å®ä¸ºé»˜è®¤è¡Œä¸ºã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å››å±‚è§’è‰²æ¨¡å‹"&gt;å››å±‚è§’è‰²æ¨¡å‹&lt;/h2&gt;
&lt;pre class="mermaid"&gt;flowchart TB
 subgraph Admin[&amp;#34;dbrole_adminï¼ˆç®¡ç†å‘˜ï¼‰&amp;#34;]
 A1[&amp;#34;å¯æ‰§è¡Œ DDL / CREATE / ALTER&amp;#34;]
 A2[&amp;#34;ç»§æ‰¿ dbrole_readwrite&amp;#34;]
 end
 subgraph RW[&amp;#34;dbrole_readwriteï¼ˆè¯»å†™ï¼‰&amp;#34;]
 RW1[&amp;#34;å¯ INSERT/UPDATE/DELETE&amp;#34;]
 RW2[&amp;#34;ç»§æ‰¿ dbrole_readonly&amp;#34;]
 end
 subgraph RO[&amp;#34;dbrole_readonlyï¼ˆåªè¯»ï¼‰&amp;#34;]
 RO1[&amp;#34;å¯ SELECT æ‰€æœ‰è¡¨&amp;#34;]
 end
 subgraph Offline[&amp;#34;dbrole_offlineï¼ˆç¦»çº¿ï¼‰&amp;#34;]
 OFF1[&amp;#34;ä»…ç¦»çº¿å®ä¾‹å¯ç”¨&amp;#34;]
 end

 Admin --&amp;gt; RW --&amp;gt; RO&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”Ÿäº§è´¦å·å¤©ç„¶æ‹¥æœ‰è¿‡é«˜æƒé™&lt;/li&gt;
&lt;li&gt;DDL ä¸ DML ä¸åˆ†ç¦»å¯¼è‡´è¯¯æ“ä½œé£é™©&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="é»˜è®¤è§’è‰²ä¸ç³»ç»Ÿç”¨æˆ·"&gt;é»˜è®¤è§’è‰²ä¸ç³»ç»Ÿç”¨æˆ·&lt;/h2&gt;
&lt;p&gt;Pigsty é»˜è®¤æä¾›å››ä¸ªè§’è‰²ä¸å››ä¸ªç³»ç»Ÿç”¨æˆ·ï¼ˆæ¥è‡ªæºç é»˜è®¤å€¼ï¼‰ï¼š&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;è§’è‰²/ç”¨æˆ·&lt;/th&gt;
 &lt;th&gt;å±æ€§&lt;/th&gt;
 &lt;th&gt;ç»§æ‰¿/è§’è‰²&lt;/th&gt;
 &lt;th&gt;æè¿°&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;å…¨å±€åªè¯»è®¿é—®&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_offline&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;å—é™åªè¯»ï¼ˆç¦»çº¿å®ä¾‹ï¼‰&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readwrite&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;å…¨å±€è¯»å†™è®¿é—®&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readwrite&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;ç®¡ç†å‘˜ / å¯¹è±¡åˆ›å»º&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;ç³»ç»Ÿè¶…çº§ç”¨æˆ·&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;replicator&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;REPLICATION&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;å¤åˆ¶ç”¨æˆ·&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_dba&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbrole_admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;ç®¡ç†å‘˜ç”¨æˆ·&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_monitor&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;-&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_monitor, dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;ç›‘æ§ç”¨æˆ·&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™å¥—é»˜è®¤è§’è‰²å¯ä»¥è¦†ç›–ç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ã€‚&lt;/p&gt;</description></item><item><title>åŠ å¯†é€šä¿¡ä¸æœ¬åœ° CA</title><link>https://pigsty.cc/docs/concept/sec/ca/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/ca/</guid><description>&lt;p&gt;åŠ å¯†é€šä¿¡è§£å†³ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çªƒå¬&lt;/strong&gt;ï¼šé˜²æ­¢æ˜æ–‡æµé‡è¢«ç›‘å¬&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯¡æ”¹&lt;/strong&gt;ï¼šé˜²æ­¢ä¸­é—´äººä¿®æ”¹æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†’å……&lt;/strong&gt;ï¼šé˜²æ­¢æœåŠ¡ç«¯/å®¢æˆ·ç«¯è¢«ä¼ªé€ &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pigsty é€šè¿‡ &lt;strong&gt;æœ¬åœ° CA + TLS&lt;/strong&gt; ä¸ºæ•°æ®åº“ä¸åŸºç¡€è®¾æ–½ç»„ä»¶æä¾›ç»Ÿä¸€çš„ä¿¡ä»»æ ¹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="æœ¬åœ°-ca-çš„ä½œç”¨"&gt;æœ¬åœ° CA çš„ä½œç”¨&lt;/h2&gt;
&lt;p&gt;Pigsty é»˜è®¤ä¼šåœ¨ç®¡ç†èŠ‚ç‚¹ç”Ÿæˆè‡ªç­¾ CAï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;files/pki/ca/ca.key # CA ç§é’¥ï¼ˆå¿…é¡»ä¸¥æ ¼ä¿æŠ¤ï¼‰
files/pki/ca/ca.crt # CA æ ¹è¯ä¹¦ï¼ˆå¯åˆ†å‘ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æºç é»˜è®¤å€¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ca_create: true&lt;/code&gt;ï¼šæ‰¾ä¸åˆ° CA æ—¶è‡ªåŠ¨ç”Ÿæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ca_cn: pigsty-ca&lt;/code&gt;ï¼šCA è¯ä¹¦ CN å›ºå®šä¸º &lt;code&gt;pigsty-ca&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹è¯ä¹¦æœ‰æ•ˆæœŸçº¦ 100 å¹´ï¼ˆè‡ªç­¾ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç”± CA ç­¾å‘çš„æœåŠ¡å™¨/å®¢æˆ·ç«¯è¯ä¹¦æœ‰æ•ˆæœŸ &lt;code&gt;cert_validity: 7300d&lt;/code&gt;ï¼ˆ20 å¹´ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="è¯ä¹¦è¦†ç›–èŒƒå›´"&gt;è¯ä¹¦è¦†ç›–èŒƒå›´&lt;/h2&gt;
&lt;p&gt;æœ¬åœ° CA ä¼šç­¾å‘å¤šç§ç»„ä»¶è¯ä¹¦ï¼Œç»Ÿä¸€ä¿¡ä»»é“¾ï¼š&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç»„ä»¶&lt;/th&gt;
 &lt;th&gt;ç›®çš„&lt;/th&gt;
 &lt;th&gt;å…¸å‹è·¯å¾„&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL / PgBouncer&lt;/td&gt;
 &lt;td&gt;è¿æ¥åŠ å¯†&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;/pg/cert/&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Patroni&lt;/td&gt;
 &lt;td&gt;API é€šä¿¡&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;/pg/cert/&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;etcd&lt;/td&gt;
 &lt;td&gt;DCS åŠ å¯†&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;/etc/etcd/&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;MinIO&lt;/td&gt;
 &lt;td&gt;å¯¹è±¡å­˜å‚¨ HTTPS&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;~minio/.minio/certs/&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Nginx&lt;/td&gt;
 &lt;td&gt;Web å…¥å£ HTTPS&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;/etc/nginx/conf.d/cert/&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;ï¼šä¸åŒç»„ä»¶è‡ªå»ºè¯ä¹¦ä¼šäº§ç”Ÿä¿¡ä»»ç¢ç‰‡ï¼Œç»Ÿä¸€ CA å¯ä»¥ä¸€æ¬¡åˆ†å‘ï¼Œå¤šå¤„å¤ç”¨ã€‚&lt;/p&gt;</description></item><item><title>æ•°æ®å®‰å…¨</title><link>https://pigsty.cc/docs/concept/sec/data/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/data/</guid><description>&lt;p&gt;æ•°æ®å®‰å…¨å…³æ³¨ä¸‰ä»¶äº‹ï¼š&lt;strong&gt;å®Œæ•´æ€§ã€å¯æ¢å¤æ€§ã€ä¿å¯†æ€§&lt;/strong&gt;ã€‚Pigsty åœ¨é»˜è®¤é…ç½®ä¸­å·²å¯ç”¨å…³é”®èƒ½åŠ›ï¼Œå¹¶æ”¯æŒæŒ‰éœ€åŠ å›ºã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="æ•°æ®å®Œæ•´æ€§"&gt;æ•°æ®å®Œæ•´æ€§&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç£ç›˜åå—ã€å†…å­˜é”™è¯¯å¯¼è‡´çš„é™é»˜æŸå&lt;/li&gt;
&lt;li&gt;æ„å¤–å†™å…¥å¯¼è‡´çš„æ•°æ®æ±¡æŸ“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ ¡éªŒå’Œ&lt;/strong&gt;ï¼šé»˜è®¤ &lt;code&gt;pg_checksum: true&lt;/code&gt;ï¼Œåˆå§‹åŒ–æ—¶å¯ç”¨ &lt;code&gt;data-checksums&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰¯æœ¬å…œåº•&lt;/strong&gt;ï¼šä¸»åº“åå—å¯ä»ä»åº“æ¢å¤ï¼ˆä¸ HA é…åˆä½¿ç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="å¯æ¢å¤æ€§å¤‡ä»½ä¸-pitr"&gt;å¯æ¢å¤æ€§ï¼ˆå¤‡ä»½ä¸ PITRï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯¯åˆ è¯¯æ”¹&lt;/li&gt;
&lt;li&gt;ç¾éš¾æ€§æ•…éšœå¯¼è‡´æ•°æ®ä¸¢å¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;pgBackRest é»˜è®¤å¯ç”¨&lt;/strong&gt;ï¼š&lt;code&gt;pgbackrest_enabled: true&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°ä»“åº“&lt;/strong&gt;ï¼šé»˜è®¤ä¿ç•™ 2 ä»½å®Œæ•´å¤‡ä»½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿œç¨‹ä»“åº“&lt;/strong&gt;ï¼šå¯æ¥å…¥ MinIOï¼Œæ”¯æŒå¯¹è±¡å­˜å‚¨ä¸å¤šå‰¯æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PITR&lt;/strong&gt;ï¼šç»“åˆ WAL å½’æ¡£è¿›è¡Œä»»æ„æ—¶é—´ç‚¹æ¢å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ•°æ®ä¿å¯†æ€§"&gt;æ•°æ®ä¿å¯†æ€§&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤‡ä»½è¢«çªƒå¯¼è‡´æ•°æ®å¤–æ³„&lt;/li&gt;
&lt;li&gt;ä»‹è´¨è¢«ç›—å¯¼è‡´æ˜æ–‡æ•°æ®æ³„éœ²&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤‡ä»½åŠ å¯†&lt;/strong&gt;ï¼šMinIO ä»“åº“æ”¯æŒ AES-256-CBCï¼ˆ&lt;code&gt;cipher_type&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜åŠ å¯†ï¼ˆå¯é€‰ï¼‰&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;pg_tde&lt;/code&gt; ç­‰æ‰©å±•å®ç°æ•°æ®é™æ€åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯†é’¥éš”ç¦»&lt;/strong&gt;ï¼šå»ºè®®å°† &lt;code&gt;cipher_pass&lt;/code&gt; ä¸ CA ç§é’¥åˆ†ç¦»ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="å®¡è®¡ä¸å¯è¿½æº¯"&gt;å®¡è®¡ä¸å¯è¿½æº¯&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ— æ³•è¿½è´£ä¸è¿˜åŸæ“ä½œ&lt;/li&gt;
&lt;li&gt;åˆè§„å®¡è®¡ç¼ºå°‘è¯æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Pigsty æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—æ”¶é›†&lt;/strong&gt;ï¼šæ¨¡æ¿é»˜è®¤å¯ç”¨ &lt;code&gt;logging_collector&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DDL å®¡è®¡&lt;/strong&gt;ï¼š&lt;code&gt;log_statement: ddl&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ…¢æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;code&gt;log_min_duration_statement&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ—¥å¿—&lt;/strong&gt;ï¼š&lt;code&gt;log_connections&lt;/code&gt;ï¼ˆPG18+ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¡è®¡æ‰©å±•&lt;/strong&gt;ï¼š&lt;code&gt;pgaudit&lt;/code&gt;ã€&lt;code&gt;pgauditlogtofile&lt;/code&gt; å¯é€‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="åŠ å›ºå»ºè®®"&gt;åŠ å›ºå»ºè®®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è¿œç¨‹å¤‡ä»½å¼ºåˆ¶åŠ å¯†ä¸ä¸“ç”¨å¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;å®šæœŸæ¼”ç»ƒ PITRï¼ŒéªŒè¯æ¢å¤é“¾è·¯ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹å…³é”®ä¸šåŠ¡å¯ç”¨ &lt;code&gt;pgaudit&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»“åˆ &lt;a href="https://pigsty.cc/docs/concept/ha/"&gt;é«˜å¯ç”¨&lt;/a&gt; å½¢æˆâ€œå¤‡ä»½ + å‰¯æœ¬â€åŒå±‚å…œåº•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ¥ä¸‹æ¥"&gt;æ¥ä¸‹æ¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ” &lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;åŠ å¯†é€šä¿¡&lt;/strong&gt;&lt;/a&gt;ï¼šè¯ä¹¦ç®¡ç†ä¸ TLS&lt;/li&gt;
&lt;li&gt;âœ… &lt;a href="https://pigsty.cc/docs/concept/sec/compliance"&gt;&lt;strong&gt;åˆè§„æ¸…å•&lt;/strong&gt;&lt;/a&gt;ï¼šå®¡è®¡ä¸åˆè§„è¦æ±‚&lt;/li&gt;
&lt;li&gt;â° &lt;a href="https://pigsty.cc/docs/concept/pitr/"&gt;&lt;strong&gt;å¤‡ä»½æ¢å¤&lt;/strong&gt;&lt;/a&gt;ï¼šPITR æœºåˆ¶ä¸å®è·µ&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>åˆè§„æ¸…å•</title><link>https://pigsty.cc/docs/concept/sec/compliance/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/sec/compliance/</guid><description>&lt;p&gt;åˆè§„ä¸æ˜¯â€œå¼€å…³â€ï¼Œè€Œæ˜¯ &lt;strong&gt;é…ç½® + æµç¨‹ + è¯æ®&lt;/strong&gt; çš„ç»„åˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼šå®‰å…¨èƒ½åŠ›æ˜¯å¦å¯ç”¨ï¼ˆHBA/TLS/å®¡è®¡/å¤‡ä»½ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµç¨‹&lt;/strong&gt;ï¼šæ˜¯å¦æœ‰æƒé™ç®¡ç†ã€å˜æ›´ã€å¤‡ä»½æ¼”ç»ƒç­‰åˆ¶åº¦&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯æ®&lt;/strong&gt;ï¼šæ—¥å¿—ã€é…ç½®å¿«ç…§ã€å¤‡ä»½æŠ¥å‘Šã€ç›‘æ§å‘Šè­¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬é¡µä»¥ SOC2 ä¸ç­‰ä¿ä¸‰çº§ä¸ºåˆ‡å…¥ç‚¹ï¼Œè¯´æ˜ Pigsty çš„å®‰å…¨èƒ½åŠ›ä¸åˆè§„æ˜ å°„ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="é»˜è®¤å‡­è¯æ¸…å•å¿…é¡»ä¿®æ”¹"&gt;é»˜è®¤å‡­è¯æ¸…å•ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰&lt;/h2&gt;
&lt;p&gt;æ¥è‡ªæºç é»˜è®¤å€¼ï¼š&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç»„ä»¶&lt;/th&gt;
 &lt;th&gt;é»˜è®¤ç”¨æˆ·å&lt;/th&gt;
 &lt;th&gt;é»˜è®¤å¯†ç &lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL ç®¡ç†å‘˜&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbuser_dba&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL ç›‘æ§&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;dbuser_monitor&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Monitor&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;PostgreSQL å¤åˆ¶&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;replicator&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;DBUser.Replicator&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Patroni API&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Patroni.API&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;HAProxy ç®¡ç†&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Grafana ç®¡ç†&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;MinIO Root&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;minioadmin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;S3User.MinIO&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;etcd Root&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;root&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;Etcd.Root&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="è¯æ®å‡†å¤‡å»ºè®®"&gt;è¯æ®å‡†å¤‡ï¼ˆå»ºè®®ï¼‰&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;è¯æ®ç±»å‹&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;th&gt;Pigsty æ”¯æŒ&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;é…ç½®å¿«ç…§&lt;/td&gt;
 &lt;td&gt;HBAã€è§’è‰²ã€TLSã€å¤‡ä»½ç­–ç•¥&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigsty.yml&lt;/code&gt; / inventory é…ç½®&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;è®¿é—®æ§åˆ¶&lt;/td&gt;
 &lt;td&gt;è§’è‰²ä¸æƒé™&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pg_default_roles&lt;/code&gt; / &lt;code&gt;pg_default_privileges&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;è¿æ¥å®¡è®¡&lt;/td&gt;
 &lt;td&gt;è¿æ¥ã€æ–­å¼€ã€DDL&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;log_connections&lt;/code&gt; / &lt;code&gt;log_statement&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å¤‡ä»½æŠ¥å‘Š&lt;/td&gt;
 &lt;td&gt;å®Œæ•´å¤‡ä»½ä¸æ¢å¤è®°å½•&lt;/td&gt;
 &lt;td&gt;pgBackRest æ—¥å¿—ä¸ä»»åŠ¡&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ç›‘æ§å‘Šè­¦&lt;/td&gt;
 &lt;td&gt;å¼‚å¸¸äº‹ä»¶è®°å½•&lt;/td&gt;
 &lt;td&gt;Prometheus + Grafana&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;è¯ä¹¦ç®¡ç†&lt;/td&gt;
 &lt;td&gt;CA/è¯ä¹¦åˆ†å‘è®°å½•&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;files/pki/&lt;/code&gt; / &lt;code&gt;/etc/pki/ca.crt&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="soc2-è§†è§’ç¤ºä¾‹æ˜ å°„"&gt;SOC2 è§†è§’ï¼ˆç¤ºä¾‹æ˜ å°„ï¼‰&lt;/h2&gt;
&lt;p&gt;SOC2 çš„æ ¸å¿ƒæ˜¯ &lt;strong&gt;å®‰å…¨ã€å¯ç”¨æ€§ã€æœºå¯†æ€§&lt;/strong&gt;ã€‚ä»¥ä¸‹ä¸ºå¸¸è§æ§åˆ¶ç‚¹çš„æ¦‚å¿µæ˜ å°„ï¼š&lt;/p&gt;</description></item></channel></rss>