<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>积木式架构 on PIGSTY</title><link>https://pigsty.cc/docs/concept/arch/</link><description>Recent content in 积木式架构 on PIGSTY</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://pigsty.cc/docs/concept/arch/index.xml" rel="self" type="application/rss+xml"/><item><title>节点</title><link>https://pigsty.cc/docs/concept/arch/node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/arch/node/</guid><description>&lt;p&gt;&lt;strong&gt;节点（node）&lt;/strong&gt; 是对硬件资源/操作系统的抽象，可以是物理机，裸金属、虚拟机、或者容器与 pods。&lt;/p&gt;
&lt;p&gt;只要装着 &lt;a href="https://pigsty.cc/docs/ref/linux"&gt;&lt;strong&gt;Linux 操作系统&lt;/strong&gt;&lt;/a&gt;（以及 systemd 守护进程），能使用 CPU/内存/磁盘/网络 等标准资源，即可视作节点。&lt;/p&gt;
&lt;p&gt;节点上可以安装 &lt;a href="https://pigsty.cc/docs/ref/module"&gt;&lt;strong&gt;模块&lt;/strong&gt;&lt;/a&gt;，Pigsty 中存在几种不同类型节点，主要区别就在于安装了不同的模块。&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;类型&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#%E6%99%AE%E9%80%9A%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;普通节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;被 Pigsty 管理的节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#admin%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;ADMIN 节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;使用 Ansible 发出管理指令的节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#infra%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;INFRA 节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装 &lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt; 模块的基础设施节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#etcd%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;ETCD 节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装 &lt;a href="https://pigsty.cc/docs/etcd/"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt; 模块的分布式共识节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#minio%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;MINIO 节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装 &lt;a href="https://pigsty.cc/docs/minio/"&gt;&lt;strong&gt;MINIO&lt;/strong&gt;&lt;/a&gt; 模块的对象存储节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;a href="#pgsql%E8%8A%82%E7%82%B9"&gt;&lt;strong&gt;PGSQL 节点&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装 &lt;a href="https://pigsty.cc/docs/pgsql/"&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt; 模块的数据库节点&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;……&lt;/td&gt;
 &lt;td style="text-align: left"&gt;安装了其他各类模块的节点……&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;在 &lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机部署&lt;/strong&gt;&lt;/a&gt; Pigsty 时，多者合而为一，当前节点将同时作为普通节点，管理节点、基础设施节点、ETCD 节点，以及数据库节点。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="普通节点"&gt;普通节点&lt;/h2&gt;
&lt;p&gt;使用 Pigsty 管理节点，可在其上安装模块。&lt;a href="https://pigsty.cc/docs/node/playbook#nodeyml"&gt;&lt;strong&gt;&lt;code&gt;node.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 剧本将调整节点至所需状态。
普通节点上可能会运行以下服务：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: center"&gt;组件&lt;/th&gt;
 &lt;th style="text-align: center"&gt;端口&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;th&gt;状态&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;node_exporter&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;9100&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;节点监控指标导出器&lt;/td&gt;
 &lt;td&gt;✅ 默认启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;haproxy&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;9101&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;HAProxy 负载均衡器（管理端口）&lt;/td&gt;
 &lt;td&gt;✅ 默认启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;vector&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;9598&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;日志收集代理&lt;/td&gt;
 &lt;td&gt;✅ 默认启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;docker&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;9323&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;启用容器支持&lt;/td&gt;
 &lt;td&gt;⚠️ 按需启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;keepalived&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;n/a&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;管理节点集群 L2 VIP&lt;/td&gt;
 &lt;td&gt;⚠️ 按需启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: center"&gt;&lt;strong&gt;&lt;code&gt;keepalived_exporter&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;&lt;code&gt;9650&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;监控 Keepalived 状态&lt;/td&gt;
 &lt;td&gt;⚠️ 按需启用&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;这里，&lt;code&gt;node_exporter&lt;/code&gt; 会向监控系统暴露主机上的各类监控指标，&lt;code&gt;vector&lt;/code&gt; 会向日志收集系统发送日志，&lt;code&gt;haproxy&lt;/code&gt; 则提供负载均衡功能，对外暴露服务。
这三项服务默认开启。而 &lt;a href="https://pigsty.cc/docs/docker"&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;/a&gt;，&lt;code&gt;keepalived&lt;/code&gt; 及 &lt;code&gt;keepalived_exporter&lt;/code&gt; 这三项服务作为可选项，可按需启用。&lt;/p&gt;</description></item><item><title>INFRA 架构</title><link>https://pigsty.cc/docs/concept/arch/infra/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/arch/infra/</guid><description>&lt;p&gt;运行生产级别高可用 PostgreSQL 集群，通常需要一套完善的基础设施服务（底座）来支撑，例如监控告警、日志收集、时间同步、DNS 解析，本地软件仓库等。
Pigsty 提供了 &lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;INFRA 模块&lt;/strong&gt;&lt;/a&gt; 来解决这个问题 —— 这是一个 &lt;strong&gt;可选模块&lt;/strong&gt;，但我们强烈推荐启用它。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;下图是 &lt;a href="https://pigsty.cc/docs/setup/install"&gt;&lt;strong&gt;单机部署&lt;/strong&gt;&lt;/a&gt; 时的架构示意图，图中右半部分即为 &lt;a href="https://pigsty.cc/docs/infra"&gt;&lt;strong&gt;INFRA 模块&lt;/strong&gt;&lt;/a&gt; 所包含的组件，其中包括：&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;组件&lt;/th&gt;
 &lt;th&gt;种类&lt;/th&gt;
 &lt;th style="text-align: left"&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#nginx"&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;Web服务器&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/setup/webui"&gt;&lt;strong&gt;Web 界面&lt;/strong&gt;&lt;/a&gt; 的统一入口，&lt;a href="#repo"&gt;&lt;strong&gt;本地软件仓库&lt;/strong&gt;&lt;/a&gt;，内部服务的反向代理&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#repo"&gt;&lt;strong&gt;Repo&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;软件仓库&lt;/td&gt;
 &lt;td style="text-align: left"&gt;APT / DNF 仓库，下载有所有部署需要的 RPM/DEB 包及其依赖&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#grafana"&gt;&lt;strong&gt;Grafana&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;可视化平台&lt;/td&gt;
 &lt;td style="text-align: left"&gt;呈现监控指标、日志与链路追踪，承载监控大屏、巡检报表以及自定义数据应用。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#victoriametrics"&gt;&lt;strong&gt;VictoriaMetrics&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;时序数据库&lt;/td&gt;
 &lt;td style="text-align: left"&gt;拉取全部监控指标，兼容 Prometheus API，并通过 VMUI 提供查询界面。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#victorialogs"&gt;&lt;strong&gt;VictoriaLogs&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;日志平台&lt;/td&gt;
 &lt;td style="text-align: left"&gt;集中收集存储日志，所有节点默认运行 Vector，将系统日志与数据库日志推送到此。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#victoriatraces"&gt;&lt;strong&gt;VictoriaTraces&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;链路追踪&lt;/td&gt;
 &lt;td style="text-align: left"&gt;收集慢 SQL、服务链路等追踪数据。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#vmalert"&gt;&lt;strong&gt;VMAlert&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;告警计算&lt;/td&gt;
 &lt;td style="text-align: left"&gt;评估告警规则，将事件推送至 Alertmanager。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#alertmanager"&gt;&lt;strong&gt;AlertManager&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;告警管理&lt;/td&gt;
 &lt;td style="text-align: left"&gt;聚合告警事件，分发告警通知，支持邮件、Webhook 等渠道。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#blackboxexporter"&gt;&lt;strong&gt;BlackboxExporter&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;黑盒探测&lt;/td&gt;
 &lt;td style="text-align: left"&gt;探测各个 IP/VIP/URL 的可达性。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#dnsmasq"&gt;&lt;strong&gt;DNSMASQ&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;DNS解析&lt;/td&gt;
 &lt;td style="text-align: left"&gt;提供 DNS 解析服务，解析 Pigsty 内部使用到的域名。【可选】&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#chronyd"&gt;&lt;strong&gt;Chronyd&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;时间同步&lt;/td&gt;
 &lt;td style="text-align: left"&gt;提供 NTP 时间同步服务，确保所有节点时间一致。 【可选】&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/concept/sec/ca"&gt;&lt;strong&gt;CA&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;证书签发&lt;/td&gt;
 &lt;td style="text-align: left"&gt;签发环境内的加密证书&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/setup/playbook"&gt;&lt;strong&gt;Ansible&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;发起管理&lt;/td&gt;
 &lt;td style="text-align: left"&gt;批量，声明式，无 Agent 管理大量服务器的工具&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/infra/"&gt;&lt;img src="https://pigsty.cc/img/pigsty/arch.png" alt="pigsty-arch"&gt;&lt;/a&gt;&lt;/p&gt;</description></item><item><title>PGSQL 架构</title><link>https://pigsty.cc/docs/concept/arch/pgsql/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/concept/arch/pgsql/</guid><description>&lt;p&gt;PGSQL 模块在生产环境中以 &lt;strong&gt;集群&lt;/strong&gt; 的形式组织，这些 &lt;strong&gt;集群&lt;/strong&gt; 是由一组通过 &lt;strong&gt;主-备&lt;/strong&gt; 关联的数据库 &lt;strong&gt;实例&lt;/strong&gt; 组成的 &lt;strong&gt;逻辑实体&lt;/strong&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="概览"&gt;概览&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://pigsty.cc/docs/pgsql"&gt;&lt;strong&gt;PGSQL 模块&lt;/strong&gt;&lt;/a&gt; 包含下列组件，协同提供生产级 PostgreSQL 高可用集群服务：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;组件&lt;/th&gt;
 &lt;th&gt;简介&lt;/th&gt;
 &lt;th style="text-align: left"&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#postgresql"&gt;&lt;strong&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;数据库&lt;/td&gt;
 &lt;td style="text-align: left"&gt;世界上最先进的开源关系型数据库，PGSQL 模块的核心。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#patroni"&gt;&lt;strong&gt;&lt;code&gt;patroni&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;高可用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;托管 PostgreSQL 进程，协调故障转移、选主、配置变更。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgbouncer"&gt;&lt;strong&gt;&lt;code&gt;pgbouncer&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;连接池&lt;/td&gt;
 &lt;td style="text-align: left"&gt;轻量级连接池中间件，复用连接、降低开销、提供额外灵活性。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgbackrest"&gt;&lt;strong&gt;&lt;code&gt;pgbackrest&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;备份恢复&lt;/td&gt;
 &lt;td style="text-align: left"&gt;全量/增量备份与 WAL 归档，支持本地与对象存储。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pg_exporter"&gt;&lt;strong&gt;&lt;code&gt;pg_exporter&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;指标导出&lt;/td&gt;
 &lt;td style="text-align: left"&gt;导出 PostgreSQL 监控指标供 Prometheus 抓取。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgbouncer_exporter"&gt;&lt;strong&gt;&lt;code&gt;pgbouncer_exporter&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;指标导出&lt;/td&gt;
 &lt;td style="text-align: left"&gt;导出 &lt;a href="#pgbouncer"&gt;&lt;strong&gt;Pgbouncer&lt;/strong&gt;&lt;/a&gt; 连接池指标。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgbackrest_exporter"&gt;&lt;strong&gt;&lt;code&gt;pgbackrest_exporter&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;指标导出&lt;/td&gt;
 &lt;td style="text-align: left"&gt;导出 &lt;a href="#pgbackrest"&gt;&lt;strong&gt;pgBackrest&lt;/strong&gt;&lt;/a&gt; 备份状态指标。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#vip-manager"&gt;&lt;strong&gt;&lt;code&gt;vip-manager&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;VIP管理&lt;/td&gt;
 &lt;td style="text-align: left"&gt;将 L2 VIP 绑定到当前主库节点，实现透明漂移。【可选】&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;其中 &lt;a href="#vip-manager"&gt;&lt;strong&gt;&lt;code&gt;vip-manager&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 为按需启用的组件。此外，PGSQL 还会使用到其他模块中的组件：&lt;/p&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;组件&lt;/th&gt;
 &lt;th style="text-align: left"&gt;模块&lt;/th&gt;
 &lt;th&gt;简介&lt;/th&gt;
 &lt;th style="text-align: left"&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="#haproxy"&gt;&lt;strong&gt;&lt;code&gt;haproxy&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;strong&gt;NODE&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;负载均衡&lt;/td&gt;
 &lt;td style="text-align: left"&gt;对外暴露服务端口，根据角色分发流量至主库或从库。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="#vector"&gt;&lt;strong&gt;&lt;code&gt;vector&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/node"&gt;&lt;strong&gt;NODE&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;日志采集&lt;/td&gt;
 &lt;td style="text-align: left"&gt;收集 PostgreSQL、&lt;a href="#patroni"&gt;Patroni&lt;/a&gt;、&lt;a href="#pgbouncer"&gt;Pgbouncer&lt;/a&gt; 等日志推送至中心。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;a href="#etcd"&gt;&lt;strong&gt;&lt;code&gt;etcd&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="https://pigsty.cc/docs/etcd"&gt;&lt;strong&gt;ETCD&lt;/strong&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;DCS&lt;/td&gt;
 &lt;td style="text-align: left"&gt;分布式一致性存储，用于保存集群元数据与领导者信息。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果用类比来形容，&lt;a href="#postgresql"&gt;PostgreSQL&lt;/a&gt; 数据库内核就是 CPU，而整个 PGSQL 模块将其封装为一台完整的计算机。
&lt;a href="#patroni"&gt;Patroni&lt;/a&gt; 与 &lt;a href="#etcd"&gt;Etcd&lt;/a&gt; 组成 &lt;a href="#%E9%AB%98%E5%8F%AF%E7%94%A8%E5%AD%90%E7%B3%BB%E7%BB%9F"&gt;高可用子系统&lt;/a&gt;，&lt;a href="#pgbackrest"&gt;pgBackRest&lt;/a&gt; 与 MinIO 组成 &lt;a href="#%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E5%AD%90%E7%B3%BB%E7%BB%9F"&gt;备份恢复子系统&lt;/a&gt;。
&lt;a href="#haproxy"&gt;HAProxy&lt;/a&gt; 与 &lt;a href="#pgbouncer"&gt;Pgbouncer&lt;/a&gt;、&lt;a href="#vip-manager"&gt;vip-manager&lt;/a&gt; 组成 &lt;a href="#%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%85%A5%E5%AD%90%E7%B3%BB%E7%BB%9F"&gt;接入子系统&lt;/a&gt;。
各种 Exporter 与 &lt;a href="#vector"&gt;Vector&lt;/a&gt; 构成 &lt;a href="#%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E5%AD%90%E7%B3%BB%E7%BB%9F"&gt;可观测性子系统&lt;/a&gt;；
最后还可以替换不同的 &lt;a href="https://pigsty.cc/docs/pgsql/kernel"&gt;&lt;strong&gt;内核 CPU&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="https://pigsty.cc/docs/pgsql/ext"&gt;&lt;strong&gt;扩展卡&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;</description></item></channel></rss>