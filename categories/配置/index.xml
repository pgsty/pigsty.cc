<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>配置 on PIGSTY</title><link>https://pigsty.cc/categories/%E9%85%8D%E7%BD%AE/</link><description>Recent content in 配置 on PIGSTY</description><generator>Hugo</generator><language>zh-CN</language><atom:link href="https://pigsty.cc/categories/%E9%85%8D%E7%BD%AE/index.xml" rel="self" type="application/rss+xml"/><item><title>HBA 规则</title><link>https://pigsty.cc/docs/pgsql/config/hba/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/pgsql/config/hba/</guid><description>&lt;h2 id="概述"&gt;概述&lt;/h2&gt;
&lt;p&gt;HBA（Host-Based Authentication）控制&amp;quot;谁可以从哪里、以什么方式连接到数据库&amp;quot;。
Pigsty 通过 &lt;a href="#pg_default_hba_rules"&gt;&lt;strong&gt;&lt;code&gt;pg_default_hba_rules&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 与 &lt;a href="#pg_hba_rules"&gt;&lt;strong&gt;&lt;code&gt;pg_hba_rules&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 让 HBA 规则也能以声明式配置形式管理。&lt;/p&gt;
&lt;p&gt;Pigsty 在集群初始化或 HBA 刷新时渲染以下配置文件：&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;配置文件&lt;/th&gt;
 &lt;th style="text-align: left"&gt;路径&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL HBA&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/pg/data/pg_hba.conf&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 服务器的 HBA 规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Pgbouncer HBA&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;/etc/pgbouncer/pgb_hba.conf&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;连接池 Pgbouncer 的 HBA 规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;HBA 规则由以下参数控制：&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;参数&lt;/th&gt;
 &lt;th style="text-align: left"&gt;层级&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pg_default_hba_rules"&gt;&lt;code&gt;pg_default_hba_rules&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;G&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 全局默认 HBA 规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pg_hba_rules"&gt;&lt;code&gt;pg_hba_rules&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;G/C/I&lt;/td&gt;
 &lt;td style="text-align: left"&gt;PostgreSQL 集群/实例级追加规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgb_default_hba_rules"&gt;&lt;code&gt;pgb_default_hba_rules&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;G&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Pgbouncer 全局默认 HBA 规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;&lt;a href="#pgb_hba_rules"&gt;&lt;code&gt;pgb_hba_rules&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
 &lt;td style="text-align: left"&gt;G/C/I&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Pgbouncer 集群/实例级追加规则&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;规则支持以下特性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;按角色过滤&lt;/strong&gt;：规则支持 &lt;code&gt;role&lt;/code&gt; 字段，根据实例的 &lt;code&gt;pg_role&lt;/code&gt; 自动筛选生效&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;按顺序排序&lt;/strong&gt;：规则支持 &lt;code&gt;order&lt;/code&gt; 字段，控制规则在最终配置文件中的位置&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;两种写法&lt;/strong&gt;：支持别名形式（简化语法）和原始形式（直接 HBA 文本）&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="刷新-hba"&gt;刷新 HBA&lt;/h2&gt;
&lt;p&gt;修改配置后，需要重新渲染配置文件并让服务重载：&lt;/p&gt;</description></item><item><title>功能配置</title><link>https://pigsty.cc/docs/vibe/config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.cc/docs/vibe/config/</guid><description>&lt;p&gt;VIBE 模块支持按需启用组件，并通过统一的工作目录和 Nginx 入口对外提供服务。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="配置概览"&gt;配置概览&lt;/h2&gt;
&lt;table class="full-width"&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th style="text-align: left"&gt;组件&lt;/th&gt;
 &lt;th style="text-align: left"&gt;启用参数&lt;/th&gt;
 &lt;th style="text-align: center"&gt;默认状态&lt;/th&gt;
 &lt;th style="text-align: left"&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Code-Server&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;code_enabled&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;启用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;浏览器 VS Code&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;JupyterLab&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;jupyter_enabled&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;禁用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Notebook/终端/编辑器&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Node.js&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;nodejs_enabled&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;启用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;Node.js 运行时与 npm&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style="text-align: left"&gt;Claude Code&lt;/td&gt;
 &lt;td style="text-align: left"&gt;&lt;code&gt;claude_enabled&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: center"&gt;启用&lt;/td&gt;
 &lt;td style="text-align: left"&gt;CLI 配置与可观测性&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;说明：模块默认 &lt;code&gt;jupyter_enabled: false&lt;/code&gt;，但 &lt;code&gt;conf/vibe.yml&lt;/code&gt; 预置模板会显式设置为 &lt;code&gt;true&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;配置通常位于集群 &lt;code&gt;vars&lt;/code&gt;，也可以在实例级别覆盖：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;all&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;children&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;infra&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;hosts&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;10.10.10.10&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;vibe_data&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;/fs&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;code_enabled&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;jupyter_enabled&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;claude_enabled&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="工作目录"&gt;工作目录&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;vibe_data&lt;/code&gt; 作为 VIBE 的统一工作区：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Code-Server 默认打开目录&lt;/li&gt;
&lt;li&gt;JupyterLab &lt;code&gt;root_dir&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Claude Code 的工作目录&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CLAUDE.md&lt;/code&gt; / &lt;code&gt;AGENTS.md&lt;/code&gt; 上下文文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;vibe_dir&lt;/code&gt; 任务会创建目录并写入上下文文件，文件属主为 &lt;code&gt;node_user&lt;/code&gt;。&lt;/p&gt;</description></item></channel></rss>